var Lf=Object.create;var ks=Object.defineProperty,Pf=Object.defineProperties,Ff=Object.getOwnPropertyDescriptor,Bf=Object.getOwnPropertyDescriptors,jf=Object.getOwnPropertyNames,xc=Object.getOwnPropertySymbols,Hf=Object.getPrototypeOf,Rc=Object.prototype.hasOwnProperty,Uf=Object.prototype.propertyIsEnumerable;var Ac=(e,t,n)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||={})Rc.call(t,n)&&Ac(e,n,t[n]);if(xc)for(var n of xc(t))Uf.call(t,n)&&Ac(e,n,t[n]);return e},pe=(e,t)=>Pf(e,Bf(t));var kc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $f=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of jf(t))!Rc.call(e,s)&&s!==n&&ks(e,s,{get:()=>t[s],enumerable:!(r=Ff(t,s))||r.enumerable});return e};var Oc=(e,t,n)=>(n=e!=null?Lf(Hf(e)):{},$f(t||!e||!e.__esModule?ks(n,"default",{value:e,enumerable:!0}):n,e));var Af=kc((Ds,Mc)=>{"use strict";(function(e,t){if(typeof Ds=="object"&&typeof Mc=="object")Mc.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var r in n)(typeof Ds=="object"?Ds:e)[r]=n[r]}})(self,()=>(()=>{"use strict";var e={4567:function(s,i,o){var a=this&&this.__decorate||function(f,g,y,S){var D,m=arguments.length,w=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,g,y,S);else for(var I=f.length-1;I>=0;I--)(D=f[I])&&(w=(m<3?D(w):m>3?D(g,y,w):D(g,y))||w);return m>3&&w&&Object.defineProperty(g,y,w),w},c=this&&this.__param||function(f,g){return function(y,S){g(y,S,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;let u=o(9042),p=o(6114),v=o(9924),C=o(844),_=o(5596),l=o(4725),h=o(3656),d=i.AccessibilityManager=class extends C.Disposable{constructor(f,g){super(),this._terminal=f,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(y=>this._handleResize(y.rows))),this.register(this._terminal.onRender(y=>this._refreshRows(y.start,y.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(y=>this._handleChar(y))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(y=>this._handleTab(y))),this.register(this._terminal.onKey(y=>this._handleKey(y.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new _.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(f){for(let g=0;g<f;g++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,g){this._liveRegionDebouncer.refresh(f,g,this._terminal.rows)}_renderRows(f,g){let y=this._terminal.buffer,S=y.lines.length.toString();for(let D=f;D<=g;D++){let m=y.translateBufferLineToString(y.ydisp+D,!0),w=(y.ydisp+D+1).toString(),I=this._rowElements[D];I&&(m.length===0?I.innerText="\xA0":I.textContent=m,I.setAttribute("aria-posinset",w),I.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,g){let y=f.target,S=this._rowElements[g===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==S)return;let D,m;if(g===0?(D=y,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(D=this._rowElements.shift(),m=y,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){let w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{let w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let f=document.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=d=a([c(1,l.IRenderService)],d)},3614:(s,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,v){return v?"\x1B[200~"+p+"\x1B[201~":p}function c(p,v,C,_){p=a(p=o(p),C.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(p,!0),v.value=""}function u(p,v,C){let _=C.getBoundingClientRect(),l=p.clientX-_.left-10,h=p.clientY-_.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${l}px`,v.style.top=`${h}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=a,i.copyHandler=function(p,v){p.clipboardData&&p.clipboardData.setData("text/plain",v.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,v,C,_){p.stopPropagation(),p.clipboardData&&c(p.clipboardData.getData("text/plain"),v,C,_)},i.paste=c,i.moveTextAreaUnderMouseCursor=u,i.rightClickHandler=function(p,v,C,_,l){u(p,v,C),l&&_.rightClickSelect(p),v.value=_.selectionText,v.select()}},7239:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;let a=o(1505);i.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(c,u,p){this._css.set(c,u,p)}getCss(c,u){return this._css.get(c,u)}setColor(c,u,p){this._color.set(c,u,p)}getColor(c,u){return this._color.get(c,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,c,u){o.addEventListener(a,c,u);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,c,u))}}}},6465:function(s,i,o){var a=this&&this.__decorate||function(l,h,d,f){var g,y=arguments.length,S=y<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,h,d,f);else for(var D=l.length-1;D>=0;D--)(g=l[D])&&(S=(y<3?g(S):y>3?g(h,d,S):g(h,d))||S);return y>3&&S&&Object.defineProperty(h,d,S),S},c=this&&this.__param||function(l,h){return function(d,f){h(d,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;let u=o(3656),p=o(8460),v=o(844),C=o(2585),_=i.Linkifier2=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{let h=this._linkProviders.indexOf(l);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(l,h,d){this._element=l,this._mouseService=h,this._renderService=d,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;let h=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;let d=l.composedPath();for(let f=0;f<d.length;f++){let g=d[f];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,h){var d,f;this._activeProviderReplies&&h||((d=this._activeProviderReplies)===null||d===void 0||d.forEach(y=>{y?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let g=!1;for(let[y,S]of this._linkProviders.entries())h?!((f=this._activeProviderReplies)===null||f===void 0)&&f.get(y)&&(g=this._checkLinkProviderResult(y,l,g)):S.provideLinks(l.y,D=>{var m,w;if(this._isMouseOut)return;let I=D?.map(R=>({link:R}));(m=this._activeProviderReplies)===null||m===void 0||m.set(y,I),g=this._checkLinkProviderResult(y,l,g),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,h){let d=new Set;for(let f=0;f<h.size;f++){let g=h.get(f);if(g)for(let y=0;y<g.length;y++){let S=g[y],D=S.link.range.start.y<l?0:S.link.range.start.x,m=S.link.range.end.y>l?this._bufferService.cols:S.link.range.end.x;for(let w=D;w<=m;w++){if(d.has(w)){g.splice(y--,1);break}d.add(w)}}}}_checkLinkProviderResult(l,h,d){var f;if(!this._activeProviderReplies)return d;let g=this._activeProviderReplies.get(l),y=!1;for(let S=0;S<l;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(y=!0);if(!y&&g){let S=g.find(D=>this._linkAtPosition(D.link,h));S&&(d=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(f=this._activeProviderReplies.get(S))===null||f===void 0?void 0:f.find(m=>this._linkAtPosition(m.link,h));if(D){d=!0,this._handleNewLink(D);break}}return d}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;let h=this._positionFromMouseEvent(l,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!h||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(l.link,h)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var d,f;return(f=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||f===void 0?void 0:f.decorations.pointerCursor},set:d=>{var f,g;!((f=this._currentLink)===null||f===void 0)&&f.state&&this._currentLink.state.decorations.pointerCursor!==d&&(this._currentLink.state.decorations.pointerCursor=d,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",d)))}},underline:{get:()=>{var d,f;return(f=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||f===void 0?void 0:f.decorations.underline},set:d=>{var f,g,y;!((f=this._currentLink)===null||f===void 0)&&f.state&&((y=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||y===void 0?void 0:y.decorations.underline)!==d&&(this._currentLink.state.decorations.underline=d,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,d))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(d=>{if(!this._currentLink)return;let f=d.start===0?0:d.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+d.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(f,g),this._lastMouseEvent&&this._element)){let y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}})))}_linkHover(l,h,d){var f;!((f=this._currentLink)===null||f===void 0)&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(d,h.text)}_fireUnderlineEvent(l,h){let d=l.range,f=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-f-1,d.end.x,d.end.y-f-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(l,h,d){var f;!((f=this._currentLink)===null||f===void 0)&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(d,h.text)}_linkAtPosition(l,h){let d=l.range.start.y*this._bufferService.cols+l.range.start.x,f=l.range.end.y*this._bufferService.cols+l.range.end.x,g=h.y*this._bufferService.cols+h.x;return d<=g&&g<=f}_positionFromMouseEvent(l,h,d){let f=d.getCoords(l,h,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,h,d,f,g){return{x1:l,y1:h,x2:d,y2:f,cols:this._bufferService.cols,fg:g}}};i.Linkifier2=_=a([c(0,C.IBufferService)],_)},9042:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(s,i,o){var a=this&&this.__decorate||function(_,l,h,d){var f,g=arguments.length,y=g<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,l,h,d);else for(var S=_.length-1;S>=0;S--)(f=_[S])&&(y=(g<3?f(y):g>3?f(l,h,y):f(l,h))||y);return g>3&&y&&Object.defineProperty(l,h,y),y},c=this&&this.__param||function(_,l){return function(h,d){l(h,d,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;let u=o(511),p=o(2585),v=i.OscLinkProvider=class{constructor(_,l,h){this._bufferService=_,this._optionsService=l,this._oscLinkService=h}provideLinks(_,l){var h;let d=this._bufferService.buffer.lines.get(_-1);if(!d)return void l(void 0);let f=[],g=this._optionsService.rawOptions.linkHandler,y=new u.CellData,S=d.getTrimmedLength(),D=-1,m=-1,w=!1;for(let I=0;I<S;I++)if(m!==-1||d.hasContent(I)){if(d.loadCell(I,y),y.hasExtendedAttrs()&&y.extended.urlId){if(m===-1){m=I,D=y.extended.urlId;continue}w=y.extended.urlId!==D}else m!==-1&&(w=!0);if(w||m!==-1&&I===S-1){let R=(h=this._oscLinkService.getLinkData(D))===null||h===void 0?void 0:h.uri;if(R){let M={start:{x:m+1,y:_},end:{x:I+(w||I!==S-1?0:1),y:_}},A=!1;if(!g?.allowNonHttpProtocols)try{let N=new URL(R);["http:","https:"].includes(N.protocol)||(A=!0)}catch{A=!0}A||f.push({text:R,range:M,activate:(N,F)=>g?g.activate(N,F,M):C(0,F),hover:(N,F)=>{var j;return(j=g?.hover)===null||j===void 0?void 0:j.call(g,N,F,M)},leave:(N,F)=>{var j;return(j=g?.leave)===null||j===void 0?void 0:j.call(g,N,F,M)}})}w=!1,y.hasExtendedAttrs()&&y.extended.urlId?(m=I,D=y.extended.urlId):(m=-1,D=-1)}}l(f)}};function C(_,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){let h=window.open();if(h){try{h.opener=null}catch{}h.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=v=a([c(0,p.IBufferService),c(1,p.IOptionsService),c(2,p.IOscLinkService)],v)},6193:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,a){this._parentWindow=o,this._renderCallback=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;let a=o(844);class c extends a.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,a.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=c},3236:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let a=o(3614),c=o(3656),u=o(6465),p=o(9042),v=o(3730),C=o(1680),_=o(3107),l=o(5744),h=o(2950),d=o(1296),f=o(428),g=o(4269),y=o(5114),S=o(8934),D=o(3230),m=o(9312),w=o(4725),I=o(6731),R=o(8055),M=o(8969),A=o(8460),N=o(844),F=o(6114),j=o(8437),B=o(2584),E=o(7399),T=o(5941),x=o(9074),k=o(2585),H=o(5435),U=o(4567),q=typeof window<"u"?window.document:null;class W extends M.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(b={}){super(b),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(x.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,P)=>this.refresh(O,P))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,N.toDisposable)(()=>{var O,P;this._customKeyEventHandler=void 0,(P=(O=this.element)===null||O===void 0?void 0:O.parentNode)===null||P===void 0||P.removeChild(this.element)}))}_handleColorEvent(b){if(this._themeService)for(let O of b){let P,L="";switch(O.index){case 256:P="foreground",L="10";break;case 257:P="background",L="11";break;case 258:P="cursor",L="12";break;default:P="ansi",L="4;"+O.index}switch(O.type){case 0:let J=R.color.toColorRGB(P==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[P]);this.coreService.triggerDataEvent(`${B.C0.ESC}]${L};${(0,T.toRgbString)(J)}${B.C1_ESCAPED.ST}`);break;case 1:if(P==="ansi")this._themeService.modifyColors(V=>V.ansi[O.index]=R.rgba.toColor(...O.color));else{let V=P;this._themeService.modifyColors(de=>de[V]=R.rgba.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(b){b?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(b){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[I"),this.updateCursorStyle(b),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var b;return(b=this.textarea)===null||b===void 0?void 0:b.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let b=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get(b);if(!O)return;let P=Math.min(this.buffer.x,this.cols-1),L=this._renderService.dimensions.css.cell.height,J=O.getWidth(P),V=this._renderService.dimensions.css.cell.width*J,de=this.buffer.y*this._renderService.dimensions.css.cell.height,De=P*this._renderService.dimensions.css.cell.width;this.textarea.style.left=De+"px",this.textarea.style.top=de+"px",this.textarea.style.width=V+"px",this.textarea.style.height=L+"px",this.textarea.style.lineHeight=L+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,c.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,a.copyHandler)(O,this._selectionService)}));let b=O=>(0,a.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,c.addDisposableDomListener)(this.textarea,"paste",b)),this.register((0,c.addDisposableDomListener)(this.element,"paste",b)),F.isFirefox?this.register((0,c.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,a.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,c.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,a.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,c.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,a.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,c.addDisposableDomListener)(this.textarea,"keyup",b=>this._keyUp(b),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keydown",b=>this._keyDown(b),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keypress",b=>this._keyPress(b),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionupdate",b=>this._compositionHelper.compositionupdate(b))),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,c.addDisposableDomListener)(this.textarea,"input",b=>this._inputEvent(b),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(b){var O;if(!b)throw new Error("Terminal requires a parent element.");b.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=b.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),b.appendChild(this.element);let P=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,(O=this._document.defaultView)!==null&&O!==void 0?O:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,c.addDisposableDomListener)(this.textarea,"focus",L=>this._handleTextAreaFocus(L))),this.register((0,c.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(L=>this._onRender.fire(L))),this.onResize(L=>this._renderService.resize(L.cols,L.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(L=>this._renderService.handleSelectionChanged(L.start,L.end,L.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(L=>{this.textarea.value=L,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(L=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,c.addDisposableDomListener)(this.element,"mousedown",L=>this._selectionService.handleMouseDown(L))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",L=>this._handleScreenReaderModeOptionChange(L))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",L=>{!this._overviewRulerRenderer&&L&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let b=this,O=this.element;function P(V){let de=b._mouseService.getMouseReportCoords(V,b.screenElement);if(!de)return!1;let De,ke;switch(V.overrideType||V.type){case"mousemove":ke=32,V.buttons===void 0?(De=3,V.button!==void 0&&(De=V.button<3?V.button:3)):De=1&V.buttons?0:4&V.buttons?1:2&V.buttons?2:3;break;case"mouseup":ke=0,De=V.button<3?V.button:3;break;case"mousedown":ke=1,De=V.button<3?V.button:3;break;case"wheel":if(b.viewport.getLinesScrolled(V)===0)return!1;ke=V.deltaY<0?0:1,De=4;break;default:return!1}return!(ke===void 0||De===void 0||De>4)&&b.coreMouseService.triggerMouseEvent({col:de.col,row:de.row,x:de.x,y:de.y,button:De,action:ke,ctrl:V.ctrlKey,alt:V.altKey,shift:V.shiftKey})}let L={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:V=>(P(V),V.buttons||(this._document.removeEventListener("mouseup",L.mouseup),L.mousedrag&&this._document.removeEventListener("mousemove",L.mousedrag)),this.cancel(V)),wheel:V=>(P(V),this.cancel(V,!0)),mousedrag:V=>{V.buttons&&P(V)},mousemove:V=>{V.buttons||P(V)}};this.register(this.coreMouseService.onProtocolChange(V=>{V?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(V)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&V?L.mousemove||(O.addEventListener("mousemove",J.mousemove),L.mousemove=J.mousemove):(O.removeEventListener("mousemove",L.mousemove),L.mousemove=null),16&V?L.wheel||(O.addEventListener("wheel",J.wheel,{passive:!1}),L.wheel=J.wheel):(O.removeEventListener("wheel",L.wheel),L.wheel=null),2&V?L.mouseup||(O.addEventListener("mouseup",J.mouseup),L.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",L.mouseup),O.removeEventListener("mouseup",L.mouseup),L.mouseup=null),4&V?L.mousedrag||(L.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",L.mousedrag),L.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,c.addDisposableDomListener)(O,"mousedown",V=>{if(V.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(V))return P(V),L.mouseup&&this._document.addEventListener("mouseup",L.mouseup),L.mousedrag&&this._document.addEventListener("mousemove",L.mousedrag),this.cancel(V)})),this.register((0,c.addDisposableDomListener)(O,"wheel",V=>{if(!L.wheel){if(!this.buffer.hasScrollback){let de=this.viewport.getLinesScrolled(V);if(de===0)return;let De=B.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(V.deltaY<0?"A":"B"),ke="";for(let Jt=0;Jt<Math.abs(de);Jt++)ke+=De;return this.coreService.triggerDataEvent(ke,!0),this.cancel(V,!0)}return this.viewport.handleWheel(V)?this.cancel(V):void 0}},{passive:!1})),this.register((0,c.addDisposableDomListener)(O,"touchstart",V=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(V),this.cancel(V)},{passive:!0})),this.register((0,c.addDisposableDomListener)(O,"touchmove",V=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(V)?void 0:this.cancel(V)},{passive:!1}))}refresh(b,O){var P;(P=this._renderService)===null||P===void 0||P.refreshRows(b,O)}updateCursorStyle(b){var O;!((O=this._selectionService)===null||O===void 0)&&O.shouldColumnSelect(b)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(b,O,P=0){var L;P===1?(super.scrollLines(b,O,P),this.refresh(0,this.rows-1)):(L=this.viewport)===null||L===void 0||L.scrollLines(b)}paste(b){(0,a.paste)(b,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(b){this._customKeyEventHandler=b}registerLinkProvider(b){return this.linkifier2.registerLinkProvider(b)}registerCharacterJoiner(b){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let O=this._characterJoinerService.register(b);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner(b){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(b)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(b){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+b)}registerDecoration(b){return this._decorationService.registerDecoration(b)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(b,O,P){this._selectionService.setSelection(b,O,P)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var b;(b=this._selectionService)===null||b===void 0||b.clearSelection()}selectAll(){var b;(b=this._selectionService)===null||b===void 0||b.selectAll()}selectLines(b,O){var P;(P=this._selectionService)===null||P===void 0||P.selectLines(b,O)}_keyDown(b){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1)return!1;let O=this.browser.isMac&&this.options.macOptionIsMeta&&b.altKey;if(!O&&!this._compositionHelper.keydown(b))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||b.key!=="Dead"&&b.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let P=(0,E.evaluateKeyboardEvent)(b,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(b),P.type===3||P.type===2){let L=this.rows-1;return this.scrollLines(P.type===2?-L:L),this.cancel(b,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,b)||(P.cancel&&this.cancel(b,!0),!P.key||!!(b.key&&!b.ctrlKey&&!b.altKey&&!b.metaKey&&b.key.length===1&&b.key.charCodeAt(0)>=65&&b.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==B.C0.ETX&&P.key!==B.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:b}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),!this.optionsService.rawOptions.screenReaderMode||b.altKey||b.ctrlKey?this.cancel(b,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(b,O){let P=b.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||b.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||b.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?P:P&&(!O.keyCode||O.keyCode>47)}_keyUp(b){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}(b)||this.focus(),this.updateCursorStyle(b),this._keyPressHandled=!1)}_keyPress(b){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1)return!1;if(this.cancel(b),b.charCode)O=b.charCode;else if(b.which===null||b.which===void 0)O=b.keyCode;else{if(b.which===0||b.charCode===0)return!1;O=b.which}return!(!O||(b.altKey||b.ctrlKey||b.metaKey)&&!this._isThirdLevelShift(this.browser,b)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:b}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(b){if(b.data&&b.inputType==="insertText"&&(!b.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let O=b.data;return this.coreService.triggerDataEvent(O,!0),this.cancel(b),!0}return!1}resize(b,O){b!==this.cols||O!==this.rows?super.resize(b,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(b,O){var P,L;(P=this._charSizeService)===null||P===void 0||P.measure(),(L=this.viewport)===null||L===void 0||L.syncScrollArea(!0)}clear(){var b;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(b=this.viewport)===null||b===void 0||b.reset(),this.refresh(0,this.rows-1)}}reset(){var b,O;this.options.rows=this.rows,this.options.cols=this.cols;let P=this._customKeyEventHandler;this._setup(),super.reset(),(b=this._selectionService)===null||b===void 0||b.reset(),this._decorationService.reset(),(O=this.viewport)===null||O===void 0||O.reset(),this._customKeyEventHandler=P,this.refresh(0,this.rows-1)}clearTextureAtlas(){var b;(b=this._renderService)===null||b===void 0||b.clearTextureAtlas()}_reportFocus(){var b;!((b=this.element)===null||b===void 0)&&b.classList.contains("focus")?this.coreService.triggerDataEvent(B.C0.ESC+"[I"):this.coreService.triggerDataEvent(B.C0.ESC+"[O")}_reportWindowsOptions(b){if(this._renderService)switch(b){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let O=this._renderService.dimensions.css.canvas.width.toFixed(0),P=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[4;${P};${O}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let L=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[6;${J};${L}t`)}}cancel(b,O){if(this.options.cancelEvents||O)return b.preventDefault(),b.stopPropagation(),!1}}i.Terminal=W},9924:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=u-this._lastRefreshMs,v=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(s,i,o){var a=this&&this.__decorate||function(h,d,f,g){var y,S=arguments.length,D=S<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,d,f,g);else for(var m=h.length-1;m>=0;m--)(y=h[m])&&(D=(S<3?y(D):S>3?y(d,f,D):y(d,f))||D);return S>3&&D&&Object.defineProperty(d,f,D),D},c=this&&this.__param||function(h,d){return function(f,g){d(f,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;let u=o(3656),p=o(4725),v=o(8460),C=o(844),_=o(2585),l=i.Viewport=class extends C.Disposable{constructor(h,d,f,g,y,S,D,m){super(),this._viewportElement=h,this._scrollArea=d,this._bufferService=f,this._optionsService=g,this._charSizeService=y,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,d){let f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&f<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){let d=this._getPixelsScrolled(h);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(h,d))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let d=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let d=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getBufferElements(h,d){var f;let g,y="",S=[],D=d??this._bufferService.buffer.lines.length,m=this._bufferService.buffer.lines;for(let w=h;w<D;w++){let I=m.get(w);if(!I)continue;let R=(f=m.get(w+1))===null||f===void 0?void 0:f.isWrapped;if(y+=I.translateToString(!R),!R||w===m.length-1){let M=document.createElement("div");M.textContent=y,S.push(M),y.length>0&&(g=M),y=""}}return{bufferElements:S,cursorElement:g}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let d=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(h,d){let f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&d.altKey||f==="ctrl"&&d.ctrlKey||f==="shift"&&d.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){let d=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(h,d))}};i.Viewport=l=a([c(2,_.IBufferService),c(3,_.IOptionsService),c(4,p.ICharSizeService),c(5,p.IRenderService),c(6,p.ICoreBrowserService),c(7,p.IThemeService)],l)},3107:function(s,i,o){var a=this&&this.__decorate||function(l,h,d,f){var g,y=arguments.length,S=y<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,h,d,f);else for(var D=l.length-1;D>=0;D--)(g=l[D])&&(S=(y<3?g(S):y>3?g(h,d,S):g(h,d))||S);return y>3&&S&&Object.defineProperty(h,d,S),S},c=this&&this.__param||function(l,h){return function(d,f){h(d,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;let u=o(3656),p=o(4725),v=o(844),C=o(2585),_=i.BufferDecorationRenderer=class extends v.Disposable{constructor(l,h,d,f){super(),this._screenElement=l,this._bufferService=h,this._decorationService=d,this._renderService=f,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var h,d;let f=document.createElement("div");f.classList.add("xterm-decoration"),f.classList.toggle("xterm-decoration-top-layer",((h=l?.options)===null||h===void 0?void 0:h.layer)==="top"),f.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let g=(d=l.options.x)!==null&&d!==void 0?d:0;return g&&g>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(l,f),f}_refreshStyle(l){let h=l.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let d=this._decorationElements.get(l);d||(d=this._createElement(l),l.element=d,this._decorationElements.set(l,d),this._container.appendChild(d),l.onDispose(()=>{this._decorationElements.delete(l),d.remove()})),d.style.top=h*this._renderService.dimensions.css.cell.height+"px",d.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(d)}}_refreshXPosition(l,h=l.element){var d;if(!h)return;let f=(d=l.options.x)!==null&&d!==void 0?d:0;(l.options.anchor||"left")==="right"?h.style.right=f?f*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=f?f*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var h;(h=this._decorationElements.get(l))===null||h===void 0||h.remove(),this._decorationElements.delete(l),l.dispose()}};i.BufferDecorationRenderer=_=a([c(1,C.IBufferService),c(2,C.IDecorationService),c(3,p.IRenderService)],_)},5871:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,c){return a>=o.startBufferLine-this._linePadding[c||"full"]&&a<=o.endBufferLine+this._linePadding[c||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(s,i,o){var a=this&&this.__decorate||function(g,y,S,D){var m,w=arguments.length,I=w<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(g,y,S,D);else for(var R=g.length-1;R>=0;R--)(m=g[R])&&(I=(w<3?m(I):w>3?m(y,S,I):m(y,S))||I);return w>3&&I&&Object.defineProperty(y,S,I),I},c=this&&this.__param||function(g,y){return function(S,D){y(S,D,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;let u=o(5871),p=o(3656),v=o(4725),C=o(844),_=o(2585),l={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},f=i.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,y,S,D,m,w,I){var R;super(),this._viewportElement=g,this._screenElement=y,this._bufferService=S,this._decorationService=D,this._renderService=m,this._optionsService=w,this._coreBrowseService=I,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);let M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var A;(A=this._canvas)===null||A===void 0||A.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let g=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=y,h.right=g,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=h.left,d.right=h.left+h.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);let g=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);l.left=y,l.center=y,l.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;let g=this._colorZoneStore.zones;for(let y of g)y.position!=="full"&&this._renderColorZone(y);for(let y of g)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(d[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-l[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[g.position||"full"]))}_queueRefresh(g,y){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=f=a([c(2,_.IBufferService),c(3,_.IDecorationService),c(4,v.IRenderService),c(5,_.IOptionsService),c(6,v.ICoreBrowserService)],f)},2950:function(s,i,o){var a=this&&this.__decorate||function(_,l,h,d){var f,g=arguments.length,y=g<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,l,h,d);else for(var S=_.length-1;S>=0;S--)(f=_[S])&&(y=(g<3?f(y):g>3?f(l,h,y):f(l,h))||y);return g>3&&y&&Object.defineProperty(l,h,y),y},c=this&&this.__param||function(_,l){return function(h,d){l(h,d,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;let u=o(4725),p=o(2585),v=o(2584),C=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,l,h,d,f,g){this._textarea=_,this._compositionView=l,this._bufferService=h,this._optionsService=d,this._coreService=f,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){let l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;let l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){let _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let l=this._textarea.value,h=l.replace(_,"");this._dataAlreadySent=h,l.length>_.length?this._coreService.triggerDataEvent(h,!0):l.length<_.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):l.length===_.length&&l!==_&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,f=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=f+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let g=this._compositionView.getBoundingClientRect();this._textarea.style.left=f+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=C=a([c(2,p.IBufferService),c(3,p.IOptionsService),c(4,p.ICoreService),c(5,u.IRenderService)],C)},9806:(s,i)=>{function o(a,c,u){let p=u.getBoundingClientRect(),v=a.getComputedStyle(u),C=parseInt(v.getPropertyValue("padding-left")),_=parseInt(v.getPropertyValue("padding-top"));return[c.clientX-p.left-C,c.clientY-p.top-_]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(a,c,u,p,v,C,_,l,h){if(!C)return;let d=o(a,c,u);return d?(d[0]=Math.ceil((d[0]+(h?_/2:0))/_),d[1]=Math.ceil(d[1]/l),d[0]=Math.min(Math.max(d[0],1),p+(h?1:0)),d[1]=Math.min(Math.max(d[1],1),v),d):void 0}},9504:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;let a=o(2584);function c(l,h,d,f){let g=l-u(l,d),y=h-u(h,d),S=Math.abs(g-y)-function(D,m,w){let I=0,R=D-u(D,w),M=m-u(m,w);for(let A=0;A<Math.abs(R-M);A++){let N=p(D,m)==="A"?-1:1,F=w.buffer.lines.get(R+N*A);F?.isWrapped&&I++}return I}(l,h,d);return _(S,C(p(l,h),f))}function u(l,h){let d=0,f=h.buffer.lines.get(l),g=f?.isWrapped;for(;g&&l>=0&&l<h.rows;)d++,f=h.buffer.lines.get(--l),g=f?.isWrapped;return d}function p(l,h){return l>h?"A":"B"}function v(l,h,d,f,g,y){let S=l,D=h,m="";for(;S!==d||D!==f;)S+=g?1:-1,g&&S>y.cols-1?(m+=y.buffer.translateBufferLineToString(D,!1,l,S),S=0,l=0,D++):!g&&S<0&&(m+=y.buffer.translateBufferLineToString(D,!1,0,l+1),S=y.cols-1,l=S,D--);return m+y.buffer.translateBufferLineToString(D,!1,l,S)}function C(l,h){let d=h?"O":"[";return a.C0.ESC+d+l}function _(l,h){l=Math.floor(l);let d="";for(let f=0;f<l;f++)d+=h;return d}i.moveToCellSequence=function(l,h,d,f){let g=d.buffer.x,y=d.buffer.y;if(!d.buffer.hasScrollback)return function(m,w,I,R,M,A){return c(w,R,M,A).length===0?"":_(v(m,w,m,w-u(w,M),!1,M).length,C("D",A))}(g,y,0,h,d,f)+c(y,h,d,f)+function(m,w,I,R,M,A){let N;N=c(w,R,M,A).length>0?R-u(R,M):w;let F=R,j=function(B,E,T,x,k,H){let U;return U=c(T,x,k,H).length>0?x-u(x,k):E,B<T&&U<=x||B>=T&&U<x?"C":"D"}(m,w,I,R,M,A);return _(v(m,N,I,F,j==="C",M).length,C(j,A))}(g,y,l,h,d,f);let S;if(y===h)return S=g>l?"D":"C",_(Math.abs(g-l),C(S,f));S=y>h?"D":"C";let D=Math.abs(y-h);return _(function(m,w){return w.cols-m}(y>h?l:g,d)+(D-1)*d.cols+1+((y>h?g:l)-1),C(S,f))}},1296:function(s,i,o){var a=this&&this.__decorate||function(M,A,N,F){var j,B=arguments.length,E=B<3?A:F===null?F=Object.getOwnPropertyDescriptor(A,N):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(M,A,N,F);else for(var T=M.length-1;T>=0;T--)(j=M[T])&&(E=(B<3?j(E):B>3?j(A,N,E):j(A,N))||E);return B>3&&E&&Object.defineProperty(A,N,E),E},c=this&&this.__param||function(M,A){return function(N,F){A(N,F,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;let u=o(3787),p=o(2550),v=o(2223),C=o(6171),_=o(4725),l=o(8055),h=o(8460),d=o(844),f=o(2585),g="xterm-dom-renderer-owner-",y="xterm-rows",S="xterm-fg-",D="xterm-bg-",m="xterm-focus",w="xterm-selection",I=1,R=i.DomRenderer=class extends d.Disposable{constructor(M,A,N,F,j,B,E,T,x,k){super(),this._element=M,this._screenElement=A,this._viewportElement=N,this._linkifier2=F,this._charSizeService=B,this._optionsService=E,this._bufferService=T,this._coreBrowserService=x,this._themeService=k,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=j.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,d.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let M=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*M,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*M),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/M),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/M),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let A=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(M){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${y} { color: ${M.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${y} .xterm-dim { color: ${l.color.multiplyOpacity(M.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${M.cursor.css};  color: ${M.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${M.cursor.css}; }}`,A+=`${this._terminalSelector} .${y}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${M.cursor.css}; color: ${M.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${M.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${M.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${M.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${M.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${M.selectionInactiveBackgroundOpaque.css};}`;for(let[N,F]of M.ansi.entries())A+=`${this._terminalSelector} .${S}${N} { color: ${F.css}; }${this._terminalSelector} .${S}${N}.xterm-dim { color: ${l.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${N} { background-color: ${F.css}; }`;A+=`${this._terminalSelector} .${S}${v.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(M.background).css}; }${this._terminalSelector} .${S}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(M.background),.5).css}; }${this._terminalSelector} .${D}${v.INVERTED_DEFAULT_COLOR} { background-color: ${M.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){let M=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${M}px`,this._rowFactory.defaultSpacing=M}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(M,A){for(let N=this._rowElements.length;N<=A;N++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(M,A){this._refreshRowElements(M,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(M,A,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(M,A,N),this.renderRows(0,this._bufferService.rows-1),!M||!A)return;let F=M[1]-this._bufferService.buffer.ydisp,j=A[1]-this._bufferService.buffer.ydisp,B=Math.max(F,0),E=Math.min(j,this._bufferService.rows-1);if(B>=this._bufferService.rows||E<0)return;let T=document.createDocumentFragment();if(N){let x=M[0]>A[0];T.appendChild(this._createSelectionElement(B,x?A[0]:M[0],x?M[0]:A[0],E-B+1))}else{let x=F===B?M[0]:0,k=B===j?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(B,x,k));let H=E-B-1;if(T.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,H)),B!==E){let U=j===E?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(E,0,U))}}this._selectionContainer.appendChild(T)}_createSelectionElement(M,A,N,F=1){let j=document.createElement("div");return j.style.height=F*this.dimensions.css.cell.height+"px",j.style.top=M*this.dimensions.css.cell.height+"px",j.style.left=A*this.dimensions.css.cell.width+"px",j.style.width=this.dimensions.css.cell.width*(N-A)+"px",j}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let M of this._rowElements)M.replaceChildren()}renderRows(M,A){let N=this._bufferService.buffer,F=N.ybase+N.y,j=Math.min(N.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=M;x<=A;x++){let k=x+N.ydisp,H=this._rowElements[x],U=N.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===F,E,T,j,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!0)}_handleLinkLeave(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!1)}_setCellUnderline(M,A,N,F,j,B){N<0&&(M=0),F<0&&(A=0);let E=this._bufferService.rows-1;N=Math.max(Math.min(N,E),0),F=Math.max(Math.min(F,E),0),j=Math.min(j,this._bufferService.cols);let T=this._bufferService.buffer,x=T.ybase+T.y,k=Math.min(T.x,j-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=N;W<=F;++W){let ge=W+T.ydisp,b=this._rowElements[W],O=T.lines.get(ge);if(!b||!O)break;b.replaceChildren(...this._rowFactory.createRow(O,ge,ge===x,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,B?W===N?M:0:-1,B?(W===F?A:j)-1:-1))}}};i.DomRenderer=R=a([c(4,f.IInstantiationService),c(5,_.ICharSizeService),c(6,f.IOptionsService),c(7,f.IBufferService),c(8,_.ICoreBrowserService),c(9,_.IThemeService)],R)},3787:function(s,i,o){var a=this&&this.__decorate||function(S,D,m,w){var I,R=arguments.length,M=R<3?D:w===null?w=Object.getOwnPropertyDescriptor(D,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,D,m,w);else for(var A=S.length-1;A>=0;A--)(I=S[A])&&(M=(R<3?I(M):R>3?I(D,m,M):I(D,m))||M);return R>3&&M&&Object.defineProperty(D,m,M),M},c=this&&this.__param||function(S,D){return function(m,w){D(m,w,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;let u=o(2223),p=o(643),v=o(511),C=o(2585),_=o(8055),l=o(4725),h=o(4269),d=o(6171),f=o(3734),g=i.DomRendererRowFactory=class{constructor(S,D,m,w,I,R,M){this._document=S,this._characterJoinerService=D,this._optionsService=m,this._coreBrowserService=w,this._coreService=I,this._decorationService=R,this._themeService=M,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,m){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=m}createRow(S,D,m,w,I,R,M,A,N,F,j){let B=[],E=this._characterJoinerService.getJoinedCharacters(D),T=this._themeService.colors,x,k=S.getNoBgTrimmedLength();m&&k<R+1&&(k=R+1);let H=0,U="",q=0,W=0,ge=0,b=!1,O=0,P=!1,L=0,J=[],V=F!==-1&&j!==-1;for(let de=0;de<k;de++){S.loadCell(de,this._workCell);let De=this._workCell.getWidth();if(De===0)continue;let ke=!1,Jt=de,ne=this._workCell;if(E.length>0&&de===E[0][0]){ke=!0;let me=E.shift();ne=new h.JoinedCellData(this._workCell,S.translateToString(!0,me[0],me[1]),me[1]-me[0]),Jt=me[1]-1,De=ne.getWidth()}let zn=this._isCellInSelection(de,D),Ms=m&&de===R,Ts=V&&de>=F&&de<=j,xs=!1;this._decorationService.forEachDecorationAtCell(de,D,void 0,me=>{xs=!0});let Ur=ne.getChars()||p.WHITESPACE_CELL_CHAR;if(Ur===" "&&(ne.isUnderline()||ne.isOverline())&&(Ur="\xA0"),L=De*A-N.get(Ur,ne.isBold(),ne.isItalic()),x){if(H&&(zn&&P||!zn&&!P&&ne.bg===q)&&(zn&&P&&T.selectionForeground||ne.fg===W)&&ne.extended.ext===ge&&Ts===b&&L===O&&!Ms&&!ke&&!xs){U+=Ur,H++;continue}H&&(x.textContent=U),x=this._document.createElement("span"),H=0,U=""}else x=this._document.createElement("span");if(q=ne.bg,W=ne.fg,ge=ne.extended.ext,b=Ts,O=L,P=zn,ke&&R>=de&&R<=Jt&&(R=de),!this._coreService.isCursorHidden&&Ms){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)M&&J.push("xterm-cursor-blink"),J.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(ne.isBold()&&J.push("xterm-bold"),ne.isItalic()&&J.push("xterm-italic"),ne.isDim()&&J.push("xterm-dim"),U=ne.isInvisible()?p.WHITESPACE_CELL_CHAR:ne.getChars()||p.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(J.push(`xterm-underline-${ne.extended.underlineStyle}`),U===" "&&(U="\xA0"),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let me=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&me<8&&(me+=8),x.style.textDecorationColor=T.ansi[me].css}ne.isOverline()&&(J.push("xterm-overline"),U===" "&&(U="\xA0")),ne.isStrikethrough()&&J.push("xterm-strikethrough"),Ts&&(x.style.textDecoration="underline");let Ve=ne.getFgColor(),Wn=ne.getFgColorMode(),st=ne.getBgColor(),qn=ne.getBgColorMode(),As=!!ne.isInverse();if(As){let me=Ve;Ve=st,st=me;let Nf=Wn;Wn=qn,qn=Nf}let wt,Rs,Dt,Gn=!1;switch(this._decorationService.forEachDecorationAtCell(de,D,void 0,me=>{me.options.layer!=="top"&&Gn||(me.backgroundColorRGB&&(qn=50331648,st=me.backgroundColorRGB.rgba>>8&16777215,wt=me.backgroundColorRGB),me.foregroundColorRGB&&(Wn=50331648,Ve=me.foregroundColorRGB.rgba>>8&16777215,Rs=me.foregroundColorRGB),Gn=me.options.layer==="top")}),!Gn&&zn&&(wt=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,st=wt.rgba>>8&16777215,qn=50331648,Gn=!0,T.selectionForeground&&(Wn=50331648,Ve=T.selectionForeground.rgba>>8&16777215,Rs=T.selectionForeground)),Gn&&J.push("xterm-decoration-top"),qn){case 16777216:case 33554432:Dt=T.ansi[st],J.push(`xterm-bg-${st}`);break;case 50331648:Dt=_.rgba.toColor(st>>16,st>>8&255,255&st),this._addStyle(x,`background-color:#${y((st>>>0).toString(16),"0",6)}`);break;default:As?(Dt=T.foreground,J.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):Dt=T.background}switch(wt||ne.isDim()&&(wt=_.color.multiplyOpacity(Dt,.5)),Wn){case 16777216:case 33554432:ne.isBold()&&Ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ve+=8),this._applyMinimumContrast(x,Dt,T.ansi[Ve],ne,wt,void 0)||J.push(`xterm-fg-${Ve}`);break;case 50331648:let me=_.rgba.toColor(Ve>>16&255,Ve>>8&255,255&Ve);this._applyMinimumContrast(x,Dt,me,ne,wt,Rs)||this._addStyle(x,`color:#${y(Ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,Dt,T.foreground,ne,wt,void 0)||As&&J.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}J.length&&(x.className=J.join(" "),J.length=0),Ms||ke||xs?x.textContent=U:H++,L!==this.defaultSpacing&&(x.style.letterSpacing=`${L}px`),B.push(x),de=Jt}return x&&H&&(x.textContent=U),B}_applyMinimumContrast(S,D,m,w,I,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.excludeFromContrastRatioDemands)(w.getCode()))return!1;let M=this._getContrastCache(w),A;if(I||R||(A=M.getColor(D.rgba,m.rgba)),A===void 0){let N=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);A=_.color.ensureContrastRatio(I||D,R||m,N),M.setColor((I||D).rgba,(R||m).rgba,A??null)}return!!A&&(this._addStyle(S,`color:${A.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let m=this._selectionStart,w=this._selectionEnd;return!(!m||!w)&&(this._columnSelectMode?m[0]<=w[0]?S>=m[0]&&D>=m[1]&&S<w[0]&&D<=w[1]:S<m[0]&&D>=m[1]&&S>=w[0]&&D<=w[1]:D>m[1]&&D<w[1]||m[1]===w[1]&&D===m[1]&&S>=m[0]&&S<w[0]||m[1]<w[1]&&D===w[1]&&S<w[0]||m[1]<w[1]&&D===m[1]&&S>=m[0])}};function y(S,D,m){for(;S.length<m;)S=D+S;return S}i.DomRendererRowFactory=g=a([c(1,l.ICharacterJoinerService),c(2,C.IOptionsService),c(3,l.ICoreBrowserService),c(4,C.ICoreService),c(5,C.IDecorationService),c(6,l.IThemeService)],g)},2550:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let a=o.createElement("span"),c=o.createElement("span");c.style.fontWeight="bold";let u=o.createElement("span");u.style.fontStyle="italic";let p=o.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[a,c,u,p],this._container.appendChild(a),this._container.appendChild(c),this._container.appendChild(u),this._container.appendChild(p),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,c,u){o===this._font&&a===this._fontSize&&c===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=a,this._weight=c,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${c}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${c}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,a,c){let u=0;if(!a&&!c&&o.length===1&&(u=o.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(o,0);let p=o;a&&(p+="B"),c&&(p+="I");let v=this._holey.get(p);if(v===void 0){let C=0;a&&(C|=1),c&&(C|=2),v=this._measure(o,C),this._holey.set(p,v)}return v}_measure(o,a){let c=this._measureElements[a];return c.textContent=o.repeat(32),c.offsetWidth/32}}},2223:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(s,i)=>{function o(a){return 57508<=a&&a<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(a){if(!a)throw new Error("value must not be falsy");return a},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(a){return 57520<=a&&a<=57527},i.excludeFromContrastRatioDemands=function(a){return o(a)||function(c){return 9472<=c&&c<=9631}(a)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(s,i,o){var a=this&&this.__decorate||function(l,h,d,f){var g,y=arguments.length,S=y<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,h,d,f);else for(var D=l.length-1;D>=0;D--)(g=l[D])&&(S=(y<3?g(S):y>3?g(h,d,S):g(h,d))||S);return y>3&&S&&Object.defineProperty(h,d,S),S},c=this&&this.__param||function(l,h){return function(d,f){h(d,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;let u=o(2585),p=o(8460),v=o(844),C=i.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,h,d){super(),this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new _(l,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=C=a([c(2,u.IOptionsService)],C);class _{constructor(h,d,f){this._document=h,this._parentElement=d,this._optionsService=f,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(s,i,o){var a=this&&this.__decorate||function(h,d,f,g){var y,S=arguments.length,D=S<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,d,f,g);else for(var m=h.length-1;m>=0;m--)(y=h[m])&&(D=(S<3?y(D):S>3?y(d,f,D):y(d,f))||D);return S>3&&D&&Object.defineProperty(d,f,D),D},c=this&&this.__param||function(h,d){return function(f,g){d(f,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;let u=o(3734),p=o(643),v=o(511),C=o(2585);class _ extends u.AttributeData{constructor(d,f,g){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=f,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=_;let l=i.CharacterJoinerService=class xf{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(d){let f={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(f),f.id}deregister(d){for(let f=0;f<this._characterJoiners.length;f++)if(this._characterJoiners[f].id===d)return this._characterJoiners.splice(f,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let f=this._bufferService.buffer.lines.get(d);if(!f||f.length===0)return[];let g=[],y=f.translateToString(!0),S=0,D=0,m=0,w=f.getFg(0),I=f.getBg(0);for(let R=0;R<f.getTrimmedLength();R++)if(f.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==I){if(R-S>1){let M=this._getJoinedRanges(y,m,D,f,S);for(let A=0;A<M.length;A++)g.push(M[A])}S=R,m=D,w=this._workCell.fg,I=this._workCell.bg}D+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let R=this._getJoinedRanges(y,m,D,f,S);for(let M=0;M<R.length;M++)g.push(R[M])}return g}_getJoinedRanges(d,f,g,y,S){let D=d.substring(f,g),m=[];try{m=this._characterJoiners[0].handler(D)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let I=this._characterJoiners[w].handler(D);for(let R=0;R<I.length;R++)xf._mergeRanges(m,I[R])}catch(I){console.error(I)}return this._stringRangesToCellRanges(m,y,S),m}_stringRangesToCellRanges(d,f,g){let y=0,S=!1,D=0,m=d[y];if(m){for(let w=g;w<this._bufferService.cols;w++){let I=f.getWidth(w),R=f.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!S&&m[0]<=D&&(m[0]=w,S=!0),m[1]<=D){if(m[1]=w,m=d[++y],!m)break;m[0]<=D?(m[0]=w,S=!0):S=!1}D+=R}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(d,f){let g=!1;for(let y=0;y<d.length;y++){let S=d[y];if(g){if(f[1]<=S[0])return d[y-1][1]=f[1],d;if(f[1]<=S[1])return d[y-1][1]=Math.max(f[1],S[1]),d.splice(y,1),d;d.splice(y,1),y--}else{if(f[1]<=S[0])return d.splice(y,0,f),d;if(f[1]<=S[1])return S[0]=Math.min(f[0],S[0]),d;f[0]<S[1]&&(S[0]=Math.min(f[0],S[0]),g=!0)}}return g?d[d.length-1][1]=f[1]:d.push(f),d}};i.CharacterJoinerService=l=a([c(0,C.IBufferService)],l)},5114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(o,a){this._textarea=o,this.window=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(s,i,o){var a=this&&this.__decorate||function(C,_,l,h){var d,f=arguments.length,g=f<3?_:h===null?h=Object.getOwnPropertyDescriptor(_,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(C,_,l,h);else for(var y=C.length-1;y>=0;y--)(d=C[y])&&(g=(f<3?d(g):f>3?d(_,l,g):d(_,l))||g);return f>3&&g&&Object.defineProperty(_,l,g),g},c=this&&this.__param||function(C,_){return function(l,h){_(l,h,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;let u=o(4725),p=o(9806),v=i.MouseService=class{constructor(C,_){this._renderService=C,this._charSizeService=_}getCoords(C,_,l,h,d){return(0,p.getCoords)(window,C,_,l,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(C,_){let l=(0,p.getCoordsRelativeToElement)(window,C,_);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};i.MouseService=v=a([c(0,u.IRenderService),c(1,u.ICharSizeService)],v)},3230:function(s,i,o){var a=this&&this.__decorate||function(g,y,S,D){var m,w=arguments.length,I=w<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(g,y,S,D);else for(var R=g.length-1;R>=0;R--)(m=g[R])&&(I=(w<3?m(I):w>3?m(y,S,I):m(y,S))||I);return w>3&&I&&Object.defineProperty(y,S,I),I},c=this&&this.__param||function(g,y){return function(S,D){y(S,D,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;let u=o(3656),p=o(6193),v=o(5596),C=o(4725),_=o(8460),l=o(844),h=o(7226),d=o(2585),f=i.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,y,S,D,m,w,I,R){if(super(),this._rowCount=g,this._charSizeService=D,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(I.window,(M,A)=>this._renderRows(M,A)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var M;return(M=this._renderer.value)===null||M===void 0?void 0:M.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(I.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in I.window){let M=new I.window.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});M.observe(y),this.register({dispose:()=>M.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,y,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,y,this._rowCount))}_renderRows(g,y){this._renderer.value&&(g=Math.min(g,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(g,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:y}),this._onRender.fire({start:g,end:y}),this._isNextRenderRedrawOnly=!0)}resize(g,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,y;this._renderer.value&&((y=(g=this._renderer.value).clearTextureAtlas)===null||y===void 0||y.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,y)):this._renderer.value.handleResize(g,y),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,y,S){var D;this._selectionState.start=g,this._selectionState.end=y,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(g,y,S)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};i.RenderService=f=a([c(2,d.IOptionsService),c(3,C.ICharSizeService),c(4,d.IDecorationService),c(5,d.IBufferService),c(6,C.ICoreBrowserService),c(7,C.IThemeService)],f)},9312:function(s,i,o){var a=this&&this.__decorate||function(m,w,I,R){var M,A=arguments.length,N=A<3?w:R===null?R=Object.getOwnPropertyDescriptor(w,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(m,w,I,R);else for(var F=m.length-1;F>=0;F--)(M=m[F])&&(N=(A<3?M(N):A>3?M(w,I,N):M(w,I))||N);return A>3&&N&&Object.defineProperty(w,I,N),N},c=this&&this.__param||function(m,w){return function(I,R){w(I,R,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;let u=o(9806),p=o(9504),v=o(456),C=o(4725),_=o(8460),l=o(844),h=o(6114),d=o(4841),f=o(511),g=o(2585),y="\xA0",S=new RegExp(y,"g"),D=i.SelectionService=class extends l.Disposable{constructor(m,w,I,R,M,A,N,F,j){super(),this._element=m,this._screenElement=w,this._linkifier=I,this._bufferService=R,this._coreService=M,this._mouseService=A,this._optionsService=N,this._renderService=F,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=B=>this._handleMouseMove(B),this._mouseUpListener=B=>this._handleMouseUp(B),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(B=>this._handleTrim(B)),this.register(this._bufferService.buffers.onBufferActivate(B=>this._handleBufferActivate(B))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let m=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!m||!w||m[0]===w[0]&&m[1]===w[1])}get selectionText(){let m=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!m||!w)return"";let I=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(m[0]===w[0])return"";let M=m[0]<w[0]?m[0]:w[0],A=m[0]<w[0]?w[0]:m[0];for(let N=m[1];N<=w[1];N++){let F=I.translateBufferLineToString(N,!0,M,A);R.push(F)}}else{let M=m[1]===w[1]?w[0]:void 0;R.push(I.translateBufferLineToString(m[1],!0,m[0],M));for(let A=m[1]+1;A<=w[1]-1;A++){let N=I.lines.get(A),F=I.translateBufferLineToString(A,!0);N?.isWrapped?R[R.length-1]+=F:R.push(F)}if(m[1]!==w[1]){let A=I.lines.get(w[1]),N=I.translateBufferLineToString(w[1],!0,0,w[0]);A&&A.isWrapped?R[R.length-1]+=N:R.push(N)}}return R.map(M=>M.replace(S," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){let w=this._getMouseBufferCoords(m),I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(I&&R&&w)&&this._areCoordsInSelection(w,I,R)}isCellInSelection(m,w){let I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!I||!R)&&this._areCoordsInSelection([m,w],I,R)}_areCoordsInSelection(m,w,I){return m[1]>w[1]&&m[1]<I[1]||w[1]===I[1]&&m[1]===w[1]&&m[0]>=w[0]&&m[0]<I[0]||w[1]<I[1]&&m[1]===I[1]&&m[0]<I[0]||w[1]<I[1]&&m[1]===w[1]&&m[0]>=w[0]}_selectWordAtCursor(m,w){var I,R;let M=(R=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||R===void 0?void 0:R.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let A=this._getMouseBufferCoords(m);return!!A&&(this._selectWordAt(A,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,w){this._model.clearSelection(),m=Math.max(m,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){let w=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(m){let w=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1],I=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=I?0:(w>I&&(w-=I),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(m){return h.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){let w=this._getMouseBufferCoords(m);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(m){return m.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){let R=I.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){let w=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let I=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){let R=(0,p.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let m=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,I=!(!m||!w||m[0]===w[0]&&m[1]===w[1]);I?m&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,w,I)):this._oldHasSelection&&this._fireOnSelectionChange(m,w,I)}_fireOnSelectionChange(m,w,I){this._oldSelectionStart=m,this._oldSelectionEnd=w,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(m,w){let I=w;for(let R=0;w>=R;R++){let M=m.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:M>1&&w!==R&&(I+=M-1)}return I}setSelection(m,w,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,w],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,w,I=!0,R=!0){if(m[0]>=this._bufferService.cols)return;let M=this._bufferService.buffer,A=M.lines.get(m[1]);if(!A)return;let N=M.translateBufferLineToString(m[1],!1),F=this._convertViewportColToCharacterIndex(A,m[0]),j=F,B=m[0]-F,E=0,T=0,x=0,k=0;if(N.charAt(F)===" "){for(;F>0&&N.charAt(F-1)===" ";)F--;for(;j<N.length&&N.charAt(j+1)===" ";)j++}else{let q=m[0],W=m[0];A.getWidth(q)===0&&(E++,q--),A.getWidth(W)===2&&(T++,W++);let ge=A.getString(W).length;for(ge>1&&(k+=ge-1,j+=ge-1);q>0&&F>0&&!this._isCharWordSeparator(A.loadCell(q-1,this._workCell));){A.loadCell(q-1,this._workCell);let b=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,q--):b>1&&(x+=b-1,F-=b-1),F--,q--}for(;W<A.length&&j+1<N.length&&!this._isCharWordSeparator(A.loadCell(W+1,this._workCell));){A.loadCell(W+1,this._workCell);let b=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,W++):b>1&&(k+=b-1,j+=b-1),j++,W++}}j++;let H=F+B-E+x,U=Math.min(this._bufferService.cols,j-F+E+T-x-k);if(w||N.slice(F,j).trim()!==""){if(I&&H===0&&A.getCodePoint(0)!==32){let q=M.lines.get(m[1]-1);if(q&&A.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let W=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(W){let ge=this._bufferService.cols-W.start;H-=ge,U+=ge}}}if(R&&H+U===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){let q=M.lines.get(m[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let W=this._getWordAt([0,m[1]+1],!1,!1,!0);W&&(U+=W.length)}}return{start:H,length:U}}}_selectWordAt(m,w){let I=this._getWordAt(m,w);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[I.start,m[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(m){let w=this._getWordAt(m,!0);if(w){let I=m[1];for(;w.start<0;)w.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,I]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){let w=this._bufferService.buffer.getWrappedRangeForLine(m),I={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(I,this._bufferService.cols)}};i.SelectionService=D=a([c(3,g.IBufferService),c(4,g.ICoreService),c(5,C.IMouseService),c(6,g.IOptionsService),c(7,C.IRenderService),c(8,C.ICoreBrowserService)],D)},4725:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;let a=o(8343);i.ICharSizeService=(0,a.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),i.IMouseService=(0,a.createDecorator)("MouseService"),i.IRenderService=(0,a.createDecorator)("RenderService"),i.ISelectionService=(0,a.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,a.createDecorator)("ThemeService")},6731:function(s,i,o){var a=this&&this.__decorate||function(D,m,w,I){var R,M=arguments.length,A=M<3?m:I===null?I=Object.getOwnPropertyDescriptor(m,w):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(D,m,w,I);else for(var N=D.length-1;N>=0;N--)(R=D[N])&&(A=(M<3?R(A):M>3?R(m,w,A):R(m,w))||A);return M>3&&A&&Object.defineProperty(m,w,A),A},c=this&&this.__param||function(D,m){return function(w,I){m(w,I,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;let u=o(7239),p=o(8055),v=o(8460),C=o(844),_=o(2585),l=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),d=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let w=0;w<216;w++){let I=m[w/36%6|0],R=m[w/6%6|0],M=m[w%6];D.push({css:p.channels.toCss(I,R,M),rgba:p.channels.toRgba(I,R,M)})}for(let w=0;w<24;w++){let I=8+10*w;D.push({css:p.channels.toCss(I,I,I),rgba:p.channels.toRgba(I,I,I)})}return D})());let y=i.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:h,cursor:d,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:p.color.blend(h,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:p.color.blend(h,g),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let m=this._colors;if(m.foreground=S(D.foreground,l),m.background=S(D.background,h),m.cursor=S(D.cursor,d),m.cursorAccent=S(D.cursorAccent,f),m.selectionBackgroundTransparent=S(D.selectionBackground,g),m.selectionBackgroundOpaque=p.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=p.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=D.selectionForeground?S(D.selectionForeground,p.NULL_COLOR):void 0,m.selectionForeground===p.NULL_COLOR&&(m.selectionForeground=void 0),p.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=p.color.opacity(m.selectionBackgroundTransparent,.3)),p.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=p.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=i.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=S(D.black,i.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=S(D.red,i.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=S(D.green,i.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=S(D.yellow,i.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=S(D.blue,i.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=S(D.magenta,i.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=S(D.cyan,i.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=S(D.white,i.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=S(D.brightBlack,i.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=S(D.brightRed,i.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=S(D.brightGreen,i.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=S(D.brightYellow,i.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=S(D.brightBlue,i.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=S(D.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=S(D.brightCyan,i.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=S(D.brightWhite,i.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let w=Math.min(m.ansi.length-16,D.extendedAnsi.length);for(let I=0;I<w;I++)m.ansi[I+16]=S(D.extendedAnsi[I],i.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,m){if(D!==void 0)try{return p.css.toColor(D)}catch{}return m}i.ThemeService=y=a([c(0,_.IOptionsService)],y)},6349:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;let a=o(8460),c=o(844);class u extends c.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;let C=new Array(v);for(let _=0;_<Math.min(v,this.length);_++)C[_]=this._array[this._getCyclicIndex(_)];this._array=C,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let C=this._length;C<v;C++)this._array[C]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,C){this._array[this._getCyclicIndex(v)]=C}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,C,..._){if(C){for(let l=v;l<this._length-C;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+C)];this._length-=C,this.onDeleteEmitter.fire({index:v,amount:C})}for(let l=this._length-1;l>=v;l--)this._array[this._getCyclicIndex(l+_.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<_.length;l++)this._array[this._getCyclicIndex(v+l)]=_[l];if(_.length&&this.onInsertEmitter.fire({index:v,amount:_.length}),this._length+_.length>this._maxLength){let l=this._length+_.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=_.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,C,_){if(!(C<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let h=C-1;h>=0;h--)this.set(v+h+_,this.get(v+h));let l=v+C+_-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<C;l++)this.set(v+l+_,this.get(v+l))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}i.CircularList=u},1439:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(a,c=5){if(typeof a!="object")return a;let u=Array.isArray(a)?[]:{};for(let p in a)u[p]=c<=1?a[p]:a[p]&&o(a[p],c-1);return u}},8055:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let a=o(6114),c=0,u=0,p=0,v=0;var C,_,l,h,d;function f(y){let S=y.toString(16);return S.length<2?"0"+S:S}function g(y,S){return y<S?(S+.05)/(y+.05):(y+.05)/(S+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(S,D,m,w){return w!==void 0?`#${f(S)}${f(D)}${f(m)}${f(w)}`:`#${f(S)}${f(D)}${f(m)}`},y.toRgba=function(S,D,m,w=255){return(S<<24|D<<16|m<<8|w)>>>0}}(C||(i.channels=C={})),function(y){function S(D,m){return v=Math.round(255*m),[c,u,p]=d.toChannels(D.rgba),{css:C.toCss(c,u,p,v),rgba:C.toRgba(c,u,p,v)}}y.blend=function(D,m){if(v=(255&m.rgba)/255,v===1)return{css:m.css,rgba:m.rgba};let w=m.rgba>>24&255,I=m.rgba>>16&255,R=m.rgba>>8&255,M=D.rgba>>24&255,A=D.rgba>>16&255,N=D.rgba>>8&255;return c=M+Math.round((w-M)*v),u=A+Math.round((I-A)*v),p=N+Math.round((R-N)*v),{css:C.toCss(c,u,p),rgba:C.toRgba(c,u,p)}},y.isOpaque=function(D){return(255&D.rgba)==255},y.ensureContrastRatio=function(D,m,w){let I=d.ensureContrastRatio(D.rgba,m.rgba,w);if(I)return d.toColor(I>>24&255,I>>16&255,I>>8&255)},y.opaque=function(D){let m=(255|D.rgba)>>>0;return[c,u,p]=d.toChannels(m),{css:C.toCss(c,u,p),rgba:m}},y.opacity=S,y.multiplyOpacity=function(D,m){return v=255&D.rgba,S(D,v*m/255)},y.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(_||(i.color=_={})),function(y){let S,D;if(!a.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let w=m.getContext("2d",{willReadFrequently:!0});w&&(S=w,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}y.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return c=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),p=parseInt(m.slice(3,4).repeat(2),16),d.toColor(c,u,p);case 5:return c=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),p=parseInt(m.slice(3,4).repeat(2),16),v=parseInt(m.slice(4,5).repeat(2),16),d.toColor(c,u,p,v);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let w=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return c=parseInt(w[1]),u=parseInt(w[2]),p=parseInt(w[3]),v=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),d.toColor(c,u,p,v);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=m,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[c,u,p,v]=S.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(c,u,p,v),css:m}}}(l||(i.css=l={})),function(y){function S(D,m,w){let I=D/255,R=m/255,M=w/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}y.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},y.relativeLuminance2=S}(h||(i.rgb=h={})),function(y){function S(m,w,I){let R=m>>24&255,M=m>>16&255,A=m>>8&255,N=w>>24&255,F=w>>16&255,j=w>>8&255,B=g(h.relativeLuminance2(N,F,j),h.relativeLuminance2(R,M,A));for(;B<I&&(N>0||F>0||j>0);)N-=Math.max(0,Math.ceil(.1*N)),F-=Math.max(0,Math.ceil(.1*F)),j-=Math.max(0,Math.ceil(.1*j)),B=g(h.relativeLuminance2(N,F,j),h.relativeLuminance2(R,M,A));return(N<<24|F<<16|j<<8|255)>>>0}function D(m,w,I){let R=m>>24&255,M=m>>16&255,A=m>>8&255,N=w>>24&255,F=w>>16&255,j=w>>8&255,B=g(h.relativeLuminance2(N,F,j),h.relativeLuminance2(R,M,A));for(;B<I&&(N<255||F<255||j<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),F=Math.min(255,F+Math.ceil(.1*(255-F))),j=Math.min(255,j+Math.ceil(.1*(255-j))),B=g(h.relativeLuminance2(N,F,j),h.relativeLuminance2(R,M,A));return(N<<24|F<<16|j<<8|255)>>>0}y.ensureContrastRatio=function(m,w,I){let R=h.relativeLuminance(m>>8),M=h.relativeLuminance(w>>8);if(g(R,M)<I){if(M<R){let F=S(m,w,I),j=g(R,h.relativeLuminance(F>>8));if(j<I){let B=D(m,w,I);return j>g(R,h.relativeLuminance(B>>8))?F:B}return F}let A=D(m,w,I),N=g(R,h.relativeLuminance(A>>8));if(N<I){let F=S(m,w,I);return N>g(R,h.relativeLuminance(F>>8))?A:F}return A}},y.reduceLuminance=S,y.increaseLuminance=D,y.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},y.toColor=function(m,w,I,R){return{css:C.toCss(m,w,I,R),rgba:C.toRgba(m,w,I,R)}}}(d||(i.rgba=d={})),i.toPaddedHex=f,i.contrastRatio=g},8969:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;let a=o(844),c=o(2585),u=o(4348),p=o(7866),v=o(744),C=o(7302),_=o(6975),l=o(8460),h=o(1753),d=o(1480),f=o(7994),g=o(9282),y=o(5435),S=o(5981),D=o(2660),m=!1;class w extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(R=>{var M;(M=this._onScrollApi)===null||M===void 0||M.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(let M in R)this.optionsService.options[M]=R[M]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new C.OptionsService(R)),this._instantiationService.setService(c.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(c.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(c.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(c.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(c.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(c.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(c.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(c.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((M,A)=>this._inputHandler.parse(M,A))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,M){this._writeBuffer.write(R,M)}writeSync(R,M){this._logService.logLevel<=c.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(R,M)}resize(R,M){isNaN(R)||isNaN(M)||(R=Math.max(R,v.MINIMUM_COLS),M=Math.max(M,v.MINIMUM_ROWS),this._bufferService.resize(R,M))}scroll(R,M=!1){this._bufferService.scroll(R,M)}scrollLines(R,M,A){this._bufferService.scrollLines(R,M,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){let M=R-this._bufferService.buffer.ydisp;M!==0&&this.scrollLines(M)}registerEscHandler(R,M){return this._inputHandler.registerEscHandler(R,M)}registerDcsHandler(R,M){return this._inputHandler.registerDcsHandler(R,M)}registerCsiHandler(R,M){return this._inputHandler.registerCsiHandler(R,M)}registerOscHandler(R,M){return this._inputHandler.registerOscHandler(R,M)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1,M=this.optionsService.rawOptions.windowsPty;M&&M.buildNumber!==void 0&&M.buildNumber!==void 0?R=M.backend==="conpty"&&M.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let R=[];R.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let M of R)M.dispose()})}}}i.CoreTerminal=w},8460:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let c=[];for(let u=0;u<this._listeners.length;u++)c.push(this._listeners[u]);for(let u=0;u<c.length;u++)c[u].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(c=>a.fire(c))}},5435:function(s,i,o){var a=this&&this.__decorate||function(B,E,T,x){var k,H=arguments.length,U=H<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,T):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(B,E,T,x);else for(var q=B.length-1;q>=0;q--)(k=B[q])&&(U=(H<3?k(U):H>3?k(E,T,U):k(E,T))||U);return H>3&&U&&Object.defineProperty(E,T,U),U},c=this&&this.__param||function(B,E){return function(T,x){E(T,x,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;let u=o(2584),p=o(7116),v=o(2015),C=o(844),_=o(482),l=o(8437),h=o(8460),d=o(643),f=o(511),g=o(3734),y=o(2585),S=o(6242),D=o(6351),m=o(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function R(B,E){if(B>24)return E.setWinLines||!1;switch(B){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var M;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(M||(i.WindowsOptionsReportType=M={}));let A=0;class N extends C.Disposable{getAttrData(){return this._curAttrData}constructor(E,T,x,k,H,U,q,W,ge=new v.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=T,this._coreService=x,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=W,this._parser=ge,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._parser.setCsiHandlerFallback((b,O)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(b),params:O.toArray()})}),this._parser.setEscHandlerFallback(b=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(b)})}),this._parser.setExecuteHandlerFallback(b=>{this._logService.debug("Unknown EXECUTE code: ",{code:b})}),this._parser.setOscHandlerFallback((b,O,P)=>{this._logService.debug("Unknown OSC code: ",{identifier:b,action:O,data:P})}),this._parser.setDcsHandlerFallback((b,O,P)=>{O==="HOOK"&&(P=P.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(b),action:O,payload:P})}),this._parser.setPrintHandler((b,O,P)=>this.print(b,O,P)),this._parser.registerCsiHandler({final:"@"},b=>this.insertChars(b)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},b=>this.scrollLeft(b)),this._parser.registerCsiHandler({final:"A"},b=>this.cursorUp(b)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},b=>this.scrollRight(b)),this._parser.registerCsiHandler({final:"B"},b=>this.cursorDown(b)),this._parser.registerCsiHandler({final:"C"},b=>this.cursorForward(b)),this._parser.registerCsiHandler({final:"D"},b=>this.cursorBackward(b)),this._parser.registerCsiHandler({final:"E"},b=>this.cursorNextLine(b)),this._parser.registerCsiHandler({final:"F"},b=>this.cursorPrecedingLine(b)),this._parser.registerCsiHandler({final:"G"},b=>this.cursorCharAbsolute(b)),this._parser.registerCsiHandler({final:"H"},b=>this.cursorPosition(b)),this._parser.registerCsiHandler({final:"I"},b=>this.cursorForwardTab(b)),this._parser.registerCsiHandler({final:"J"},b=>this.eraseInDisplay(b,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},b=>this.eraseInDisplay(b,!0)),this._parser.registerCsiHandler({final:"K"},b=>this.eraseInLine(b,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},b=>this.eraseInLine(b,!0)),this._parser.registerCsiHandler({final:"L"},b=>this.insertLines(b)),this._parser.registerCsiHandler({final:"M"},b=>this.deleteLines(b)),this._parser.registerCsiHandler({final:"P"},b=>this.deleteChars(b)),this._parser.registerCsiHandler({final:"S"},b=>this.scrollUp(b)),this._parser.registerCsiHandler({final:"T"},b=>this.scrollDown(b)),this._parser.registerCsiHandler({final:"X"},b=>this.eraseChars(b)),this._parser.registerCsiHandler({final:"Z"},b=>this.cursorBackwardTab(b)),this._parser.registerCsiHandler({final:"`"},b=>this.charPosAbsolute(b)),this._parser.registerCsiHandler({final:"a"},b=>this.hPositionRelative(b)),this._parser.registerCsiHandler({final:"b"},b=>this.repeatPrecedingCharacter(b)),this._parser.registerCsiHandler({final:"c"},b=>this.sendDeviceAttributesPrimary(b)),this._parser.registerCsiHandler({prefix:">",final:"c"},b=>this.sendDeviceAttributesSecondary(b)),this._parser.registerCsiHandler({final:"d"},b=>this.linePosAbsolute(b)),this._parser.registerCsiHandler({final:"e"},b=>this.vPositionRelative(b)),this._parser.registerCsiHandler({final:"f"},b=>this.hVPosition(b)),this._parser.registerCsiHandler({final:"g"},b=>this.tabClear(b)),this._parser.registerCsiHandler({final:"h"},b=>this.setMode(b)),this._parser.registerCsiHandler({prefix:"?",final:"h"},b=>this.setModePrivate(b)),this._parser.registerCsiHandler({final:"l"},b=>this.resetMode(b)),this._parser.registerCsiHandler({prefix:"?",final:"l"},b=>this.resetModePrivate(b)),this._parser.registerCsiHandler({final:"m"},b=>this.charAttributes(b)),this._parser.registerCsiHandler({final:"n"},b=>this.deviceStatus(b)),this._parser.registerCsiHandler({prefix:"?",final:"n"},b=>this.deviceStatusPrivate(b)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},b=>this.softReset(b)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},b=>this.setCursorStyle(b)),this._parser.registerCsiHandler({final:"r"},b=>this.setScrollRegion(b)),this._parser.registerCsiHandler({final:"s"},b=>this.saveCursor(b)),this._parser.registerCsiHandler({final:"t"},b=>this.windowOptions(b)),this._parser.registerCsiHandler({final:"u"},b=>this.restoreCursor(b)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},b=>this.insertColumns(b)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},b=>this.deleteColumns(b)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},b=>this.selectProtected(b)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},b=>this.requestMode(b,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},b=>this.requestMode(b,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(b=>(this.setTitle(b),this.setIconName(b),!0))),this._parser.registerOscHandler(1,new S.OscHandler(b=>this.setIconName(b))),this._parser.registerOscHandler(2,new S.OscHandler(b=>this.setTitle(b))),this._parser.registerOscHandler(4,new S.OscHandler(b=>this.setOrReportIndexedColor(b))),this._parser.registerOscHandler(8,new S.OscHandler(b=>this.setHyperlink(b))),this._parser.registerOscHandler(10,new S.OscHandler(b=>this.setOrReportFgColor(b))),this._parser.registerOscHandler(11,new S.OscHandler(b=>this.setOrReportBgColor(b))),this._parser.registerOscHandler(12,new S.OscHandler(b=>this.setOrReportCursorColor(b))),this._parser.registerOscHandler(104,new S.OscHandler(b=>this.restoreIndexedColor(b))),this._parser.registerOscHandler(110,new S.OscHandler(b=>this.restoreFgColor(b))),this._parser.registerOscHandler(111,new S.OscHandler(b=>this.restoreBgColor(b))),this._parser.registerOscHandler(112,new S.OscHandler(b=>this.restoreCursorColor(b))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let b in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:b},()=>this.selectCharset("("+b)),this._parser.registerEscHandler({intermediates:")",final:b},()=>this.selectCharset(")"+b)),this._parser.registerEscHandler({intermediates:"*",final:b},()=>this.selectCharset("*"+b)),this._parser.registerEscHandler({intermediates:"+",final:b},()=>this.selectCharset("+"+b)),this._parser.registerEscHandler({intermediates:"-",final:b},()=>this.selectCharset("-"+b)),this._parser.registerEscHandler({intermediates:".",final:b},()=>this.selectCharset("."+b)),this._parser.registerEscHandler({intermediates:"/",final:b},()=>this.selectCharset("/"+b));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(b=>(this._logService.error("Parsing error: ",b),b)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((b,O)=>this.requestStatusString(b,O)))}_preserveStack(E,T,x,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=x,this._parseStack.position=k}_logSlowResolvingAsync(E){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([E,new Promise((T,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,T){let x,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(x),x;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>I&&(U=this._parseStack.position+I)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,W=>String.fromCharCode(W)).join("")}"`),typeof E=="string"?E.split("").map(W=>W.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(E.length,I))),q||this._dirtyRowTracker.clearRange(),E.length>I)for(let W=U;W<E.length;W+=I){let ge=W+I<E.length?W+I:E.length,b=typeof E=="string"?this._stringDecoder.decode(E.substring(W,ge),this._parseBuffer):this._utf8Decoder.decode(E.subarray(W,ge),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,b))return this._preserveStack(k,H,b,W),this._logSlowResolvingAsync(x),x}else if(!q){let W=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,W))return this._preserveStack(k,H,W,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,T,x){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,ge=this._coreService.decPrivateModes.wraparound,b=this._coreService.modes.insertMode,O=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-T>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,O.fg,O.bg,O.extended);for(let L=T;L<x;++L){if(k=E[L],H=this._unicodeService.wcwidth(k),k<127&&U){let J=U[String.fromCharCode(k)];J&&(k=J.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,_.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=W){if(ge){for(;this._activeBuffer.x<W;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,O.fg,O.bg,O.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=W-1,H===2)continue}if(b&&(P.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(O),O),P.getWidth(W-1)===2&&P.setCellFromCodePoint(W-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,O.fg,O.bg,O.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,k,H,O.fg,O.bg,O.extended),H>0)for(;--H;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,O.fg,O.bg,O.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,k):P.addCodepointToCell(this._activeBuffer.x-2,k)}x-T>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<W&&x-T>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,O.fg,O.bg,O.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,T){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,T):this._parser.registerCsiHandler(E,x=>!R(x.params[0],this._optionsService.rawOptions.windowOptions)||T(x))}registerDcsHandler(E,T){return this._parser.registerDcsHandler(E,new D.DcsHandler(T))}registerEscHandler(E,T){return this._parser.registerEscHandler(E,T)}registerOscHandler(E,T){return this._parser.registerOscHandler(E,new S.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=E,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+T)}cursorUp(E){let T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let T=E.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=E.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=E.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let T=E.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,T,x,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);U.replaceCells(T,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(E,T=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),x.isWrapped=!1)}eraseInDisplay(E,T=!1){let x;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);x<this._bufferService.rows;x++)this._resetBufferLine(x,T);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,T);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(E,T=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let T=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;T--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let T=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;T--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let T=E.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let T=E.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);k.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);k.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);k.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);k.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let T=E.params[0]||1,x=new Uint32Array(T);for(let k=0;k<T;++k)x[k]=this._parser.precedingCodepoint;return this.print(x,0,x.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let T=0;T<E.length;T++)switch(E.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let T=0;T<E.length;T++)switch(E.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let T=0;T<E.length;T++)switch(E.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let T=0;T<E.length;T++)switch(E.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,T){let x=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:W}=this._bufferService,{active:ge,alt:b}=q,O=this._optionsService.rawOptions,P=de=>de?1:2,L=E.params[0];return J=L,V=T?L===2?4:L===4?P(U.modes.insertMode):L===12?3:L===20?P(O.convertEol):0:L===1?P(x.applicationCursorKeys):L===3?O.windowOptions.setWinLines?W===80?2:W===132?1:0:0:L===6?P(x.origin):L===7?P(x.wraparound):L===8?3:L===9?P(k==="X10"):L===12?P(O.cursorBlink):L===25?P(!U.isCursorHidden):L===45?P(x.reverseWraparound):L===66?P(x.applicationKeypad):L===67?4:L===1e3?P(k==="VT200"):L===1002?P(k==="DRAG"):L===1003?P(k==="ANY"):L===1004?P(x.sendFocus):L===1005?4:L===1006?P(H==="SGR"):L===1015?4:L===1016?P(H==="SGR_PIXELS"):L===1048?1:L===47||L===1047||L===1049?P(ge===b):L===2004?P(x.bracketedPasteMode):0,U.triggerDataEvent(`${u.C0.ESC}[${T?"":"?"}${J};${V}$y`),!0;var J,V}_updateAttrColor(E,T,x,k,H){return T===2?(E|=50331648,E&=-16777216,E|=g.AttributeData.fromColorRGB([x,k,H])):T===5&&(E&=-50331904,E|=33554432|255&x),E}_extractColor(E,T,x){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=E.params[T+U],E.hasSubParams(T+U)){let q=E.getSubParams(T+U),W=0;do k[1]===5&&(H=1),k[U+W+1+H]=q[W];while(++W<q.length&&W+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+T<E.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:x.fg=this._updateAttrColor(x.fg,k[1],k[3],k[4],k[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,k[1],k[3],k[4],k[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(E,T){T.extended=T.extended.clone(),(!~E||E>5)&&(E=1),T.extended.underlineStyle=E,T.fg|=268435456,E===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(E){E.fg=l.DEFAULT_ATTR_DATA.fg,E.bg=l.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let T=E.length,x,k=this._curAttrData;for(let H=0;H<T;H++)x=E.params[H],x>=30&&x<=37?(k.fg&=-50331904,k.fg|=16777216|x-30):x>=40&&x<=47?(k.bg&=-50331904,k.bg|=16777216|x-40):x>=90&&x<=97?(k.fg&=-50331904,k.fg|=16777224|x-90):x>=100&&x<=107?(k.bg&=-50331904,k.bg|=16777224|x-100):x===0?this._processSGR0(k):x===1?k.fg|=134217728:x===3?k.bg|=67108864:x===4?(k.fg|=268435456,this._processUnderline(E.hasSubParams(H)?E.getSubParams(H)[0]:1,k)):x===5?k.fg|=536870912:x===7?k.fg|=67108864:x===8?k.fg|=1073741824:x===9?k.fg|=2147483648:x===2?k.bg|=134217728:x===21?this._processUnderline(2,k):x===22?(k.fg&=-134217729,k.bg&=-134217729):x===23?k.bg&=-67108865:x===24?(k.fg&=-268435457,this._processUnderline(0,k)):x===25?k.fg&=-536870913:x===27?k.fg&=-67108865:x===28?k.fg&=-1073741825:x===29?k.fg&=2147483647:x===39?(k.fg&=-67108864,k.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):x===49?(k.bg&=-67108864,k.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?H+=this._extractColor(E,H,k):x===53?k.bg|=1073741824:x===55?k.bg&=-1073741825:x===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):x===100?(k.fg&=-67108864,k.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let T=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${T};${x}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let T=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${T};${x}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let T=E.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=T%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(E){let T=E.params[0]||1,x;return(E.length<2||(x=E.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(E){if(!R(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let T=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(M.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(M.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let T=[],x=E.split(";");for(;x.length>1;){let k=x.shift(),H=x.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(j(U))if(H==="?")T.push({type:0,index:U});else{let q=(0,m.parseColor)(H);q&&T.push({type:1,index:U,color:q})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(E){let T=E.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(E,T){this._getCurrentLinkId()&&this._finishHyperlink();let x=E.split(":"),k,H=x.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=x[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,T){let x=E.split(";");for(let k=0;k<x.length&&!(T>=this._specialColors.length);++k,++T)if(x[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{let H=(0,m.parseColor)(x[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[T],color:H}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let T=[],x=E.split(";");for(let k=0;k<x.length;++k)if(/^\d+$/.exec(x[k])){let H=parseInt(x[k]);j(H)&&T.push({type:2,index:H})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(w[E[0]],p.CHARSETS[E[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new f.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){let x=this._activeBuffer.ybase+this._activeBuffer.y+T,k=this._activeBuffer.lines.get(x);k&&(k.fill(E),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,T){let x=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${H}${u.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,T){this._dirtyRowTracker.markRangeDirty(E,T)}}i.InputHandler=N;let F=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,E){B>E&&(A=B,B=E,E=A),B<this.start&&(this.start=B),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function j(B){return 0<=B&&B<256}F=a([c(0,y.IBufferService)],F)},844:(s,i)=>{function o(a){for(let c of a)c.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let c=this._disposables.indexOf(a);c!==-1&&this._disposables.splice(c,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){var c;this._isDisposed||a===this._value||((c=this._value)===null||c===void 0||c.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){var a;this._isDisposed=!0,(a=this._value)===null||a===void 0||a.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(c,u,p){this._data[c]||(this._data[c]={}),this._data[c][u]=p}get(c,u){return this._data[c]?this._data[c][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,c,u,p,v){this._data.get(a,c)||this._data.set(a,c,new o),this._data.get(a,c).set(u,p,v)}get(a,c,u,p){var v;return(v=this._data.get(a,c))===null||v===void 0?void 0:v.get(u,p)}clear(){this._data.clear()}}},6114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";let o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;let c=o.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let c=this._getKey(a);if(c===void 0||(o=this._search(c),o===-1)||this._getKey(this._array[o])!==c)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===c);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,c){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do c(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let c=0,u=this._array.length-1;for(;u>=c;){let p=c+u>>1,v=this._getKey(this._array[p]);if(v>a)u=p-1;else{if(!(v<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}c=p+1}}return c}}},7226:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let a=o(6114);class c{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let C=0,_=0,l=v.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),_=Math.max(C,_),h=v.timeRemaining(),1.5*_>h)return l-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-C))}ms`),void this._start();l=h}this.clear()}}class u extends c{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){let C=Date.now()+v;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;let a=o(643);i.updateWindowsModeWrappedState=function(c){let u=c.buffer.lines.get(c.buffer.ybase+c.buffer.y-1),p=u?.get(c.cols-1),v=c.buffer.lines.get(c.buffer.ybase+c.buffer.y);v&&p&&(v.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},9092:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;let a=o(6349),c=o(7226),u=o(3734),p=o(8437),v=o(4634),C=o(511),_=o(643),l=o(4863),h=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(d,f,g){this._hasScrollback=d,this._optionsService=f,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new c.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(d){return d?(this._nullCell.fg=d.fg,this._nullCell.bg=d.bg,this._nullCell.extended=d.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(d){return d?(this._whitespaceCell.fg=d.fg,this._whitespaceCell.bg=d.bg,this._whitespaceCell.extended=d.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(d,f){return new p.BufferLine(this._bufferService.cols,this.getNullCell(d),f)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let d=this.ybase+this.y-this.ydisp;return d>=0&&d<this._rows}_getCorrectBufferLength(d){if(!this._hasScrollback)return d;let f=d+this._optionsService.rawOptions.scrollback;return f>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:f}fillViewportRows(d){if(this.lines.length===0){d===void 0&&(d=p.DEFAULT_ATTR_DATA);let f=this._rows;for(;f--;)this.lines.push(this.getBlankLine(d))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(d,f){let g=this.getNullCell(p.DEFAULT_ATTR_DATA),y=0,S=this._getCorrectBufferLength(f);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<d)for(let m=0;m<this.lines.length;m++)y+=+this.lines.get(m).resize(d,g);let D=0;if(this._rows<f)for(let m=this._rows;m<f;m++)this.lines.length<f+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(d,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(d,g)));else for(let m=this._rows;m>f;m--)this.lines.length>f+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let m=this.lines.length-S;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=S}this.x=Math.min(this.x,d-1),this.y=Math.min(this.y,f-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,d-1),this.scrollTop=0}if(this.scrollBottom=f-1,this._isReflowEnabled&&(this._reflow(d,f),this._cols>d))for(let D=0;D<this.lines.length;D++)y+=+this.lines.get(D).resize(d,g);this._cols=d,this._rows=f,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let d=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,d=!1);let f=0;for(;this._memoryCleanupPosition<this.lines.length;)if(f+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),f>100)return!0;return d}get _isReflowEnabled(){let d=this._optionsService.rawOptions.windowsPty;return d&&d.buildNumber?this._hasScrollback&&d.backend==="conpty"&&d.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(d,f){this._cols!==d&&(d>this._cols?this._reflowLarger(d,f):this._reflowSmaller(d,f))}_reflowLarger(d,f){let g=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,d,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(g.length>0){let y=(0,v.reflowLargerCreateNewLayout)(this.lines,g);(0,v.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(d,f,y.countRemoved)}}_reflowLargerAdjustViewport(d,f,g){let y=this.getNullCell(p.DEFAULT_ATTR_DATA),S=g;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<f&&this.lines.push(new p.BufferLine(d,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(d,f){let g=this.getNullCell(p.DEFAULT_ATTR_DATA),y=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let m=this.lines.get(D);if(!m||!m.isWrapped&&m.getTrimmedLength()<=d)continue;let w=[m];for(;m.isWrapped&&D>0;)m=this.lines.get(--D),w.unshift(m);let I=this.ybase+this.y;if(I>=D&&I<D+w.length)continue;let R=w[w.length-1].getTrimmedLength(),M=(0,v.reflowSmallerGetNewLineLengths)(w,this._cols,d),A=M.length-w.length,N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);let F=[];for(let k=0;k<A;k++){let H=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);F.push(H)}F.length>0&&(y.push({start:D+w.length+S,newLines:F}),S+=F.length),w.push(...F);let j=M.length-1,B=M[j];B===0&&(j--,B=M[j]);let E=w.length-A-1,T=R;for(;E>=0;){let k=Math.min(T,B);if(w[j]===void 0)break;if(w[j].copyCellsFrom(w[E],T-k,B-k,k,!0),B-=k,B===0&&(j--,B=M[j]),T-=k,T===0){E--;let H=Math.max(E,0);T=(0,v.getWrappedLineTrimmedLength)(w,H,this._cols)}}for(let k=0;k<w.length;k++)M[k]<d&&w[k].setCell(M[k],g);let x=A-N;for(;x-- >0;)this.ybase===0?this.y<f-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-f&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+f-1)}if(y.length>0){let D=[],m=[];for(let j=0;j<this.lines.length;j++)m.push(this.lines.get(j));let w=this.lines.length,I=w-1,R=0,M=y[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let A=0;for(let j=Math.min(this.lines.maxLength-1,w+S-1);j>=0;j--)if(M&&M.start>I+A){for(let B=M.newLines.length-1;B>=0;B--)this.lines.set(j--,M.newLines[B]);j++,D.push({index:I+1,amount:M.newLines.length}),A+=M.newLines.length,M=y[++R]}else this.lines.set(j,m[I--]);let N=0;for(let j=D.length-1;j>=0;j--)D[j].index+=N,this.lines.onInsertEmitter.fire(D[j]),N+=D[j].amount;let F=Math.max(0,w+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(d,f,g=0,y){let S=this.lines.get(d);return S?S.translateToString(f,g,y):""}getWrappedRangeForLine(d){let f=d,g=d;for(;f>0&&this.lines.get(f).isWrapped;)f--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:f,last:g}}setupTabStops(d){for(d!=null?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);d<this._cols;d+=this._optionsService.rawOptions.tabStopWidth)this.tabs[d]=!0}prevStop(d){for(d==null&&(d=this.x);!this.tabs[--d]&&d>0;);return d>=this._cols?this._cols-1:d<0?0:d}nextStop(d){for(d==null&&(d=this.x);!this.tabs[++d]&&d<this._cols;);return d>=this._cols?this._cols-1:d<0?0:d}clearMarkers(d){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].line===d&&(this.markers[f].dispose(),this.markers.splice(f--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].dispose(),this.markers.splice(d--,1);this._isClearing=!1}addMarker(d){let f=new l.Marker(d);return this.markers.push(f),f.register(this.lines.onTrim(g=>{f.line-=g,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(g=>{f.line>=g.index&&(f.line+=g.amount)})),f.register(this.lines.onDelete(g=>{f.line>=g.index&&f.line<g.index+g.amount&&f.dispose(),f.line>g.index&&(f.line-=g.amount)})),f.register(f.onDispose(()=>this._removeMarker(f))),f}_removeMarker(d){this._isClearing||this.markers.splice(this.markers.indexOf(d),1)}}},8437:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;let a=o(3734),c=o(511),u=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let v=0;class C{constructor(l,h,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);let f=h||c.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let g=0;g<l;++g)this.setCell(g,f);this.length=l}get(l){let h=this._data[3*l+0],d=2097151&h;return[this._data[3*l+1],2097152&h?this._combined[l]:d?(0,p.stringFromCodePoint)(d):"",h>>22,2097152&h?this._combined[l].charCodeAt(this._combined[l].length-1):d]}set(l,h){this._data[3*l+1]=h[u.CHAR_DATA_ATTR_INDEX],h[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=h[1],this._data[3*l+0]=2097152|l|h[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){let h=this._data[3*l+0];return 2097152&h?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&h}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){let h=this._data[3*l+0];return 2097152&h?this._combined[l]:2097151&h?(0,p.stringFromCodePoint)(2097151&h):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,h){return v=3*l,h.content=this._data[v+0],h.fg=this._data[v+1],h.bg=this._data[v+2],2097152&h.content&&(h.combinedData=this._combined[l]),268435456&h.bg&&(h.extended=this._extendedAttrs[l]),h}setCell(l,h){2097152&h.content&&(this._combined[l]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[l]=h.extended),this._data[3*l+0]=h.content,this._data[3*l+1]=h.fg,this._data[3*l+2]=h.bg}setCellFromCodePoint(l,h,d,f,g,y){268435456&g&&(this._extendedAttrs[l]=y),this._data[3*l+0]=h|d<<22,this._data[3*l+1]=f,this._data[3*l+2]=g}addCodepointToCell(l,h){let d=this._data[3*l+0];2097152&d?this._combined[l]+=(0,p.stringFromCodePoint)(h):(2097151&d?(this._combined[l]=(0,p.stringFromCodePoint)(2097151&d)+(0,p.stringFromCodePoint)(h),d&=-2097152,d|=2097152):d=h|4194304,this._data[3*l+0]=d)}insertCells(l,h,d,f){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),h<this.length-l){let g=new c.CellData;for(let y=this.length-l-h-1;y>=0;--y)this.setCell(l+h+y,this.loadCell(l+y,g));for(let y=0;y<h;++y)this.setCell(l+y,d)}else for(let g=l;g<this.length;++g)this.setCell(g,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs)}deleteCells(l,h,d,f){if(l%=this.length,h<this.length-l){let g=new c.CellData;for(let y=0;y<this.length-l-h;++y)this.setCell(l+y,this.loadCell(l+h+y,g));for(let y=this.length-h;y<this.length;++y)this.setCell(y,d)}else for(let g=l;g<this.length;++g)this.setCell(g,d);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs)}replaceCells(l,h,d,f,g=!1){if(g)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs);l<h&&l<this.length;)this.isProtected(l)||this.setCell(l,d),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs);l<h&&l<this.length;)this.setCell(l++,d)}resize(l,h){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let d=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{let f=new Uint32Array(d);f.set(this._data),this._data=f}for(let f=this.length;f<l;++f)this.setCell(f,h)}else{this._data=this._data.subarray(0,d);let f=Object.keys(this._combined);for(let y=0;y<f.length;y++){let S=parseInt(f[y],10);S>=l&&delete this._combined[S]}let g=Object.keys(this._extendedAttrs);for(let y=0;y<g.length;y++){let S=parseInt(g[y],10);S>=l&&delete this._extendedAttrs[S]}}return this.length=l,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,h=!1){if(h)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,l);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(let h in l._combined)this._combined[h]=l._combined[h];this._extendedAttrs={};for(let h in l._extendedAttrs)this._extendedAttrs[h]=l._extendedAttrs[h];this.isWrapped=l.isWrapped}clone(){let l=new C(0);l._data=new Uint32Array(this._data),l.length=this.length;for(let h in this._combined)l._combined[h]=this._combined[h];for(let h in this._extendedAttrs)l._extendedAttrs[h]=this._extendedAttrs[h];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,h,d,f,g){let y=l._data;if(g)for(let D=f-1;D>=0;D--){for(let m=0;m<3;m++)this._data[3*(d+D)+m]=y[3*(h+D)+m];268435456&y[3*(h+D)+2]&&(this._extendedAttrs[d+D]=l._extendedAttrs[h+D])}else for(let D=0;D<f;D++){for(let m=0;m<3;m++)this._data[3*(d+D)+m]=y[3*(h+D)+m];268435456&y[3*(h+D)+2]&&(this._extendedAttrs[d+D]=l._extendedAttrs[h+D])}let S=Object.keys(l._combined);for(let D=0;D<S.length;D++){let m=parseInt(S[D],10);m>=h&&(this._combined[m-h+d]=l._combined[m])}}translateToString(l=!1,h=0,d=this.length){l&&(d=Math.min(d,this.getTrimmedLength()));let f="";for(;h<d;){let g=this._data[3*h+0],y=2097151&g;f+=2097152&g?this._combined[h]:y?(0,p.stringFromCodePoint)(y):u.WHITESPACE_CELL_CHAR,h+=g>>22||1}return f}}i.BufferLine=C},4841:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(s,i)=>{function o(a,c,u){if(c===a.length-1)return a[c].getTrimmedLength();let p=!a[c].hasContent(u-1)&&a[c].getWidth(u-1)===1,v=a[c+1].getWidth(0)===2;return p&&v?u-1:u}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(a,c,u,p,v){let C=[];for(let _=0;_<a.length-1;_++){let l=_,h=a.get(++l);if(!h.isWrapped)continue;let d=[a.get(_)];for(;l<a.length&&h.isWrapped;)d.push(h),h=a.get(++l);if(p>=_&&p<l){_+=d.length-1;continue}let f=0,g=o(d,f,c),y=1,S=0;for(;y<d.length;){let m=o(d,y,c),w=m-S,I=u-g,R=Math.min(w,I);d[f].copyCellsFrom(d[y],S,g,R,!1),g+=R,g===u&&(f++,g=0),S+=R,S===m&&(y++,S=0),g===0&&f!==0&&d[f-1].getWidth(u-1)===2&&(d[f].copyCellsFrom(d[f-1],u-1,g++,1,!1),d[f-1].setCell(u-1,v))}d[f].replaceCells(g,u,v);let D=0;for(let m=d.length-1;m>0&&(m>f||d[m].getTrimmedLength()===0);m--)D++;D>0&&(C.push(_+d.length-D),C.push(D)),_+=d.length-1}return C},i.reflowLargerCreateNewLayout=function(a,c){let u=[],p=0,v=c[p],C=0;for(let _=0;_<a.length;_++)if(v===_){let l=c[++p];a.onDeleteEmitter.fire({index:_-C,amount:l}),_+=l-1,C+=l,v=c[++p]}else u.push(_);return{layout:u,countRemoved:C}},i.reflowLargerApplyNewLayout=function(a,c){let u=[];for(let p=0;p<c.length;p++)u.push(a.get(c[p]));for(let p=0;p<u.length;p++)a.set(p,u[p]);a.length=c.length},i.reflowSmallerGetNewLineLengths=function(a,c,u){let p=[],v=a.map((h,d)=>o(a,d,c)).reduce((h,d)=>h+d),C=0,_=0,l=0;for(;l<v;){if(v-l<u){p.push(v-l);break}C+=u;let h=o(a,_,c);C>h&&(C-=h,_++);let d=a[_].getWidth(C-1)===2;d&&C--;let f=d?u-1:u;p.push(f),l+=f}return p},i.getWrappedLineTrimmedLength=o},5295:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;let a=o(8460),c=o(844),u=o(9092);class p extends c.Disposable{constructor(C,_){super(),this._optionsService=C,this._bufferService=_,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,_){this._normal.resize(C,_),this._alt.resize(C,_),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}i.BufferSet=p},511:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let a=o(482),c=o(643),u=o(3734);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(C){let _=new p;return _.setFromCharData(C),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(C[c.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(C[c.CHAR_DATA_CHAR_INDEX].length===2){let l=C[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){let h=C[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(l-55296)+h-56320+65536|C[c.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=C[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[c.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=C[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;let a=o(8460),c=o(844);class u{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,c.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}i.Marker=u,u._nextId=1},7116:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(s,i)=>{var o,a,c;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(o||(i.C0=o={})),function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"}(a||(i.C1=a={})),function(u){u.ST=`${o.ESC}\\`}(c||(i.C1_ESCAPED=c={}))},7399:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;let a=o(2584),c={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(u,p,v,C){let _={type:0,cancel:!1,key:void 0},l=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?_.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?_.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?_.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(_.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:if(u.altKey){_.key=a.C0.ESC+a.C0.DEL;break}_.key=a.C0.DEL;break;case 9:if(u.shiftKey){_.key=a.C0.ESC+"[Z";break}_.key=a.C0.HT,_.cancel=!0;break;case 13:_.key=u.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,_.cancel=!0;break;case 27:_.key=a.C0.ESC,u.altKey&&(_.key=a.C0.ESC+a.C0.ESC),_.cancel=!0;break;case 37:if(u.metaKey)break;l?(_.key=a.C0.ESC+"[1;"+(l+1)+"D",_.key===a.C0.ESC+"[1;3D"&&(_.key=a.C0.ESC+(v?"b":"[1;5D"))):_.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(u.metaKey)break;l?(_.key=a.C0.ESC+"[1;"+(l+1)+"C",_.key===a.C0.ESC+"[1;3C"&&(_.key=a.C0.ESC+(v?"f":"[1;5C"))):_.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(u.metaKey)break;l?(_.key=a.C0.ESC+"[1;"+(l+1)+"A",v||_.key!==a.C0.ESC+"[1;3A"||(_.key=a.C0.ESC+"[1;5A")):_.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(u.metaKey)break;l?(_.key=a.C0.ESC+"[1;"+(l+1)+"B",v||_.key!==a.C0.ESC+"[1;3B"||(_.key=a.C0.ESC+"[1;5B")):_.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(_.key=a.C0.ESC+"[2~");break;case 46:_.key=l?a.C0.ESC+"[3;"+(l+1)+"~":a.C0.ESC+"[3~";break;case 36:_.key=l?a.C0.ESC+"[1;"+(l+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:_.key=l?a.C0.ESC+"[1;"+(l+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:u.shiftKey?_.type=2:u.ctrlKey?_.key=a.C0.ESC+"[5;"+(l+1)+"~":_.key=a.C0.ESC+"[5~";break;case 34:u.shiftKey?_.type=3:u.ctrlKey?_.key=a.C0.ESC+"[6;"+(l+1)+"~":_.key=a.C0.ESC+"[6~";break;case 112:_.key=l?a.C0.ESC+"[1;"+(l+1)+"P":a.C0.ESC+"OP";break;case 113:_.key=l?a.C0.ESC+"[1;"+(l+1)+"Q":a.C0.ESC+"OQ";break;case 114:_.key=l?a.C0.ESC+"[1;"+(l+1)+"R":a.C0.ESC+"OR";break;case 115:_.key=l?a.C0.ESC+"[1;"+(l+1)+"S":a.C0.ESC+"OS";break;case 116:_.key=l?a.C0.ESC+"[15;"+(l+1)+"~":a.C0.ESC+"[15~";break;case 117:_.key=l?a.C0.ESC+"[17;"+(l+1)+"~":a.C0.ESC+"[17~";break;case 118:_.key=l?a.C0.ESC+"[18;"+(l+1)+"~":a.C0.ESC+"[18~";break;case 119:_.key=l?a.C0.ESC+"[19;"+(l+1)+"~":a.C0.ESC+"[19~";break;case 120:_.key=l?a.C0.ESC+"[20;"+(l+1)+"~":a.C0.ESC+"[20~";break;case 121:_.key=l?a.C0.ESC+"[21;"+(l+1)+"~":a.C0.ESC+"[21~";break;case 122:_.key=l?a.C0.ESC+"[23;"+(l+1)+"~":a.C0.ESC+"[23~";break;case 123:_.key=l?a.C0.ESC+"[24;"+(l+1)+"~":a.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(v&&!C||!u.altKey||u.metaKey)!v||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?_.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(_.key=a.C0.US),u.key==="@"&&(_.key=a.C0.NUL)):u.keyCode===65&&(_.type=1);else{let h=c[u.keyCode],d=h?.[u.shiftKey?1:0];if(d)_.key=a.C0.ESC+d;else if(u.keyCode>=65&&u.keyCode<=90){let f=u.ctrlKey?u.keyCode-64:u.keyCode+32,g=String.fromCharCode(f);u.shiftKey&&(g=g.toUpperCase()),_.key=a.C0.ESC+g}else if(u.keyCode===32)_.key=a.C0.ESC+(u.ctrlKey?a.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let f=u.code.slice(3,4);u.shiftKey||(f=f.toLowerCase()),_.key=a.C0.ESC+f,_.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?_.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?_.key=a.C0.NUL:u.keyCode>=51&&u.keyCode<=55?_.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?_.key=a.C0.DEL:u.keyCode===219?_.key=a.C0.ESC:u.keyCode===220?_.key=a.C0.FS:u.keyCode===221&&(_.key=a.C0.GS)}return _}},482:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,c=o.length){let u="";for(let p=a;p<c;++p){let v=o[p];v>65535?(v-=65536,u+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):u+=String.fromCharCode(v)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let c=o.length;if(!c)return 0;let u=0,p=0;if(this._interim){let v=o.charCodeAt(p++);56320<=v&&v<=57343?a[u++]=1024*(this._interim-55296)+v-56320+65536:(a[u++]=this._interim,a[u++]=v),this._interim=0}for(let v=p;v<c;++v){let C=o.charCodeAt(v);if(55296<=C&&C<=56319){if(++v>=c)return this._interim=C,u;let _=o.charCodeAt(v);56320<=_&&_<=57343?a[u++]=1024*(C-55296)+_-56320+65536:(a[u++]=C,a[u++]=_)}else C!==65279&&(a[u++]=C)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let c=o.length;if(!c)return 0;let u,p,v,C,_=0,l=0,h=0;if(this.interim[0]){let g=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)y<<=6,y|=S;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=m-D;for(;h<w;){if(h>=c)return 0;if(S=o[h++],(192&S)!=128){h--,g=!0;break}this.interim[D++]=S,y<<=6,y|=63&S}g||(m===2?y<128?h--:a[_++]=y:m===3?y<2048||y>=55296&&y<=57343||y===65279||(a[_++]=y):y<65536||y>1114111||(a[_++]=y)),this.interim.fill(0)}let d=c-4,f=h;for(;f<c;){for(;!(!(f<d)||128&(u=o[f])||128&(p=o[f+1])||128&(v=o[f+2])||128&(C=o[f+3]));)a[_++]=u,a[_++]=p,a[_++]=v,a[_++]=C,f+=4;if(u=o[f++],u<128)a[_++]=u;else if((224&u)==192){if(f>=c)return this.interim[0]=u,_;if(p=o[f++],(192&p)!=128){f--;continue}if(l=(31&u)<<6|63&p,l<128){f--;continue}a[_++]=l}else if((240&u)==224){if(f>=c)return this.interim[0]=u,_;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=c)return this.interim[0]=u,this.interim[1]=p,_;if(v=o[f++],(192&v)!=128){f--;continue}if(l=(15&u)<<12|(63&p)<<6|63&v,l<2048||l>=55296&&l<=57343||l===65279)continue;a[_++]=l}else if((248&u)==240){if(f>=c)return this.interim[0]=u,_;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=c)return this.interim[0]=u,this.interim[1]=p,_;if(v=o[f++],(192&v)!=128){f--;continue}if(f>=c)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=v,_;if(C=o[f++],(192&C)!=128){f--;continue}if(l=(7&u)<<18|(63&p)<<12|(63&v)<<6|63&C,l<65536||l>1114111)continue;a[_++]=l}}return _}}},225:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],c;i.UnicodeV6=class{constructor(){if(this.version="6",!c){c=new Uint8Array(65536),c.fill(1),c[0]=0,c.fill(0,1,32),c.fill(0,127,160),c.fill(2,4352,4448),c[9001]=2,c[9002]=2,c.fill(2,11904,42192),c[12351]=1,c.fill(2,44032,55204),c.fill(2,63744,64256),c.fill(2,65040,65050),c.fill(2,65072,65136),c.fill(2,65280,65377),c.fill(2,65504,65511);for(let u=0;u<o.length;++u)c.fill(0,o[u][0],o[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?c[u]:function(p,v){let C,_=0,l=v.length-1;if(p<v[0][0]||p>v[l][1])return!1;for(;l>=_;)if(C=_+l>>1,p>v[C][1])_=C+1;else{if(!(p<v[C][0]))return!0;l=C-1}return!1}(u,a)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;let a=o(8460),c=o(844);class u extends c.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);let l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(C)}_innerWrite(v=0,C=!0){let _=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let l=this._writeBuffer[this._bufferOffset],h=this._action(l,C);if(h){let f=g=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(_,g);return void h.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(f)}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=u},5941:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function c(u,p){let v=u.toString(16),C=v.length<2?"0"+v:v;switch(p){case 4:return v[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}i.parseColor=function(u){if(!u)return;let p=u.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let v=o.exec(p);if(v){let C=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/C*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/C*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/C*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let v=p.length/3,C=[0,0,0];for(let _=0;_<3;++_){let l=parseInt(p.slice(v*_,v*_+v),16);C[_]=v===1?l<<4:v===2?l:v===3?l>>4:l>>8}return C}},i.toRgbString=function(u,p=16){let[v,C,_]=u;return`rgb:${c(v,p)}/${c(C,p)}/${c(_,p)}`}},5770:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;let a=o(482),c=o(8742),u=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(C,_){this._handlers[C]===void 0&&(this._handlers[C]=[]);let l=this._handlers[C];return l.push(_),{dispose:()=>{let h=l.indexOf(_);h!==-1&&l.splice(h,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(C,_){if(this.reset(),this._ident=C,this._active=this._handlers[C]||p,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(C,_,l){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(C,_,l);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(C,_,l))}unhook(C,_=!0){if(this._active.length){let l=!1,h=this._active.length-1,d=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,l=_,d=this._stack.fallThrough,this._stack.paused=!1),!d&&l===!1){for(;h>=0&&(l=this._active[h].unhook(C),l!==!0);h--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,l;h--}for(;h>=0;h--)if(l=this._active[h].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",C);this._active=p,this._ident=0}};let v=new c.Params;v.addParam(0),i.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=v,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():v,this._data="",this._hitLimit=!1}put(C,_,l){this._hitLimit||(this._data+=(0,a.utf32ToString)(C,_,l),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let _=!1;if(this._hitLimit)_=!1;else if(C&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(l=>(this._params=v,this._data="",this._hitLimit=!1,l));return this._params=v,this._data="",this._hitLimit=!1,_}}},2015:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;let a=o(844),c=o(8742),u=o(6242),p=o(6351);class v{constructor(h){this.table=new Uint8Array(h)}setDefault(h,d){this.table.fill(h<<4|d)}add(h,d,f,g){this.table[d<<8|h]=f<<4|g}addMany(h,d,f,g){for(let y=0;y<h.length;y++)this.table[d<<8|h[y]]=f<<4|g}}i.TransitionTable=v;let C=160;i.VT500_TRANSITION_TABLE=function(){let l=new v(4095),h=Array.apply(null,Array(256)).map((D,m)=>m),d=(D,m)=>h.slice(D,m),f=d(32,127),g=d(0,24);g.push(25),g.push.apply(g,d(28,32));let y=d(0,14),S;for(S in l.setDefault(1,0),l.addMany(f,0,2,0),y)l.addMany([24,26,153,154],S,3,0),l.addMany(d(128,144),S,3,0),l.addMany(d(144,152),S,3,0),l.add(156,S,0,0),l.add(27,S,11,1),l.add(157,S,4,8),l.addMany([152,158,159],S,0,7),l.add(155,S,11,3),l.add(144,S,11,9);return l.addMany(g,0,3,0),l.addMany(g,1,3,1),l.add(127,1,0,1),l.addMany(g,8,0,8),l.addMany(g,3,3,3),l.add(127,3,0,3),l.addMany(g,4,3,4),l.add(127,4,0,4),l.addMany(g,6,3,6),l.addMany(g,5,3,5),l.add(127,5,0,5),l.addMany(g,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(f,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(d(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(f,7,0,7),l.addMany(g,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(d(64,127),3,7,0),l.addMany(d(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(d(48,60),4,8,4),l.addMany(d(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(d(32,64),6,0,6),l.add(127,6,0,6),l.addMany(d(64,127),6,0,0),l.addMany(d(32,48),3,9,5),l.addMany(d(32,48),5,9,5),l.addMany(d(48,64),5,0,6),l.addMany(d(64,127),5,7,0),l.addMany(d(32,48),4,9,5),l.addMany(d(32,48),1,9,2),l.addMany(d(32,48),2,9,2),l.addMany(d(48,127),2,10,0),l.addMany(d(48,80),1,10,0),l.addMany(d(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(d(96,127),1,10,0),l.add(80,1,11,9),l.addMany(g,9,0,9),l.add(127,9,0,9),l.addMany(d(28,32),9,0,9),l.addMany(d(32,48),9,9,12),l.addMany(d(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(g,11,0,11),l.addMany(d(32,128),11,0,11),l.addMany(d(28,32),11,0,11),l.addMany(g,10,0,10),l.add(127,10,0,10),l.addMany(d(28,32),10,0,10),l.addMany(d(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(d(32,48),10,9,12),l.addMany(g,12,0,12),l.add(127,12,0,12),l.addMany(d(28,32),12,0,12),l.addMany(d(32,48),12,9,12),l.addMany(d(48,64),12,0,11),l.addMany(d(64,127),12,12,13),l.addMany(d(64,127),10,12,13),l.addMany(d(64,127),9,12,13),l.addMany(g,13,13,13),l.addMany(f,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(C,0,2,0),l.add(C,8,5,8),l.add(C,6,0,6),l.add(C,11,0,11),l.add(C,13,13,13),l}();class _ extends a.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new c.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(d,f,g)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,f)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,d=[64,126]){let f=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(f=h.prefix.charCodeAt(0),f&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<h.intermediates.length;++y){let S=h.intermediates.charCodeAt(y);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=S}}if(h.final.length!==1)throw new Error("final must be a single byte");let g=h.final.charCodeAt(0);if(d[0]>g||g>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return f<<=8,f|=g,f}identToString(h){let d=[];for(;h;)d.push(String.fromCharCode(255&h)),h>>=8;return d.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,d){let f=this._identifier(h,[48,126]);this._escHandlers[f]===void 0&&(this._escHandlers[f]=[]);let g=this._escHandlers[f];return g.push(d),{dispose:()=>{let y=g.indexOf(d);y!==-1&&g.splice(y,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,d){this._executeHandlers[h.charCodeAt(0)]=d}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,d){let f=this._identifier(h);this._csiHandlers[f]===void 0&&(this._csiHandlers[f]=[]);let g=this._csiHandlers[f];return g.push(d),{dispose:()=>{let y=g.indexOf(d);y!==-1&&g.splice(y,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,d){return this._dcsParser.registerHandler(this._identifier(h),d)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,d){return this._oscParser.registerHandler(h,d)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,d,f,g,y){this._parseStack.state=h,this._parseStack.handlers=d,this._parseStack.handlerPos=f,this._parseStack.transition=g,this._parseStack.chunkPos=y}parse(h,d,f){let g,y=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(f===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let m=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(f===!1&&w>-1){for(;w>=0&&(g=m[w](this._params),g!==!0);w--)if(g instanceof Promise)return this._parseStack.handlerPos=w,g}this._parseStack.handlers=[];break;case 4:if(f===!1&&w>-1){for(;w>=0&&(g=m[w](),g!==!0);w--)if(g instanceof Promise)return this._parseStack.handlerPos=w,g}this._parseStack.handlers=[];break;case 6:if(y=h[this._parseStack.chunkPos],g=this._dcsParser.unhook(y!==24&&y!==26,f),g)return g;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=h[this._parseStack.chunkPos],g=this._oscParser.end(y!==24&&y!==26,f),g)return g;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let m=D;m<d;++m){switch(y=h[m],S=this._transitions.table[this.currentState<<8|(y<160?y:C)],S>>4){case 2:for(let A=m+1;;++A){if(A>=d||(y=h[A])<32||y>126&&y<C){this._printHandler(h,m,A),m=A-1;break}if(++A>=d||(y=h[A])<32||y>126&&y<C){this._printHandler(h,m,A),m=A-1;break}if(++A>=d||(y=h[A])<32||y>126&&y<C){this._printHandler(h,m,A),m=A-1;break}if(++A>=d||(y=h[A])<32||y>126&&y<C){this._printHandler(h,m,A),m=A-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|y],I=w?w.length-1:-1;for(;I>=0&&(g=w[I](this._params),g!==!0);I--)if(g instanceof Promise)return this._preserveStack(3,w,I,S,m),g;I<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++m<d&&(y=h[m])>47&&y<60);m--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:let R=this._escHandlers[this._collect<<8|y],M=R?R.length-1:-1;for(;M>=0&&(g=R[M](),g!==!0);M--)if(g instanceof Promise)return this._preserveStack(4,R,M,S,m),g;M<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let A=m+1;;++A)if(A>=d||(y=h[A])===24||y===26||y===27||y>127&&y<C){this._dcsParser.put(h,m,A),m=A-1;break}break;case 14:if(g=this._dcsParser.unhook(y!==24&&y!==26),g)return this._preserveStack(6,[],0,S,m),g;y===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let A=m+1;;A++)if(A>=d||(y=h[A])<32||y>127&&y<C){this._oscParser.put(h,m,A),m=A-1;break}break;case 6:if(g=this._oscParser.end(y!==24&&y!==26),g)return this._preserveStack(5,[],0,S,m),g;y===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}i.EscapeSequenceParser=_},6242:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;let a=o(5770),c=o(482),u=[];i.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,v){this._handlers[p]===void 0&&(this._handlers[p]=[]);let C=this._handlers[p];return C.push(v),{dispose:()=>{let _=C.indexOf(v);_!==-1&&C.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,v,C){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,v,C);else this._handlerFb(this._id,"PUT",(0,c.utf32ToString)(p,v,C))}start(){this.reset(),this._state=1}put(p,v,C){if(this._state!==3){if(this._state===1)for(;v<C;){let _=p[v++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&C-v>0&&this._put(p,v,C)}}end(p,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,_=this._active.length-1,l=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,C=v,l=this._stack.fallThrough,this._stack.paused=!1),!l&&C===!1){for(;_>=0&&(C=this._active[_].end(p),C!==!0);_--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,C;_--}for(;_>=0;_--)if(C=this._active[_].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",p);this._active=u,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,v,C){this._hitLimit||(this._data+=(0,c.utf32ToString)(p,v,C),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let v=!1;if(this._hitLimit)v=!1;else if(p&&(v=this._handler(this._data),v instanceof Promise))return v.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,v}}},8742:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;let o=2147483647;class a{static fromArray(u){let p=new a;if(!u.length)return p;for(let v=Array.isArray(u[0])?1:0;v<u.length;++v){let C=u[v];if(Array.isArray(C))for(let _=0;_<C.length;++_)p.addSubParam(C[_]);else p.addParam(C)}return p}constructor(u=32,p=32){if(this.maxLength=u,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new a(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let p=0;p<this.length;++p){u.push(this.params[p]);let v=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-v>0&&u.push(Array.prototype.slice.call(this._subParams,v,C))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let p=this._subParamsIdx[u]>>8,v=255&this._subParamsIdx[u];return v-p>0?this._subParams.subarray(p,v):null}getSubParamsAll(){let u={};for(let p=0;p<this.length;++p){let v=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-v>0&&(u[p]=this._subParams.slice(v,C))}return u}addDigit(u){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let v=this._digitIsSub?this._subParams:this.params,C=v[p-1];v[p-1]=~C?Math.min(10*C+u,o):u}}i.Params=a},5741:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let c={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(c),a.dispose=()=>this._wrappedAddonDispose(c),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let c=0;c<this._addons.length;c++)if(this._addons[c]===o){a=c;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;let a=o(3785),c=o(511);i.BufferApiView=class{constructor(u,p){this._buffer=u,this.type=p}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let p=this._buffer.lines.get(u);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new c.CellData}}},3785:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;let a=o(511);i.BufferLineApiView=class{constructor(c){this._line=c}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(c,u){if(!(c<0||c>=this._line.length))return u?(this._line.loadCell(c,u),u):this._line.loadCell(c,new a.CellData)}translateToString(c,u,p){return this._line.translateToString(c,u,p)}}},8285:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;let a=o(8771),c=o(8460),u=o(844);class p extends u.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new c.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,c=>a(c.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(c,u)=>a(c,u.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(s,i,o){var a=this&&this.__decorate||function(l,h,d,f){var g,y=arguments.length,S=y<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,h,d,f);else for(var D=l.length-1;D>=0;D--)(g=l[D])&&(S=(y<3?g(S):y>3?g(h,d,S):g(h,d))||S);return y>3&&S&&Object.defineProperty(h,d,S),S},c=this&&this.__param||function(l,h){return function(d,f){h(d,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;let u=o(8460),p=o(844),v=o(5295),C=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let _=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(l,this))}resize(l,h){this.cols=l,this.rows=h,this.buffers.resize(l,h),this._onResize.fire({cols:l,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,h=!1){let d=this.buffer,f;f=this._cachedBlankLine,f&&f.length===this.cols&&f.getFg(0)===l.fg&&f.getBg(0)===l.bg||(f=d.getBlankLine(l,h),this._cachedBlankLine=f),f.isWrapped=h;let g=d.ybase+d.scrollTop,y=d.ybase+d.scrollBottom;if(d.scrollTop===0){let S=d.lines.isFull;y===d.lines.length-1?S?d.lines.recycle().copyFrom(f):d.lines.push(f.clone()):d.lines.splice(y+1,0,f.clone()),S?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{let S=y-g+1;d.lines.shiftElements(g+1,S-1,-1),d.lines.set(y,f.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(l,h,d){let f=this.buffer;if(l<0){if(f.ydisp===0)return;this.isUserScrolling=!0}else l+f.ydisp>=f.ybase&&(this.isUserScrolling=!1);let g=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+l,f.ybase),0),g!==f.ydisp&&(h||this._onScroll.fire(f.ydisp))}};i.BufferService=_=a([c(0,C.IOptionsService)],_)},7994:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(s,i,o){var a=this&&this.__decorate||function(f,g,y,S){var D,m=arguments.length,w=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,g,y,S);else for(var I=f.length-1;I>=0;I--)(D=f[I])&&(w=(m<3?D(w):m>3?D(g,y,w):D(g,y))||w);return m>3&&w&&Object.defineProperty(g,y,w),w},c=this&&this.__param||function(f,g){return function(y,S){g(y,S,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;let u=o(2585),p=o(8460),v=o(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:f=>f.button!==4&&f.action===1&&(f.ctrl=!1,f.alt=!1,f.shift=!1,!0)},VT200:{events:19,restrict:f=>f.action!==32},DRAG:{events:23,restrict:f=>f.action!==32||f.button!==3},ANY:{events:31,restrict:f=>!0}};function _(f,g){let y=(f.ctrl?16:0)|(f.shift?4:0)|(f.alt?8:0);return f.button===4?(y|=64,y|=f.action):(y|=3&f.button,4&f.button&&(y|=64),8&f.button&&(y|=128),f.action===32?y|=32:f.action!==0||g||(y|=3)),y}let l=String.fromCharCode,h={DEFAULT:f=>{let g=[_(f,!1)+32,f.col+32,f.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${l(g[0])}${l(g[1])}${l(g[2])}`},SGR:f=>{let g=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${_(f,!0)};${f.col};${f.row}${g}`},SGR_PIXELS:f=>{let g=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${_(f,!0)};${f.x};${f.y}${g}`}},d=i.CoreMouseService=class extends v.Disposable{constructor(f,g){super(),this._bufferService=f,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let y of Object.keys(C))this.addProtocol(y,C[y]);for(let y of Object.keys(h))this.addEncoding(y,h[y]);this.reset()}addProtocol(f,g){this._protocols[f]=g}addEncoding(f,g){this._encodings[f]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(f){if(!this._protocols[f])throw new Error(`unknown protocol "${f}"`);this._activeProtocol=f,this._onProtocolChange.fire(this._protocols[f].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(f){if(!this._encodings[f])throw new Error(`unknown encoding "${f}"`);this._activeEncoding=f}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(f){if(f.col<0||f.col>=this._bufferService.cols||f.row<0||f.row>=this._bufferService.rows||f.button===4&&f.action===32||f.button===3&&f.action!==32||f.button!==4&&(f.action===2||f.action===3)||(f.col++,f.row++,f.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,f,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(f))return!1;let g=this._encodings[this._activeEncoding](f);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=f,!0}explainEvents(f){return{down:!!(1&f),up:!!(2&f),drag:!!(4&f),move:!!(8&f),wheel:!!(16&f)}}_equalEvents(f,g,y){if(y){if(f.x!==g.x||f.y!==g.y)return!1}else if(f.col!==g.col||f.row!==g.row)return!1;return f.button===g.button&&f.action===g.action&&f.ctrl===g.ctrl&&f.alt===g.alt&&f.shift===g.shift}};i.CoreMouseService=d=a([c(0,u.IBufferService),c(1,u.ICoreService)],d)},6975:function(s,i,o){var a=this&&this.__decorate||function(d,f,g,y){var S,D=arguments.length,m=D<3?f:y===null?y=Object.getOwnPropertyDescriptor(f,g):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(d,f,g,y);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(m=(D<3?S(m):D>3?S(f,g,m):S(f,g))||m);return D>3&&m&&Object.defineProperty(f,g,m),m},c=this&&this.__param||function(d,f){return function(g,y){f(g,y,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;let u=o(1439),p=o(8460),v=o(844),C=o(2585),_=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),h=i.CoreService=class extends v.Disposable{constructor(d,f,g){super(),this._bufferService=d,this._logService=f,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(l)}reset(){this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(l)}triggerDataEvent(d,f=!1){if(this._optionsService.rawOptions.disableStdin)return;let g=this._bufferService.buffer;f&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),f&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(y=>y.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(f=>f.charCodeAt(0))),this._onBinary.fire(d))}};i.CoreService=h=a([c(0,C.IBufferService),c(1,C.ILogService),c(2,C.IOptionsService)],h)},9074:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;let a=o(8055),c=o(8460),u=o(844),p=o(6106),v=0,C=0;class _ extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(d=>d?.marker.line),this._onDecorationRegistered=this.register(new c.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new c.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(d){if(d.marker.isDisposed)return;let f=new l(d);if(f){let g=f.marker.onDispose(()=>f.dispose());f.onDispose(()=>{f&&(this._decorations.delete(f)&&this._onDecorationRemoved.fire(f),g.dispose())}),this._decorations.insert(f),this._onDecorationRegistered.fire(f)}return f}reset(){for(let d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,f,g){var y,S,D;let m=0,w=0;for(let I of this._decorations.getKeyIterator(f))m=(y=I.options.x)!==null&&y!==void 0?y:0,w=m+((S=I.options.width)!==null&&S!==void 0?S:1),d>=m&&d<w&&(!g||((D=I.options.layer)!==null&&D!==void 0?D:"bottom")===g)&&(yield I)}forEachDecorationAtCell(d,f,g,y){this._decorations.forEachByKey(f,S=>{var D,m,w;v=(D=S.options.x)!==null&&D!==void 0?D:0,C=v+((m=S.options.width)!==null&&m!==void 0?m:1),d>=v&&d<C&&(!g||((w=S.options.layer)!==null&&w!==void 0?w:"bottom")===g)&&y(S)})}}i.DecorationService=_;class l extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(d){super(),this.options=d,this.onRenderEmitter=this.register(new c.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;let a=o(2585),c=o(8343);class u{constructor(...v){this._entries=new Map;for(let[C,_]of v)this.set(C,_)}set(v,C){let _=this._entries.get(v);return this._entries.set(v,C),_}forEach(v){for(let[C,_]of this._entries.entries())v(C,_)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}i.ServiceCollection=u,i.InstantiationService=class{constructor(){this._services=new u,this._services.set(a.IInstantiationService,this)}setService(p,v){this._services.set(p,v)}getService(p){return this._services.get(p)}createInstance(p,...v){let C=(0,c.getServiceDependencies)(p).sort((h,d)=>h.index-d.index),_=[];for(let h of C){let d=this._services.get(h.id);if(!d)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${h.id}.`);_.push(d)}let l=C.length>0?C[0].index:v.length;if(v.length!==l)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${l+1} conflicts with ${v.length} static arguments`);return new p(...v,..._)}}},7866:function(s,i,o){var a=this&&this.__decorate||function(l,h,d,f){var g,y=arguments.length,S=y<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,h,d,f);else for(var D=l.length-1;D>=0;D--)(g=l[D])&&(S=(y<3?g(S):y>3?g(h,d,S):g(h,d))||S);return y>3&&S&&Object.defineProperty(h,d,S),S},c=this&&this.__param||function(l,h){return function(d,f){h(d,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let u=o(844),p=o(2585),v={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},C,_=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let h=0;h<l.length;h++)typeof l[h]=="function"&&(l[h]=l[h]())}_log(l,h,d){this._evalLazyOptionalParams(d),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...d)}trace(l,...h){var d,f;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((f=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.trace.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.log,l,h)}debug(l,...h){var d,f;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((f=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.debug.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.log,l,h)}info(l,...h){var d,f;this._logLevel<=p.LogLevelEnum.INFO&&this._log((f=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.info.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.info,l,h)}warn(l,...h){var d,f;this._logLevel<=p.LogLevelEnum.WARN&&this._log((f=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.warn.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.warn,l,h)}error(l,...h){var d,f;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((f=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.error.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.error,l,h)}};i.LogService=_=a([c(0,p.IOptionsService)],_),i.setTraceLogger=function(l){C=l},i.traceCall=function(l,h,d){if(typeof d.value!="function")throw new Error("not supported");let f=d.value;d.value=function(...g){if(C.logLevel!==p.LogLevelEnum.TRACE)return f.apply(this,g);C.trace(`GlyphRenderer#${f.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);let y=f.apply(this,g);return C.trace(`GlyphRenderer#${f.name} return`,y),y}}},7302:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;let a=o(8460),c=o(844),u=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends c.Disposable{constructor(_){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let l=Object.assign({},i.DEFAULT_OPTIONS);for(let h in _)if(h in l)try{let d=_[h];l[h]=this._sanitizeAndValidateOption(h,d)}catch(d){console.error(d)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(_,l){return this.onOptionChange(h=>{h===_&&l(this.rawOptions[_])})}onMultipleOptionChange(_,l){return this.onOptionChange(h=>{_.indexOf(h)!==-1&&l()})}_setupOptions(){let _=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},l=(h,d)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);d=this._sanitizeAndValidateOption(h,d),this.rawOptions[h]!==d&&(this.rawOptions[h]=d,this._onOptionChange.fire(h))};for(let h in this.rawOptions){let d={get:_.bind(this,h),set:l.bind(this,h)};Object.defineProperty(this.options,h,d)}}_sanitizeAndValidateOption(_,l){switch(_){case"cursorStyle":if(l||(l=i.DEFAULT_OPTIONS[_]),!function(h){return h==="block"||h==="underline"||h==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${_}`);break;case"wordSeparator":l||(l=i.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=p.includes(l)?l:i.DEFAULT_OPTIONS[_];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${_} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${_} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}i.OptionsService=v},2660:function(s,i,o){var a=this&&this.__decorate||function(v,C,_,l){var h,d=arguments.length,f=d<3?C:l===null?l=Object.getOwnPropertyDescriptor(C,_):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(v,C,_,l);else for(var g=v.length-1;g>=0;g--)(h=v[g])&&(f=(d<3?h(f):d>3?h(C,_,f):h(C,_))||f);return d>3&&f&&Object.defineProperty(C,_,f),f},c=this&&this.__param||function(v,C){return function(_,l){C(_,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;let u=o(2585),p=i.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){let C=this._bufferService.buffer;if(v.id===void 0){let g=C.addMarker(C.ybase+C.y),y={data:v,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(y,g)),this._dataByLinkId.set(y.id,y),y.id}let _=v,l=this._getEntryIdKey(_),h=this._entriesWithId.get(l);if(h)return this.addLineToLink(h.id,C.ybase+C.y),h.id;let d=C.addMarker(C.ybase+C.y),f={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(f,d)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(v,C){let _=this._dataByLinkId.get(v);if(_&&_.lines.every(l=>l.line!==C)){let l=this._bufferService.buffer.addMarker(C);_.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(_,l))}}getLinkData(v){var C;return(C=this._dataByLinkId.get(v))===null||C===void 0?void 0:C.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,C){let _=v.lines.indexOf(C);_!==-1&&(v.lines.splice(_,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};i.OscLinkService=p=a([c(0,u.IBufferService)],p)},8343:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(c){return c[a]||[]},i.createDecorator=function(c){if(i.serviceRegistry.has(c))return i.serviceRegistry.get(c);let u=function(p,v,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,l,h){l[o]===l?l[a].push({id:_,index:h}):(l[a]=[{id:_,index:h}],l[o]=l)})(u,p,C)};return u.toString=()=>c,i.serviceRegistry.set(c,u),u}},2585:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let a=o(8343);var c;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(c||(i.LogLevelEnum=c={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;let a=o(8460),c=o(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let u=new c.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let p=0,v=u.length;for(let C=0;C<v;++C){let _=u.charCodeAt(C);if(55296<=_&&_<=56319){if(++C>=v)return p+this.wcwidth(_);let l=u.charCodeAt(C);56320<=l&&l<=57343?_=1024*(_-55296)+l-56320+65536:p+=this.wcwidth(l)}p+=this.wcwidth(_)}return p}}}},t={};function n(s){var i=t[s];if(i!==void 0)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let i=n(9042),o=n(3236),a=n(844),c=n(5741),u=n(8285),p=n(7975),v=n(7090),C=["cols","rows"];class _ extends a.Disposable{constructor(h){super(),this._core=this.register(new o.Terminal(h)),this._addonManager=this.register(new c.AddonManager),this._publicOptions=Object.assign({},this._core.options);let d=g=>this._core.options[g],f=(g,y)=>{this._checkReadonlyOptions(g),this._core.options[g]=y};for(let g in this._core.options){let y={get:d.bind(this,g),set:f.bind(this,g)};Object.defineProperty(this._publicOptions,g,y)}}_checkReadonlyOptions(h){if(C.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let h=this._core.coreService.decPrivateModes,d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(let d in h)this._publicOptions[d]=h[d]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,d){this._verifyIntegers(h,d),this._core.resize(h,d)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var d,f,g;return this._checkProposedApi(),this._verifyPositiveIntegers((d=h.x)!==null&&d!==void 0?d:0,(f=h.width)!==null&&f!==void 0?f:0,(g=h.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,d,f){this._verifyIntegers(h,d,f),this._core.select(h,d,f)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,d){this._verifyIntegers(h,d),this._core.selectLines(h,d)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,d){this._core.write(h,d)}writeln(h,d){this._core.write(h),this._core.write(`\r
`,d)}paste(h){this._core.paste(h)}refresh(h,d){this._verifyIntegers(h,d),this._core.refresh(h,d)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(let d of h)if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(let d of h)if(d&&(d===1/0||isNaN(d)||d%1!=0||d<0))throw new Error("This API only accepts positive integers")}}s.Terminal=_})(),r})())});var Rf=kc((bs,Tc)=>{"use strict";(function(e,t){typeof bs=="object"&&typeof Tc=="object"?Tc.exports=t():typeof define=="function"&&define.amd?define([],t):typeof bs=="object"?bs.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let s=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),a=Math.max(0,parseInt(i.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),u=o-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),p=a-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-s;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(u/r.css.cell.height))}}}})(),e})())});function Nc(e,t){return Object.is(e,t)}var _e=null,$r=!1,Ns=1,en=Symbol("SIGNAL");function ce(e){let t=_e;return _e=e,t}function Lc(){return _e}var Vr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pc(e){if($r)throw new Error("");if(_e===null)return;_e.consumerOnSignalRead(e);let t=_e.nextProducerIndex++;if(Wr(_e),t<_e.producerNode.length&&_e.producerNode[t]!==e&&Kn(_e)){let n=_e.producerNode[t];zr(n,_e.producerIndexOfThis[t])}_e.producerNode[t]!==e&&(_e.producerNode[t]=e,_e.producerIndexOfThis[t]=Kn(_e)?Hc(e,_e,t):0),_e.producerLastReadVersion[t]=e.version}function Vf(){Ns++}function Fc(e){if(!(Kn(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Ns)){if(!e.producerMustRecompute(e)&&!Ps(e)){Os(e);return}e.producerRecomputeValue(e),Os(e)}}function Bc(e){if(e.liveConsumerNode===void 0)return;let t=$r;$r=!0;try{for(let n of e.liveConsumerNode)n.dirty||Wf(n)}finally{$r=t}}function zf(){return _e?.consumerAllowSignalWrites!==!1}function Wf(e){e.dirty=!0,Bc(e),e.consumerMarkedDirty?.(e)}function Os(e){e.dirty=!1,e.lastCleanEpoch=Ns}function Ls(e){return e&&(e.nextProducerIndex=0),ce(e)}function jc(e,t){if(ce(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Kn(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)zr(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ps(e){Wr(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Fc(n),r!==n.version))return!0}return!1}function Fs(e){if(Wr(e),Kn(e))for(let t=0;t<e.producerNode.length;t++)zr(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Hc(e,t,n){if(Uc(e),e.liveConsumerNode.length===0&&$c(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Hc(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function zr(e,t){if(Uc(e),e.liveConsumerNode.length===1&&$c(e))for(let r=0;r<e.producerNode.length;r++)zr(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];Wr(s),s.producerIndexOfThis[r]=t}}function Kn(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Wr(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Uc(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function $c(e){return e.producerNode!==void 0}function qf(){throw new Error}var Vc=qf;function Gf(){Vc()}function zc(e){Vc=e}var Kf=null;function Wc(e,t){zf()||Gf(),e.equal(e.value,t)||(e.value=t,Zf(e))}var qc=pe(z({},Vr),{equal:Nc,value:void 0});function Zf(e){e.version++,Vf(),Bc(e),Kf?.()}function Z(e){return typeof e=="function"}function tn(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qr=tn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,s)=>`${s+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ve=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(i){t=i instanceof qr?i.errors:[i]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let i of s)try{Gc(i)}catch(o){t=t??[],o instanceof qr?t=[...t,...o.errors]:t.push(o)}}if(t)throw new qr(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Gc(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Zn(n,t)}remove(t){let{_finalizers:n}=this;n&&Zn(n,t),t instanceof e&&t._removeParent(this)}};ve.EMPTY=(()=>{let e=new ve;return e.closed=!0,e})();var Bs=ve.EMPTY;function Gr(e){return e instanceof ve||e&&"closed"in e&&Z(e.remove)&&Z(e.add)&&Z(e.unsubscribe)}function Gc(e){Z(e)?e():e.unsubscribe()}var Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var nn={setTimeout(e,t,...n){let{delegate:r}=nn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=nn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Kr(e){nn.setTimeout(()=>{let{onUnhandledError:t}=Ye;if(t)t(e);else throw e})}function Yn(){}var Kc=js("C",void 0,void 0);function Zc(e){return js("E",void 0,e)}function Yc(e){return js("N",e,void 0)}function js(e,t,n){return{kind:e,value:t,error:n}}var Pt=null;function rn(e){if(Ye.useDeprecatedSynchronousErrorHandling){let t=!Pt;if(t&&(Pt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Pt;if(Pt=null,n)throw r}}else e()}function Qc(e){Ye.useDeprecatedSynchronousErrorHandling&&Pt&&(Pt.errorThrown=!0,Pt.error=e)}var Ft=class extends ve{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Gr(t)&&t.add(this)):this.destination=Xf}static create(t,n,r){return new sn(t,n,r)}next(t){this.isStopped?Us(Yc(t),this):this._next(t)}error(t){this.isStopped?Us(Zc(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Us(Kc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Yf=Function.prototype.bind;function Hs(e,t){return Yf.call(e,t)}var $s=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Zr(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Zr(r)}else Zr(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Zr(n)}}},sn=class extends Ft{constructor(t,n,r){super();let s;if(Z(t)||!t)s={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Ye.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Hs(t.next,i),error:t.error&&Hs(t.error,i),complete:t.complete&&Hs(t.complete,i)}):s=t}this.destination=new $s(s)}};function Zr(e){Ye.useDeprecatedSynchronousErrorHandling?Qc(e):Kr(e)}function Qf(e){throw e}function Us(e,t){let{onStoppedNotification:n}=Ye;n&&nn.setTimeout(()=>n(e,t))}var Xf={closed:!0,next:Yn,error:Qf,complete:Yn};var on=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Le(e){return e}function Vs(...e){return zs(e)}function zs(e){return e.length===0?Le:e.length===1?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}var he=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,s){let i=ep(n)?n:new sn(n,r,s);return rn(()=>{let{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xc(r),new r((s,i)=>{let o=new sn({next:a=>{try{n(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[on](){return this}pipe(...n){return zs(n)(this)}toPromise(n){return n=Xc(n),new n((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return e.create=t=>new e(t),e})();function Xc(e){var t;return(t=e??Ye.Promise)!==null&&t!==void 0?t:Promise}function Jf(e){return e&&Z(e.next)&&Z(e.error)&&Z(e.complete)}function ep(e){return e&&e instanceof Ft||Jf(e)&&Gr(e)}function Ws(e){return Z(e?.lift)}function oe(e){return t=>{if(Ws(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(e,t,n,r,s){return new qs(e,t,n,r,s)}var qs=class extends Ft{constructor(t,n,r,s,i,o){super(t),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=s?function(a){try{s(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function an(){return oe((e,t)=>{let n=null;e._refCount++;let r=ae(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var cn=class extends he{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ws(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ve;let n=this.getSubject();t.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ve.EMPTY)}return t}refCount(){return an()(this)}};var Jc=tn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class e extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Jc}next(n){rn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){rn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){rn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:s,observers:i}=this;return r||s?Bs:(this.currentObservers=null,i.push(n),new ve(()=>{this.currentObservers=null,Zn(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return e.create=(t,n)=>new Yr(t,n),e})(),Yr=class extends Te{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Bs}};var be=class extends Te{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Pe=new he(e=>e.complete());function el(e){return e&&Z(e.schedule)}function tl(e){return e[e.length-1]}function nl(e){return Z(tl(e))?e.pop():void 0}function bt(e){return el(tl(e))?e.pop():void 0}function il(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(p){try{u(r.next(p))}catch(v){o(v)}}function c(p){try{u(r.throw(p))}catch(v){o(v)}}function u(p){p.done?i(p.value):s(p.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function rl(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(e){return this instanceof Bt?(this.v=e,this):new Bt(e)}function sl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(_){return function(l){return Promise.resolve(l).then(_,v)}}function a(_,l){r[_]&&(s[_]=function(h){return new Promise(function(d,f){i.push([_,h,d,f])>1||c(_,h)})},l&&(s[_]=l(s[_])))}function c(_,l){try{u(r[_](l))}catch(h){C(i[0][3],h)}}function u(_){_.value instanceof Bt?Promise.resolve(_.value.v).then(p,v):C(i[0][2],_)}function p(_){c("next",_)}function v(_){c("throw",_)}function C(_,l){_(l),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ol(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof rl=="function"?rl(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}var Qr=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xr(e){return Z(e?.then)}function Jr(e){return Z(e[on])}function ei(e){return Symbol.asyncIterator&&Z(e?.[Symbol.asyncIterator])}function ti(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tp(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ni=tp();function ri(e){return Z(e?.[ni])}function ii(e){return sl(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:s}=yield Bt(n.read());if(s)return yield Bt(void 0);yield yield Bt(r)}}finally{n.releaseLock()}})}function si(e){return Z(e?.getReader)}function we(e){if(e instanceof he)return e;if(e!=null){if(Jr(e))return np(e);if(Qr(e))return rp(e);if(Xr(e))return ip(e);if(ei(e))return al(e);if(ri(e))return sp(e);if(si(e))return op(e)}throw ti(e)}function np(e){return new he(t=>{let n=e[on]();if(Z(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rp(e){return new he(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function ip(e){return new he(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Kr)})}function sp(e){return new he(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function al(e){return new he(t=>{ap(e,t).catch(n=>t.error(n))})}function op(e){return al(ii(e))}function ap(e,t){var n,r,s,i;return il(this,void 0,void 0,function*(){try{for(n=ol(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}t.complete()})}function Oe(e,t,n,r=0,s=!1){let i=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!s)return i}function oi(e,t=0){return oe((n,r)=>{n.subscribe(ae(r,s=>Oe(r,e,()=>r.next(s),t),()=>Oe(r,e,()=>r.complete(),t),s=>Oe(r,e,()=>r.error(s),t)))})}function ai(e,t=0){return oe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function cl(e,t){return we(e).pipe(ai(t),oi(t))}function ll(e,t){return we(e).pipe(ai(t),oi(t))}function ul(e,t){return new he(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function dl(e,t){return new he(n=>{let r;return Oe(n,t,()=>{r=e[ni](),Oe(n,t,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){n.error(o);return}i?n.complete():n.next(s)},0,!0)}),()=>Z(r?.return)&&r.return()})}function ci(e,t){if(!e)throw new Error("Iterable cannot be null");return new he(n=>{Oe(n,t,()=>{let r=e[Symbol.asyncIterator]();Oe(n,t,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function hl(e,t){return ci(ii(e),t)}function fl(e,t){if(e!=null){if(Jr(e))return cl(e,t);if(Qr(e))return ul(e,t);if(Xr(e))return ll(e,t);if(ei(e))return ci(e,t);if(ri(e))return dl(e,t);if(si(e))return hl(e,t)}throw ti(e)}function ye(e,t){return t?fl(e,t):we(e)}function X(...e){let t=bt(e);return ye(e,t)}function ln(e,t){let n=Z(e)?e:()=>e,r=s=>s.error(n());return new he(t?s=>t.schedule(r,0,s):r)}function Gs(e){return!!e&&(e instanceof he||Z(e.lift)&&Z(e.subscribe))}var gt=tn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(e,t){return oe((n,r)=>{let s=0;n.subscribe(ae(r,i=>{r.next(e.call(t,i,s++))}))})}var{isArray:cp}=Array;function lp(e,t){return cp(t)?e(...t):e(t)}function pl(e){return ie(t=>lp(e,t))}var{isArray:up}=Array,{getPrototypeOf:dp,prototype:hp,keys:fp}=Object;function gl(e){if(e.length===1){let t=e[0];if(up(t))return{args:t,keys:null};if(pp(t)){let n=fp(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function pp(e){return e&&typeof e=="object"&&dp(e)===hp}function ml(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}function li(...e){let t=bt(e),n=nl(e),{args:r,keys:s}=gl(e);if(r.length===0)return ye([],t);let i=new he(gp(r,t,s?o=>ml(s,o):Le));return n?i.pipe(pl(n)):i}function gp(e,t,n=Le){return r=>{vl(t,()=>{let{length:s}=e,i=new Array(s),o=s,a=s;for(let c=0;c<s;c++)vl(t,()=>{let u=ye(e[c],t),p=!1;u.subscribe(ae(r,v=>{i[c]=v,p||(p=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}function vl(e,t,n){e?Oe(n,e,t):t()}function _l(e,t,n,r,s,i,o,a){let c=[],u=0,p=0,v=!1,C=()=>{v&&!c.length&&!u&&t.complete()},_=h=>u<r?l(h):c.push(h),l=h=>{i&&t.next(h),u++;let d=!1;we(n(h,p++)).subscribe(ae(t,f=>{s?.(f),i?_(f):t.next(f)},()=>{d=!0},void 0,()=>{if(d)try{for(u--;c.length&&u<r;){let f=c.shift();o?Oe(t,o,()=>l(f)):l(f)}C()}catch(f){t.error(f)}}))};return e.subscribe(ae(t,_,()=>{v=!0,C()})),()=>{a?.()}}function Ce(e,t,n=1/0){return Z(t)?Ce((r,s)=>ie((i,o)=>t(r,i,s,o))(we(e(r,s))),n):(typeof t=="number"&&(n=t),oe((r,s)=>_l(r,s,e,n)))}function Ks(e=1/0){return Ce(Le,e)}function yl(){return Ks(1)}function un(...e){return yl()(ye(e,bt(e)))}function ui(e){return new he(t=>{we(e()).subscribe(t)})}function Qe(e,t){return oe((n,r)=>{let s=0;n.subscribe(ae(r,i=>e.call(t,i,s++)&&r.next(i)))})}function Et(e){return oe((t,n)=>{let r=null,s=!1,i;r=t.subscribe(ae(n,void 0,void 0,o=>{i=we(e(o,Et(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Cl(e,t,n,r,s){return(i,o)=>{let a=n,c=t,u=0;i.subscribe(ae(o,p=>{let v=u++;c=a?e(c,p,v):(a=!0,p),r&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}function dn(e,t){return Z(t)?Ce(e,t,1):Ce(e,1)}function It(e){return oe((t,n)=>{let r=!1;t.subscribe(ae(n,s=>{r=!0,n.next(s)},()=>{r||n.next(e),n.complete()}))})}function mt(e){return e<=0?()=>Pe:oe((t,n)=>{let r=0;t.subscribe(ae(n,s=>{++r<=e&&(n.next(s),e<=r&&n.complete())}))})}function Zs(e){return ie(()=>e)}function di(e=mp){return oe((t,n)=>{let r=!1;t.subscribe(ae(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(e())))})}function mp(){return new gt}function Qn(e){return oe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function vt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qe((s,i)=>e(s,i,r)):Le,mt(1),n?It(t):di(()=>new gt))}function hn(e){return e<=0?()=>Pe:oe((t,n)=>{let r=[];t.subscribe(ae(n,s=>{r.push(s),e<r.length&&r.shift()},()=>{for(let s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function Ys(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qe((s,i)=>e(s,i,r)):Le,hn(1),n?It(t):di(()=>new gt))}function Qs(e,t){return oe(Cl(e,t,arguments.length>=2,!0))}function Xs(...e){let t=bt(e);return oe((n,r)=>{(t?un(e,n,t):un(e,n)).subscribe(r)})}function Xe(e,t){return oe((n,r)=>{let s=null,i=0,o=!1,a=()=>o&&!s&&r.complete();n.subscribe(ae(r,c=>{s?.unsubscribe();let u=0,p=i++;we(e(c,p)).subscribe(s=ae(r,v=>r.next(t?t(c,v,p,u++):v),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Js(e){return oe((t,n)=>{we(e).subscribe(ae(n,()=>n.complete(),Yn)),!n.closed&&t.subscribe(n)})}function Ee(e,t,n){let r=Z(e)||t||n?{next:e,error:t,complete:n}:e;return r?oe((s,i)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;s.subscribe(ae(i,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Le}var G=class extends Error{code;constructor(t,n){super(zo(t,n)),this.code=t}};function zo(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var nu=Symbol("InputSignalNode#UNSET"),_p=pe(z({},qc),{transformFn:void 0,applyValueToInputSignal(e,t){Wc(e,t)}});function ru(e,t){let n=Object.create(_p);n.value=e,n.transformFn=t?.transform;function r(){if(Pc(n),n.value===nu)throw new G(-950,!1);return n.value}return r[en]=n,r}function Wo(e){return{toString:e}.toString()}function fe(e){for(let t in e)if(e[t]===fe)return t;throw Error("Could not find renamed property on target object.")}function Fe(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Fe).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Sl(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var yp=fe({__forward_ref__:fe});function iu(e){return e.__forward_ref__=iu,e.toString=function(){return Fe(this())},e}function We(e){return su(e)?e():e}function su(e){return typeof e=="function"&&e.hasOwnProperty(yp)&&e.__forward_ref__===iu}function Q(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ji(e){return wl(e,au)||wl(e,cu)}function ou(e){return ji(e)!==null}function wl(e,t){return e.hasOwnProperty(t)?e[t]:null}function Cp(e){let t=e&&(e[au]||e[cu]);return t||null}function Dl(e){return e&&(e.hasOwnProperty(bl)||e.hasOwnProperty(Sp))?e[bl]:null}var au=fe({\u0275prov:fe}),bl=fe({\u0275inj:fe}),cu=fe({ngInjectableDef:fe}),Sp=fe({ngInjectorDef:fe}),Y=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lu(e){return e&&!!e.\u0275providers}var wp=fe({\u0275cmp:fe}),Dp=fe({\u0275dir:fe}),bp=fe({\u0275pipe:fe}),Ep=fe({\u0275mod:fe}),vi=fe({\u0275fac:fe}),tr=fe({__NG_ELEMENT_ID__:fe}),El=fe({__NG_ENV_ID__:fe});function uu(e){return typeof e=="string"?e:e==null?"":String(e)}function Ip(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():uu(e)}function Mp(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new G(-200,e)}function qo(e,t){throw new G(-201,!1)}var te=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(te||{}),ao;function du(){return ao}function ze(e){let t=ao;return ao=e,t}function hu(e,t,n){let r=ji(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(t!==void 0)return t;qo(e,"Injector")}var Tp={},nr=Tp,xp="__NG_DI_FLAG__",_i="ngTempTokenPath",Ap="ngTokenPath",Rp=/\n/gm,kp="\u0275",Il="__source",mn;function Op(){return mn}function Mt(e){let t=mn;return mn=e,t}function Np(e,t=te.Default){if(mn===void 0)throw new G(-203,!1);return mn===null?hu(e,void 0,t):mn.get(e,t&te.Optional?null:void 0,t)}function se(e,t=te.Default){return(du()||Np)(We(e),t)}function $(e,t=te.Default){return se(e,Hi(t))}function Hi(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function co(e){let t=[];for(let n=0;n<e.length;n++){let r=We(e[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let s,i=te.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Lp(a);typeof c=="number"?c===-1?s=a.token:i|=c:s=a}t.push(se(s,i))}else t.push(se(r))}return t}function Lp(e){return e[xp]}function Pp(e,t,n,r){let s=e[_i];throw t[Il]&&s.unshift(t[Il]),e.message=Fp(`
`+e.message,s,n,r),e[Ap]=s,e[_i]=null,e}function Fp(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==kp?e.slice(2):e;let s=Fe(t);if(Array.isArray(t))s=t.map(Fe).join(" -> ");else if(typeof t=="object"){let i=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];i.push(o+":"+(typeof a=="string"?JSON.stringify(a):Fe(a)))}s=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(Rp,`
  `)}`}function _n(e,t){let n=e.hasOwnProperty(vi);return n?e[vi]:null}function Go(e,t){e.forEach(n=>Array.isArray(n)?Go(n,t):t(n))}function fu(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function yi(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var rr={},yn=[],Cn=new Y(""),pu=new Y("",-1),gu=new Y(""),Ci=class{get(t,n=nr){if(n===nr){let r=new Error(`NullInjectorError: No provider for ${Fe(t)}!`);throw r.name="NullInjectorError",r}return n}};function mu(e,t){let n=e[Ep]||null;if(!n&&t===!0)throw new Error(`Type ${Fe(e)} does not have '\u0275mod' property.`);return n}function Ut(e){return e[wp]||null}function vu(e){return e[Dp]||null}function _u(e){return e[bp]||null}function yu(e){let t=Ut(e)||vu(e)||_u(e);return t!==null?t.standalone:!1}function Ui(e){return{\u0275providers:e}}function Bp(...e){return{\u0275providers:Cu(!0,e),\u0275fromNgModule:!0}}function Cu(e,...t){let n=[],r=new Set,s,i=o=>{n.push(o)};return Go(t,o=>{let a=o;lo(a,i,[],r)&&(s||=[],s.push(a))}),s!==void 0&&Su(s,i),n}function Su(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:s}=e[n];Ko(s,i=>{t(i,r)})}}function lo(e,t,n,r){if(e=We(e),!e)return!1;let s=null,i=Dl(e),o=!i&&Ut(e);if(!i&&!o){let c=e.ngModule;if(i=Dl(c),i)s=c;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)lo(u,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(s);let u;try{Go(i.imports,p=>{lo(p,t,n,r)&&(u||=[],u.push(p))})}finally{}u!==void 0&&Su(u,t)}if(!a){let u=_n(s)||(()=>new s);t({provide:s,useFactory:u,deps:yn},s),t({provide:gu,useValue:s,multi:!0},s),t({provide:Cn,useValue:()=>se(s),multi:!0},s)}let c=i.providers;if(c!=null&&!a){let u=e;Ko(c,p=>{t(p,u)})}}else return!1;return s!==e&&e.providers!==void 0}function Ko(e,t){for(let n of e)lu(n)&&(n=n.\u0275providers),Array.isArray(n)?Ko(n,t):t(n)}var jp=fe({provide:String,useValue:fe});function wu(e){return e!==null&&typeof e=="object"&&jp in e}function Hp(e){return!!(e&&e.useExisting)}function Up(e){return!!(e&&e.useFactory)}function uo(e){return typeof e=="function"}var $i=new Y(""),hi={},$p={},eo;function Zo(){return eo===void 0&&(eo=new Ci),eo}var qe=class{},ir=class extends qe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,fo(t,o=>this.processProvider(o)),this.records.set(pu,fn(void 0,this)),s.has("environment")&&this.records.set(qe,fn(void 0,this));let i=this.records.get($i);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(gu,yn,te.Self))}destroy(){Jn(this),this._destroyed=!0;let t=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(t)}}onDestroy(t){return Jn(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Jn(this);let n=Mt(this),r=ze(void 0),s;try{return t()}finally{Mt(n),ze(r)}}get(t,n=nr,r=te.Default){if(Jn(this),t.hasOwnProperty(El))return t[El](this);r=Hi(r);let s,i=Mt(this),o=ze(void 0);try{if(!(r&te.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=Kp(t)&&ji(t);u&&this.injectableDefInScope(u)?c=fn(ho(t),hi):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&te.Self?Zo():this.parent;return n=r&te.Optional&&n===nr?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[_i]=a[_i]||[]).unshift(Fe(t)),i)throw a;return Pp(a,t,"R3InjectorError",this.source)}else throw a}finally{ze(o),Mt(i)}}resolveInjectorInitializers(){let t=ce(null),n=Mt(this),r=ze(void 0),s;try{let i=this.get(Cn,yn,te.Self);for(let o of i)o()}finally{Mt(n),ze(r),ce(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Fe(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=We(t);let n=uo(t)?t:We(t&&t.provide),r=zp(t);if(!uo(t)&&t.multi===!0){let s=this.records.get(n);s||(s=fn(void 0,hi,!0),s.factory=()=>co(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=ce(null);try{return n.value===hi&&(n.value=$p,n.value=n.factory()),typeof n.value=="object"&&n.value&&Gp(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=We(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ho(e){let t=ji(e),n=t!==null?t.factory:_n(e);if(n!==null)return n;if(e instanceof Y)throw new G(204,!1);if(e instanceof Function)return Vp(e);throw new G(204,!1)}function Vp(e){if(e.length>0)throw new G(204,!1);let n=Cp(e);return n!==null?()=>n.factory(e):()=>new e}function zp(e){if(wu(e))return fn(void 0,e.useValue);{let t=Wp(e);return fn(t,hi)}}function Wp(e,t,n){let r;if(uo(e)){let s=We(e);return _n(s)||ho(s)}else if(wu(e))r=()=>We(e.useValue);else if(Up(e))r=()=>e.useFactory(...co(e.deps||[]));else if(Hp(e))r=()=>se(We(e.useExisting));else{let s=We(e&&(e.useClass||e.provide));if(qp(e))r=()=>new s(...co(e.deps));else return _n(s)||ho(s)}return r}function Jn(e){if(e.destroyed)throw new G(205,!1)}function fn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function qp(e){return!!e.deps}function Gp(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Kp(e){return typeof e=="function"||typeof e=="object"&&e instanceof Y}function fo(e,t){for(let n of e)Array.isArray(n)?fo(n,t):n&&lu(n)?fo(n.\u0275providers,t):t(n)}function tt(e,t){e instanceof ir&&Jn(e);let n,r=Mt(e),s=ze(void 0);try{return t()}finally{Mt(r),ze(s)}}function Zp(){return du()!==void 0||Op()!=null}function Yp(e){return typeof e=="function"}var _t=0,re=1,K=2,Ae=3,et=4,nt=5,Si=6,wi=7,Ge=8,Sn=9,xt=10,He=11,sr=12,Ml=13,Mn=14,ct=15,wn=16,pn=17,Dn=18,Vi=19,Du=20,Tt=21,to=22,Di=23,Be=24,lt=25,bu=1;var $t=7,bi=8,Ei=9,je=10,Ii=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Ii||{});function jt(e){return Array.isArray(e)&&typeof e[bu]=="object"}function yt(e){return Array.isArray(e)&&e[bu]===!0}function Eu(e){return(e.flags&4)!==0}function Yo(e){return e.componentOffset>-1}function Qo(e){return(e.flags&1)===1}function dr(e){return!!e.template}function po(e){return(e[K]&512)!==0}var go=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Iu(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Xo=(()=>{let e=()=>Mu;return e.ngInherit=!0,e})();function Mu(e){return e.type.prototype.ngOnChanges&&(e.setInput=Xp),Qp}function Qp(){let e=xu(this),t=e?.current;if(t){let n=e.previous;if(n===rr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Xp(e,t,n,r,s){let i=this.declaredInputs[r],o=xu(e)||Jp(e,{previous:rr,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[i];a[i]=new go(u&&u.currentValue,n,c===rr),Iu(e,t,s,n)}var Tu="__ngSimpleChanges__";function xu(e){return e[Tu]||null}function Jp(e,t){return e[Tu]=t}var Tl=null;var ot=function(e,t,n){Tl?.(e,t,n)},eg="svg",tg="math";function ut(e){for(;Array.isArray(e);)e=e[_t];return e}function ng(e,t){return ut(t[e])}function ht(e,t){return ut(t[e.index])}function Au(e,t){return e.data[t]}function Tn(e,t){let n=t[e];return jt(n)?n:n[_t]}function Jo(e){return(e[K]&128)===128}function rg(e){return yt(e[Ae])}function Mi(e,t){return t==null?null:e[t]}function Ru(e){e[pn]=0}function ea(e){e[K]&1024||(e[K]|=1024,Jo(e)&&Wi(e))}function ig(e,t){for(;e>0;)t=t[Mn],e--;return t}function zi(e){return!!(e[K]&9216||e[Be]?.dirty)}function mo(e){e[xt].changeDetectionScheduler?.notify(9),e[K]&64&&(e[K]|=1024),zi(e)&&Wi(e)}function Wi(e){e[xt].changeDetectionScheduler?.notify(0);let t=Vt(e);for(;t!==null&&!(t[K]&8192||(t[K]|=8192,!Jo(t)));)t=Vt(t)}function ku(e,t){if((e[K]&256)===256)throw new G(911,!1);e[Tt]===null&&(e[Tt]=[]),e[Tt].push(t)}function sg(e,t){if(e[Tt]===null)return;let n=e[Tt].indexOf(t);n!==-1&&e[Tt].splice(n,1)}function Vt(e){let t=e[Ae];return yt(t)?t[Ae]:t}var le={lFrame:Vu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vo=!1;function og(){return le.lFrame.elementDepthCount}function ag(){le.lFrame.elementDepthCount++}function cg(){le.lFrame.elementDepthCount--}function Ou(){return le.bindingsEnabled}function lg(){return le.skipHydrationRootTNode!==null}function ug(e){return le.skipHydrationRootTNode===e}function dg(){le.skipHydrationRootTNode=null}function Ie(){return le.lFrame.lView}function xn(){return le.lFrame.tView}function Nu(e){return le.lFrame.contextLView=e,e[Ge]}function Lu(e){return le.lFrame.contextLView=null,e}function ft(){let e=Pu();for(;e!==null&&e.type===64;)e=e.parent;return e}function Pu(){return le.lFrame.currentTNode}function hg(){let e=le.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function hr(e,t){let n=le.lFrame;n.currentTNode=e,n.isParent=t}function Fu(){return le.lFrame.isParent}function fg(){le.lFrame.isParent=!1}function Bu(){return vo}function xl(e){let t=vo;return vo=e,t}function pg(e){return le.lFrame.bindingIndex=e}function ju(){return le.lFrame.bindingIndex++}function gg(){return le.lFrame.inI18n}function mg(e,t){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=e,_o(t)}function vg(){return le.lFrame.currentDirectiveIndex}function _o(e){le.lFrame.currentDirectiveIndex=e}function Hu(e){le.lFrame.currentQueryIndex=e}function _g(e){let t=e[re];return t.type===2?t.declTNode:t.type===1?e[nt]:null}function Uu(e,t,n){if(n&te.SkipSelf){let s=t,i=e;for(;s=s.parent,s===null&&!(n&te.Host);)if(s=_g(i),s===null||(i=i[Mn],s.type&10))break;if(s===null)return!1;t=s,e=i}let r=le.lFrame=$u();return r.currentTNode=t,r.lView=e,!0}function ta(e){let t=$u(),n=e[re];le.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function $u(){let e=le.lFrame,t=e===null?null:e.child;return t===null?Vu(e):t}function Vu(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function zu(){let e=le.lFrame;return le.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Wu=zu;function na(){let e=zu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function yg(e){return(le.lFrame.contextLView=ig(e,le.lFrame.contextLView))[Ge]}function ra(){return le.lFrame.selectedIndex}function zt(e){le.lFrame.selectedIndex=e}function Cg(){return le.lFrame.currentNamespace}var qu=!0;function ia(){return qu}function sa(e){qu=e}function Sg(e,t,n){let{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){let o=Mu(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function oa(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:p}=i;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function fi(e,t,n){Gu(e,t,3,n)}function pi(e,t,n,r){(e[K]&3)===n&&Gu(e,t,n,r)}function no(e,t){let n=e[K];(n&3)===t&&(n&=16383,n+=1,e[K]=n)}function Gu(e,t,n,r){let s=r!==void 0?e[pn]&65535:0,i=r??-1,o=t.length-1,a=0;for(let c=s;c<o;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[pn]+=65536),(a<i||i==-1)&&(wg(e,n,t,c),e[pn]=(e[pn]&4294901760)+c+2),c++}function Al(e,t){ot(4,e,t);let n=ce(null);try{t.call(e)}finally{ce(n),ot(5,e,t)}}function wg(e,t,n,r){let s=n[r]<0,i=n[r+1],o=s?-n[r]:n[r],a=e[o];s?e[K]>>14<e[pn]>>16&&(e[K]&3)===t&&(e[K]+=16384,Al(a,i)):Al(a,i)}var vn=-1,or=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function Dg(e){return e instanceof or}function bg(e){return(e.flags&8)!==0}function Eg(e){return(e.flags&16)!==0}function yo(e,t,n){let r=0;for(;r<n.length;){let s=n[r];if(typeof s=="number"){if(s!==0)break;r++;let i=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,i)}else{let i=s,o=n[++r];Mg(i)?e.setProperty(t,i,o):e.setAttribute(t,i,o),r++}}return r}function Ig(e){return e===3||e===4||e===6}function Mg(e){return e.charCodeAt(0)===64}function aa(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?n=s:n===0||(n===-1||n===2?Rl(e,n,s,null,t[++r]):Rl(e,n,s,null,null))}}return e}function Rl(e,t,n,r,s){let i=0,o=e.length;if(t===-1)o=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){s!==null&&(e[i+1]=s);return}else if(r===e[i+1]){e[i+2]=s;return}}i++,r!==null&&i++,s!==null&&i++}o!==-1&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),s!==null&&e.splice(i++,0,s)}var ro={},Co=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Hi(r);let s=this.injector.get(t,ro,r);return s!==ro||n===ro?s:this.parentInjector.get(t,n,r)}};function Ku(e){return e!==vn}function Ti(e){return e&32767}function Tg(e){return e>>16}function xi(e,t){let n=Tg(e),r=t;for(;n>0;)r=r[Mn],n--;return r}var So=!0;function kl(e){let t=So;return So=e,t}var xg=256,Zu=xg-1,Yu=5,Ag=0,at={};function Rg(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(tr)&&(r=n[tr]),r==null&&(r=n[tr]=Ag++);let s=r&Zu,i=1<<s;t.data[e+(s>>Yu)]|=i}function Qu(e,t){let n=Xu(e,t);if(n!==-1)return n;let r=t[re];r.firstCreatePass&&(e.injectorIndex=t.length,io(r.data,e),io(t,null),io(r.blueprint,null));let s=ca(e,t),i=e.injectorIndex;if(Ku(s)){let o=Ti(s),a=xi(s,t),c=a[re].data;for(let u=0;u<8;u++)t[i+u]=a[o+u]|c[o+u]}return t[i+8]=s,i}function io(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Xu(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function ca(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;s!==null;){if(r=rd(s),r===null)return vn;if(n++,s=s[Mn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vn}function kg(e,t,n){Rg(e,t,n)}function Ju(e,t,n){if(n&te.Optional||e!==void 0)return e;qo(t,"NodeInjector")}function ed(e,t,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let s=e[Sn],i=ze(void 0);try{return s?s.get(t,r,n&te.Optional):hu(t,r,n&te.Optional)}finally{ze(i)}}return Ju(r,t,n)}function td(e,t,n,r=te.Default,s){if(e!==null){if(t[K]&2048&&!(r&te.Self)){let o=Fg(e,t,n,r,at);if(o!==at)return o}let i=nd(e,t,n,r,at);if(i!==at)return i}return ed(t,n,r,s)}function nd(e,t,n,r,s){let i=Lg(n);if(typeof i=="function"){if(!Uu(t,e,r))return r&te.Host?Ju(s,n,r):ed(t,n,r,s);try{let o;if(o=i(r),o==null&&!(r&te.Optional))qo(n);else return o}finally{Wu()}}else if(typeof i=="number"){let o=null,a=Xu(e,t),c=vn,u=r&te.Host?t[ct][nt]:null;for((a===-1||r&te.SkipSelf)&&(c=a===-1?ca(e,t):t[a+8],c===vn||!Nl(r,!1)?a=-1:(o=t[re],a=Ti(c),t=xi(c,t)));a!==-1;){let p=t[re];if(Ol(i,a,p.data)){let v=Og(a,t,n,o,r,u);if(v!==at)return v}c=t[a+8],c!==vn&&Nl(r,t[re].data[a+8]===u)&&Ol(i,a,t)?(o=p,a=Ti(c),t=xi(c,t)):a=-1}}return s}function Og(e,t,n,r,s,i){let o=t[re],a=o.data[e+8],c=r==null?Yo(a)&&So:r!=o&&(a.type&3)!==0,u=s&te.Host&&i===a,p=Ng(a,o,n,c,u);return p!==null?ar(t,o,p,a):at}function Ng(e,t,n,r,s){let i=e.providerIndexes,o=t.data,a=i&1048575,c=e.directiveStart,u=e.directiveEnd,p=i>>20,v=r?a:a+p,C=s?a+p:u;for(let _=v;_<C;_++){let l=o[_];if(_<c&&n===l||_>=c&&l.type===n)return _}if(s){let _=o[c];if(_&&dr(_)&&_.type===n)return c}return null}function ar(e,t,n,r){let s=e[n],i=t.data;if(Dg(s)){let o=s;o.resolving&&Mp(Ip(i[n]));let a=kl(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?ze(o.injectImpl):null,p=Uu(e,r,te.Default);try{s=e[n]=o.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&Sg(n,i[n],t)}finally{u!==null&&ze(u),kl(a),o.resolving=!1,Wu()}}return s}function Lg(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(tr)?e[tr]:void 0;return typeof t=="number"?t>=0?t&Zu:Pg:t}function Ol(e,t,n){let r=1<<e;return!!(n[t+(e>>Yu)]&r)}function Nl(e,t){return!(e&te.Self)&&!(e&te.Host&&t)}var Ht=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return td(this._tNode,this._lView,t,Hi(r),n)}};function Pg(){return new Ht(ft(),Ie())}function la(e){return Wo(()=>{let t=e.prototype.constructor,n=t[vi]||wo(t),r=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){let i=s[vi]||wo(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function wo(e){return su(e)?()=>{let t=wo(We(e));return t&&t()}:_n(e)}function Fg(e,t,n,r,s){let i=e,o=t;for(;i!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=nd(i,o,n,r|te.Self,at);if(a!==at)return a;let c=i.parent;if(!c){let u=o[Du];if(u){let p=u.get(n,at,r);if(p!==at)return p}c=rd(o),o=o[Mn]}i=c}return s}function rd(e){let t=e[re],n=t.type;return n===2?t.declTNode:n===1?e[nt]:null}function Ll(e,t=null,n=null,r){let s=id(e,t,n,r);return s.resolveInjectorInitializers(),s}function id(e,t=null,n=null,r,s=new Set){let i=[n||yn,Bp(e)];return r=r||(typeof e=="object"?void 0:Fe(e)),new ir(i,t||Zo(),r||null,s)}var At=class e{static THROW_IF_NOT_FOUND=nr;static NULL=new Ci;static create(t,n){if(Array.isArray(t))return Ll({name:""},n,t,"");{let r=t.name??"";return Ll({name:r},t.parent,t.providers,r)}}static \u0275prov=Q({token:e,providedIn:"any",factory:()=>se(pu)});static __NG_ELEMENT_ID__=-1};var Bg=new Y("");Bg.__NG_ELEMENT_ID__=e=>{let t=ft();if(t===null)throw new G(204,!1);if(t.type&2)return t.value;if(e&te.Optional)return null;throw new G(204,!1)};var sd=!1,od=(()=>{class e{static __NG_ELEMENT_ID__=jg;static __NG_ENV_ID__=n=>n}return e})(),Do=class extends od{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return ku(this._lView,t),()=>sg(this._lView,t)}};function jg(){return new Do(Ie())}var cr=class{},qi=new Y("",{providedIn:"root",factory:()=>!1});var ad=new Y(""),cd=new Y(""),An=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new be(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})();var bo=class extends Te{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Zp()&&(this.destroyRef=$(od,{optional:!0})??void 0,this.pendingTasks=$(An,{optional:!0})??void 0)}emit(t){let n=ce(null);try{super.next(t)}finally{ce(n)}}subscribe(t,n,r){let s=t,i=n||(()=>null),o=r;if(t&&typeof t=="object"){let c=t;s=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:s,error:i,complete:o});return t instanceof ve&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},xe=bo;function Ai(...e){}function ld(e){let t,n;function r(){e=Ai;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Pl(e){return queueMicrotask(()=>e()),()=>{e=Ai}}var ua="isAngularZone",Ri=ua+"_ID",Hg=0,Se=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new xe(!1);onMicrotaskEmpty=new xe(!1);onStable=new xe(!1);onError=new xe(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:i=sd}=t;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&r,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=i,Vg(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ua)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new G(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){let i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,t,Ug,Ai,Ai);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Ug={};function da(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $g(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){ld(()=>{e.callbackScheduled=!1,Eo(e),e.isCheckStableRunning=!0,da(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Eo(e)}function Vg(e){let t=()=>{$g(e)},n=Hg++;e._inner=e._inner.fork({name:"angular",properties:{[ua]:!0,[Ri]:n,[Ri+n]:!0},onInvokeTask:(r,s,i,o,a,c)=>{if(zg(c))return r.invokeTask(i,o,a,c);try{return Fl(e),r.invokeTask(i,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Bl(e)}},onInvoke:(r,s,i,o,a,c,u)=>{try{return Fl(e),r.invoke(i,o,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Wg(c)&&t(),Bl(e)}},onHasTask:(r,s,i,o)=>{r.hasTask(i,o),s===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Eo(e),da(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,s,i,o)=>(r.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Eo(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Fl(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Bl(e){e._nesting--,da(e)}var Io=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new xe;onMicrotaskEmpty=new xe;onStable=new xe;onError=new xe;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}};function zg(e){return ud(e,"__ignore_ng_zone__")}function Wg(e){return ud(e,"__scheduler_tick__")}function ud(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Rt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},qg=new Y("",{providedIn:"root",factory:()=>{let e=$(Se),t=$(Rt);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function jl(e,t){return ru(e,t)}function Gg(e){return ru(nu,e)}var dd=(jl.required=Gg,jl);function Kg(){return ha(ft(),Ie())}function ha(e,t){return new Gi(ht(e,t))}var Gi=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Kg}return e})();function hd(e){return(e.flags&128)===128}var fd=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(fd||{}),pd=new Map,Zg=0;function Yg(){return Zg++}function Qg(e){pd.set(e[Vi],e)}function Mo(e){pd.delete(e[Vi])}var Hl="__ngContext__";function Wt(e,t){jt(t)?(e[Hl]=t[Vi],Qg(t)):e[Hl]=t}function gd(e){return vd(e[sr])}function md(e){return vd(e[et])}function vd(e){for(;e!==null&&!yt(e);)e=e[et];return e}var To;function _d(e){To=e}function Xg(){if(To!==void 0)return To;if(typeof document<"u")return document;throw new G(210,!1)}var fa=new Y("",{providedIn:"root",factory:()=>Jg}),Jg="ng",pa=new Y(""),Rn=new Y("",{providedIn:"platform",factory:()=>"unknown"});var ga=new Y("",{providedIn:"root",factory:()=>Xg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var em="h",tm="b";var yd=!1,nm=new Y("",{providedIn:"root",factory:()=>yd});var Cd=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Cd||{}),Sd=new Y(""),Ul=new Set;function Ki(e){Ul.has(e)||(Ul.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var rm=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})();var im=()=>null;function ma(e,t,n=!1){return im(e,t,n)}var dt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(dt||{});function wd(e){return e instanceof Function?e():e}var kt=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(kt||{}),qt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qt||{}),sm;function va(e,t){return sm(e,t)}function gn(e,t,n,r,s){if(r!=null){let i,o=!1;yt(r)?i=r:jt(r)&&(o=!0,r=r[_t]);let a=ut(r);e===0&&n!==null?s==null?Id(t,n,a):Oi(t,n,a,s||null,!0):e===1&&n!==null?Oi(t,n,a,s||null,!0):e===2?Cm(t,a,o):e===3&&t.destroyNode(a),i!=null&&wm(t,e,i,n,s)}}function om(e,t){return e.createText(t)}function am(e,t,n){e.setValue(t,n)}function Dd(e,t,n){return e.createElement(t,n)}function cm(e,t){bd(e,t),t[_t]=null,t[nt]=null}function lm(e,t,n,r,s,i){r[_t]=s,r[nt]=t,Zi(e,r,n,1,s,i)}function bd(e,t){t[xt].changeDetectionScheduler?.notify(10),Zi(e,t,t[He],2,null,null)}function um(e){let t=e[sr];if(!t)return so(e[re],e);for(;t;){let n=null;if(jt(t))n=t[sr];else{let r=t[je];r&&(n=r)}if(!n){for(;t&&!t[et]&&t!==e;)jt(t)&&so(t[re],t),t=t[Ae];t===null&&(t=e),jt(t)&&so(t[re],t),n=t&&t[et]}t=n}}function dm(e,t,n,r){let s=je+r,i=n.length;r>0&&(n[s-1][et]=t),r<i-je?(t[et]=n[s],fu(n,je+r,t)):(n.push(t),t[et]=null),t[Ae]=n;let o=t[wn];o!==null&&n!==o&&Ed(o,t);let a=t[Dn];a!==null&&a.insertView(e),mo(t),t[K]|=128}function Ed(e,t){let n=e[Ei],r=t[Ae];if(jt(r))e[K]|=Ii.HasTransplantedViews;else{let s=r[Ae][ct];t[ct]!==s&&(e[K]|=Ii.HasTransplantedViews)}n===null?e[Ei]=[t]:n.push(t)}function _a(e,t){let n=e[Ei],r=n.indexOf(t);n.splice(r,1)}function ki(e,t){if(e.length<=je)return;let n=je+t,r=e[n];if(r){let s=r[wn];s!==null&&s!==e&&_a(s,r),t>0&&(e[n-1][et]=r[et]);let i=yi(e,je+t);cm(r[re],r);let o=i[Dn];o!==null&&o.detachView(i[re]),r[Ae]=null,r[et]=null,r[K]&=-129}return r}function ya(e,t){if(!(t[K]&256)){let n=t[He];n.destroyNode&&Zi(e,t,n,3,null,null),um(t)}}function so(e,t){if(t[K]&256)return;let n=ce(null);try{t[K]&=-129,t[K]|=256,t[Be]&&Fs(t[Be]),fm(e,t),hm(e,t),t[re].type===1&&t[He].destroy();let r=t[wn];if(r!==null&&yt(t[Ae])){r!==t[Ae]&&_a(r,t);let s=t[Dn];s!==null&&s.detachView(e)}Mo(t)}finally{ce(n)}}function hm(e,t){let n=e.cleanup,r=t[wi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[wi]=null);let s=t[Tt];if(s!==null){t[Tt]=null;for(let o=0;o<s.length;o++){let a=s[o];a()}}let i=t[Di];if(i!==null){t[Di]=null;for(let o of i)o.destroy()}}function fm(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let s=t[n[r]];if(!(s instanceof or)){let i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){let a=s[i[o]],c=i[o+1];ot(4,a,c);try{c.call(a)}finally{ot(5,a,c)}}else{ot(4,s,i);try{i.call(s)}finally{ot(5,s,i)}}}}}function pm(e,t,n){return gm(e,t.parent,n)}function gm(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[_t];{let{componentOffset:s}=r;if(s>-1){let{encapsulation:i}=e.data[r.directiveStart+s];if(i===dt.None||i===dt.Emulated)return null}return ht(r,n)}}function Oi(e,t,n,r,s){e.insertBefore(t,n,r,s)}function Id(e,t,n){e.appendChild(t,n)}function $l(e,t,n,r,s){r!==null?Oi(e,t,n,r,s):Id(e,t,n)}function Md(e,t){return e.parentNode(t)}function mm(e,t){return e.nextSibling(t)}function vm(e,t,n){return ym(e,t,n)}function _m(e,t,n){return e.type&40?ht(e,n):null}var ym=_m,Vl;function Ca(e,t,n,r){let s=pm(e,r,t),i=t[He],o=r.parent||t[nt],a=vm(o,r,t);if(s!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)$l(i,s,n[c],a,!1);else $l(i,s,n,a,!1);Vl!==void 0&&Vl(i,r,t,n,s)}function er(e,t){if(t!==null){let n=t.type;if(n&3)return ht(t,e);if(n&4)return xo(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return er(e,r);{let s=e[t.index];return yt(s)?xo(-1,s):ut(s)}}else{if(n&128)return er(e,t.next);if(n&32)return va(t,e)()||ut(e[t.index]);{let r=Td(e,t);if(r!==null){if(Array.isArray(r))return r[0];let s=Vt(e[ct]);return er(s,r)}else return er(e,t.next)}}}return null}function Td(e,t){if(t!==null){let r=e[ct][nt],s=t.projection;return r.projection[s]}return null}function xo(e,t){let n=je+e+1;if(n<t.length){let r=t[n],s=r[re].firstChild;if(s!==null)return er(r,s)}return t[$t]}function Cm(e,t,n){e.removeChild(null,t,n)}function Sa(e,t,n,r,s,i,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&t===0&&(a&&Wt(ut(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Sa(e,t,n.child,r,s,i,!1),gn(t,e,s,a,i);else if(c&32){let u=va(n,r),p;for(;p=u();)gn(t,e,s,p,i);gn(t,e,s,a,i)}else c&16?Sm(e,t,r,n,s,i):gn(t,e,s,a,i);n=o?n.projectionNext:n.next}}function Zi(e,t,n,r,s,i){Sa(n,r,e.firstChild,t,s,i,!1)}function Sm(e,t,n,r,s,i){let o=n[ct],c=o[nt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let p=c[u];gn(t,e,s,p,i)}else{let u=c,p=o[Ae];hd(r)&&(u.flags|=128),Sa(e,t,u,p,s,i,!0)}}function wm(e,t,n,r,s){let i=n[$t],o=ut(n);i!==o&&gn(t,e,r,i,s);for(let a=je;a<n.length;a++){let c=n[a];Zi(c[re],c,e,t,r,i)}}function Dm(e,t,n){e.setAttribute(t,"style",n)}function xd(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Ad(e,t,n){let{mergedAttrs:r,classes:s,styles:i}=n;r!==null&&yo(e,t,r),s!==null&&xd(e,t,s),i!==null&&Dm(e,t,i)}function bm(e,t,n){let r=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let i=t.length;if(s+i===r||e.charCodeAt(s+i)<=32)return s}n=s+1}}var Rd="ng-template";function Em(e,t,n,r){let s=0;if(r){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&bm(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(wa(e))return!1;if(s=t.indexOf(1,s),s>-1){let i;for(;++s<t.length&&typeof(i=t[s])=="string";)if(i.toLowerCase()===n)return!0}return!1}function wa(e){return e.type===4&&e.value!==Rd}function Im(e,t,n){let r=e.type===4&&!n?Rd:e.value;return t===r}function Mm(e,t,n){let r=4,s=e.attrs,i=s!==null?Am(s):0,o=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!o&&!Je(r)&&!Je(c))return!1;if(o&&Je(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Im(e,c,n)||c===""&&t.length===1){if(Je(r))return!1;o=!0}}else if(r&8){if(s===null||!Em(e,s,c,n)){if(Je(r))return!1;o=!0}}else{let u=t[++a],p=Tm(c,s,wa(e),n);if(p===-1){if(Je(r))return!1;o=!0;continue}if(u!==""){let v;if(p>i?v="":v=s[p+1].toLowerCase(),r&2&&u!==v){if(Je(r))return!1;o=!0}}}}return Je(r)||o}function Je(e){return(e&1)===0}function Tm(e,t,n,r){if(t===null)return-1;let s=0;if(r||!n){let i=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)i=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=i?1:2}return-1}else return Rm(t,e)}function xm(e,t,n=!1){for(let r=0;r<t.length;r++)if(Mm(e,t[r],n))return!0;return!1}function Am(e){for(let t=0;t<e.length;t++){let n=e[t];if(Ig(n))return t}return e.length}function Rm(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function zl(e,t){return e?":not("+t.trim()+")":t}function km(e){let t=e[0],n=1,r=2,s="",i=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?s+="."+o:r&4&&(s+=" "+o);else s!==""&&!Je(o)&&(t+=zl(i,s),s=""),r=o,i=i||!Je(r);n++}return s!==""&&(t+=zl(i,s)),t}function Om(e){return e.map(km).join(",")}function Nm(e){let t=[],n=[],r=1,s=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")s===2?i!==""&&t.push(i,e[++r]):s===8&&n.push(i);else{if(!Je(s))break;s=i}r++}return{attrs:t,classes:n}}var fr={};function Da(e=1){kd(xn(),Ie(),ra()+e,!1)}function kd(e,t,n,r){if(!r)if((t[K]&3)===3){let i=e.preOrderCheckHooks;i!==null&&fi(t,i,n)}else{let i=e.preOrderHooks;i!==null&&pi(t,i,0,n)}zt(n)}function ba(e,t=te.Default){let n=Ie();if(n===null)return se(e,t);let r=ft();return td(r,n,We(e),t)}function Od(e,t,n,r,s,i){let o=ce(null);try{let a=null;s&kt.SignalBased&&(a=t[r][en]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),s&kt.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):Iu(t,a,r,i)}finally{ce(o)}}function Lm(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let s=n[r];if(s<0)zt(~s);else{let i=s,o=n[++r],a=n[++r];mg(o,i);let c=t[i];a(2,c)}}}finally{zt(-1)}}function Yi(e,t,n,r,s,i,o,a,c,u,p){let v=t.blueprint.slice();return v[_t]=s,v[K]=r|4|128|8|64|1024,(u!==null||e&&e[K]&2048)&&(v[K]|=2048),Ru(v),v[Ae]=v[Mn]=e,v[Ge]=n,v[xt]=o||e&&e[xt],v[He]=a||e&&e[He],v[Sn]=c||e&&e[Sn]||null,v[nt]=i,v[Vi]=Yg(),v[Si]=p,v[Du]=u,v[ct]=t.type==2?e[ct]:v,v}function Qi(e,t,n,r,s){let i=e.data[t];if(i===null)i=Pm(e,t,n,r,s),gg()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=s;let o=hg();i.injectorIndex=o===null?-1:o.injectorIndex}return hr(i,!0),i}function Pm(e,t,n,r,s){let i=Pu(),o=Fu(),a=o?i:i&&i.parent,c=e.data[t]=Um(e,a,n,t,r,s);return e.firstChild===null&&(e.firstChild=c),i!==null&&(o?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Nd(e,t,n,r){if(n===0)return-1;let s=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function Ld(e,t,n,r,s){let i=ra(),o=r&2;try{zt(-1),o&&t.length>lt&&kd(e,t,lt,!1),ot(o?2:0,s),n(r,s)}finally{zt(i),ot(o?3:1,s)}}function Pd(e,t,n){if(Eu(t)){let r=ce(null);try{let s=t.directiveStart,i=t.directiveEnd;for(let o=s;o<i;o++){let a=e.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ce(r)}}}function Fd(e,t,n){Ou()&&(Wm(e,t,n,ht(n,t)),(n.flags&64)===64&&$d(e,t,n))}function Bd(e,t,n=ht){let r=t.localNames;if(r!==null){let s=t.index+1;for(let i=0;i<r.length;i+=2){let o=r[i+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function jd(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Ea(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Ea(e,t,n,r,s,i,o,a,c,u,p){let v=lt+r,C=v+s,_=Fm(v,C),l=typeof u=="function"?u():u;return _[re]={type:e,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:t,data:_.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:l,incompleteFirstPass:!1,ssrId:p}}function Fm(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:fr);return n}function Bm(e,t,n,r){let i=r.get(nm,yd)||n===dt.ShadowDom,o=e.selectRootElement(t,i);return jm(o),o}function jm(e){Hm(e)}var Hm=()=>null;function Um(e,t,n,r,s,i){let o=t?t.injectorIndex:-1,a=0;return lg()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Wl(e,t,n,r,s){for(let i in t){if(!t.hasOwnProperty(i))continue;let o=t[i];if(o===void 0)continue;r??={};let a,c=kt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=i;if(s!==null){if(!s.hasOwnProperty(i))continue;u=s[i]}e===0?ql(r,n,u,a,c):ql(r,n,u,a)}return r}function ql(e,t,n,r,s){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],s!==void 0&&i.push(s)}function $m(e,t,n){let r=t.directiveStart,s=t.directiveEnd,i=e.data,o=t.attrs,a=[],c=null,u=null;for(let p=r;p<s;p++){let v=i[p],C=n?n.get(v):null,_=C?C.inputs:null,l=C?C.outputs:null;c=Wl(0,v.inputs,p,c,_),u=Wl(1,v.outputs,p,u,l);let h=c!==null&&o!==null&&!wa(t)?ev(c,p,o):null;a.push(h)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function Hd(e,t,n,r){if(Ou()){let s=r===null?null:{"":-1},i=Gm(e,n),o,a;i===null?o=a=null:[o,a]=i,o!==null&&Ud(e,t,n,o,s,a),s&&Km(n,r,s)}n.mergedAttrs=aa(n.mergedAttrs,n.attrs)}function Ud(e,t,n,r,s,i){for(let u=0;u<r.length;u++)kg(Qu(n,t),e,r[u].type);Ym(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let p=r[u];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,c=Nd(e,t,r.length,null);for(let u=0;u<r.length;u++){let p=r[u];n.mergedAttrs=aa(n.mergedAttrs,p.hostAttrs),Qm(e,n,t,c,p),Zm(c,p,s),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let v=p.type.prototype;!o&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}$m(e,n,i)}function Vm(e,t,n,r,s){let i=s.hostBindings;if(i){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;zm(o)!=a&&o.push(a),o.push(n,r,i)}}function zm(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Wm(e,t,n,r){let s=n.directiveStart,i=n.directiveEnd;Yo(n)&&Xm(t,n,e.data[s+n.componentOffset]),e.firstCreatePass||Qu(n,t),Wt(r,t);let o=n.initialInputs;for(let a=s;a<i;a++){let c=e.data[a],u=ar(t,e,a,n);if(Wt(u,t),o!==null&&Jm(t,a-s,u,c,n,o),dr(c)){let p=Tn(n.index,t);p[Ge]=ar(t,e,a,n)}}}function $d(e,t,n){let r=n.directiveStart,s=n.directiveEnd,i=n.index,o=vg();try{zt(i);for(let a=r;a<s;a++){let c=e.data[a],u=t[a];_o(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&qm(c,u)}}finally{zt(-1),_o(o)}}function qm(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Gm(e,t){let n=e.directiveRegistry,r=null,s=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];if(xm(t,o.selectors,!1))if(r||(r=[]),dr(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),r.unshift(...a,o);let c=a.length;Ao(e,t,c)}else r.unshift(o),Ao(e,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,r,s),r.push(o)}return r===null?null:[r,s]}function Ao(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Km(e,t,n){if(t){let r=e.localNames=[];for(let s=0;s<t.length;s+=2){let i=n[t[s+1]];if(i==null)throw new G(-301,!1);r.push(t[s],i)}}}function Zm(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;dr(t)&&(n[""]=e)}}function Ym(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Qm(e,t,n,r,s){e.data[r]=s;let i=s.factory||(s.factory=_n(s.type,!0)),o=new or(i,dr(s),ba);e.blueprint[r]=o,n[r]=o,Vm(e,t,r,Nd(e,n,s.hostVars,fr),s)}function Vd(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Xm(e,t,n){let r=ht(t,e),s=jd(n),i=e[xt].rendererFactory,o=Xi(e,Yi(e,s,null,Vd(n),r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=o}function Jm(e,t,n,r,s,i){let o=i[t];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],p=o[a++],v=o[a++];Od(r,n,c,u,p,v)}}function ev(e,t,n){let r=null,s=0;for(;s<n.length;){let i=n[s];if(i===0){s+=4;continue}else if(i===5){s+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let o=e[i];for(let a=0;a<o.length;a+=3)if(o[a]===t){r.push(i,o[a+1],o[a+2],n[s+1]);break}}s+=2}return r}function zd(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Wd(e,t){let n=e.contentQueries;if(n!==null){let r=ce(null);try{for(let s=0;s<n.length;s+=2){let i=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];Hu(i),a.contentQueries(2,t[o],o)}}}finally{ce(r)}}}function Xi(e,t){return e[sr]?e[Ml][et]=t:e[sr]=t,e[Ml]=t,t}function Ro(e,t,n){Hu(0);let r=ce(null);try{t(e,n)}finally{ce(r)}}function tv(e){return e[wi]??=[]}function nv(e){return e.cleanup??=[]}function qd(e,t){let n=e[Sn],r=n?n.get(Rt,null):null;r&&r.handleError(t)}function Gd(e,t,n,r,s){for(let i=0;i<n.length;){let o=n[i++],a=n[i++],c=n[i++],u=t[o],p=e.data[o];Od(p,u,r,a,c,s)}}function rv(e,t,n){let r=ng(t,e);am(e[He],r,n)}function iv(e,t){let n=Tn(t,e),r=n[re];sv(r,n);let s=n[_t];s!==null&&n[Si]===null&&(n[Si]=ma(s,n[Sn])),Ia(r,n,n[Ge])}function sv(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Ia(e,t,n){ta(t);try{let r=e.viewQuery;r!==null&&Ro(1,r,n);let s=e.template;s!==null&&Ld(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Dn]?.finishViewCreation(e),e.staticContentQueries&&Wd(e,t),e.staticViewQueries&&Ro(2,e.viewQuery,n);let i=e.components;i!==null&&ov(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[K]&=-5,na()}}function ov(e,t){for(let n=0;n<t.length;n++)iv(e,t[n])}function av(e,t,n,r){let s=ce(null);try{let i=t.tView,a=e[K]&4096?4096:16,c=Yi(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[wn]=u;let p=e[Dn];return p!==null&&(c[Dn]=p.createEmbeddedView(i)),Ia(i,c,n),c}finally{ce(s)}}function cv(e,t){let n=je+t;if(n<e.length)return e[n]}function ko(e,t){return!t||t.firstChild===null||hd(e)}function Kd(e,t,n,r=!0){let s=t[re];if(dm(s,t,e,n),r){let o=xo(n,e),a=t[He],c=Md(a,e[$t]);c!==null&&lm(s,e[nt],a,t,c,o)}let i=t[Si];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function lv(e,t){let n=ki(e,t);return n!==void 0&&ya(n[re],n),n}function Ni(e,t,n,r,s=!1){for(;n!==null;){if(n.type===128){n=s?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(ut(i)),yt(i)&&uv(i,r);let o=n.type;if(o&8)Ni(e,t,n.child,r);else if(o&32){let a=va(n,t),c;for(;c=a();)r.push(c)}else if(o&16){let a=Td(t,n);if(Array.isArray(a))r.push(...a);else{let c=Vt(t[ct]);Ni(c[re],c,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function uv(e,t){for(let n=je;n<e.length;n++){let r=e[n],s=r[re].firstChild;s!==null&&Ni(r[re],r,s,t)}e[$t]!==e[_t]&&t.push(e[$t])}var Zd=[];function dv(e){return e[Be]??hv(e)}function hv(e){let t=Zd.pop()??Object.create(pv);return t.lView=e,t}function fv(e){e.lView[Be]!==e&&(e.lView=null,Zd.push(e))}var pv=pe(z({},Vr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Wi(e.lView)},consumerOnSignalRead(){this.lView[Be]=this}});function gv(e){let t=e[Be]??Object.create(mv);return t.lView=e,t}var mv=pe(z({},Vr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Vt(e.lView);for(;t&&!Yd(t[re]);)t=Vt(t);t&&ea(t)},consumerOnSignalRead(){this.lView[Be]=this}});function Yd(e){return e.type!==2}function Qd(e){if(e[Di]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Di])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[K]&8192)}}var vv=100;function Xd(e,t=!0,n=0){let s=e[xt].rendererFactory,i=!1;i||s.begin?.();try{_v(e,n)}catch(o){throw t&&qd(e,o),o}finally{i||s.end?.()}}function _v(e,t){let n=Bu();try{xl(!0),Oo(e,t);let r=0;for(;zi(e);){if(r===vv)throw new G(103,!1);r++,Oo(e,1)}}finally{xl(n)}}function yv(e,t,n,r){let s=t[K];if((s&256)===256)return;let i=!1,o=!1;ta(t);let a=!0,c=null,u=null;i||(Yd(e)?(u=dv(t),c=Ls(u)):Lc()===null?(a=!1,u=gv(t),c=Ls(u)):t[Be]&&(Fs(t[Be]),t[Be]=null));try{Ru(t),pg(e.bindingStartIndex),n!==null&&Ld(e,t,n,2,r);let p=(s&3)===3;if(!i)if(p){let _=e.preOrderCheckHooks;_!==null&&fi(t,_,null)}else{let _=e.preOrderHooks;_!==null&&pi(t,_,0,null),no(t,0)}if(o||Cv(t),Qd(t),Jd(t,0),e.contentQueries!==null&&Wd(e,t),!i)if(p){let _=e.contentCheckHooks;_!==null&&fi(t,_)}else{let _=e.contentHooks;_!==null&&pi(t,_,1),no(t,1)}Lm(e,t);let v=e.components;v!==null&&th(t,v,0);let C=e.viewQuery;if(C!==null&&Ro(2,C,r),!i)if(p){let _=e.viewCheckHooks;_!==null&&fi(t,_)}else{let _=e.viewHooks;_!==null&&pi(t,_,2),no(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[to]){for(let _ of t[to])_();t[to]=null}i||(t[K]&=-73)}catch(p){throw i||Wi(t),p}finally{u!==null&&(jc(u,c),a&&fv(u)),na()}}function Jd(e,t){for(let n=gd(e);n!==null;n=md(n))for(let r=je;r<n.length;r++){let s=n[r];eh(s,t)}}function Cv(e){for(let t=gd(e);t!==null;t=md(t)){if(!(t[K]&Ii.HasTransplantedViews))continue;let n=t[Ei];for(let r=0;r<n.length;r++){let s=n[r];ea(s)}}}function Sv(e,t,n){let r=Tn(t,e);eh(r,n)}function eh(e,t){Jo(e)&&Oo(e,t)}function Oo(e,t){let r=e[re],s=e[K],i=e[Be],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(i?.dirty&&Ps(i)),o||=!1,i&&(i.dirty=!1),e[K]&=-9217,o)yv(r,e,r.template,e[Ge]);else if(s&8192){Qd(e),Jd(e,1);let a=r.components;a!==null&&th(e,a,1)}}function th(e,t,n){for(let r=0;r<t.length;r++)Sv(e,t[r],n)}function Ma(e,t){let n=Bu()?64:1088;for(e[xt].changeDetectionScheduler?.notify(t);e;){e[K]|=n;let r=Vt(e);if(po(e)&&!r)return e;e=r}return null}var bn=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[re];return Ni(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ge]}get dirty(){return!!(this._lView[K]&9280)||!!this._lView[Be]?.dirty}set context(t){this._lView[Ge]=t}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ae];if(yt(t)){let n=t[bi],r=n?n.indexOf(this):-1;r>-1&&(ki(t,r),yi(n,r))}this._attachedToViewContainer=!1}ya(this._lView[re],this._lView)}onDestroy(t){ku(this._lView,t)}markForCheck(){Ma(this._cdRefInjectingView||this._lView,4)}markForRefresh(){ea(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){mo(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,Xd(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=po(this._lView),n=this._lView[wn];n!==null&&!t&&_a(n,this._lView),bd(this._lView[re],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=t;let n=po(this._lView),r=this._lView[wn];r!==null&&!n&&Ed(r,this._lView),mo(this._lView)}};var RE=new RegExp(`^(\\d+)*(${tm}|${em})*(.*)`);var wv=()=>null;function No(e,t){return wv(e,t)}var Lo=class{},Li=class{},Po=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Fe(t)}.`)}},En=class{static NULL=new Po},In=class{};var Dv=(()=>{class e{static \u0275prov=Q({token:e,providedIn:"root",factory:()=>null})}return e})();function Fo(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,i=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")i=a;else if(i==1)s=Sl(s,a);else if(i==2){let c=a,u=t[++o];r=Sl(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}var Pi=class extends En{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Ut(t);return new lr(n,this.ngModule)}};function Gl(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let s=e[r];if(s===void 0)continue;let i=Array.isArray(s),o=i?s[0]:s,a=i?s[1]:kt.None;t?n.push({propName:o,templateName:r,isSignal:(a&kt.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function bv(e){let t=e.toLowerCase();return t==="svg"?eg:t==="math"?tg:null}var lr=class extends Li{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Gl(t.inputs,!0);if(n!==null)for(let s of r)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return r}get outputs(){return Gl(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Om(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,s){let i=ce(null);try{s=s||this.ngModule;let o=s instanceof qe?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Co(t,o):t,c=a.get(In,null);if(c===null)throw new G(407,!1);let u=a.get(Dv,null),p=a.get(cr,null),v={rendererFactory:c,sanitizer:u,changeDetectionScheduler:p},C=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",l=r?Bm(C,r,this.componentDef.encapsulation,a):Dd(C,_,bv(_)),h=512;this.componentDef.signals?h|=4096:this.componentDef.onPush||(h|=16);let d=null;l!==null&&(d=ma(l,a,!0));let f=Ea(0,null,null,1,0,null,null,null,null,null,null),g=Yi(null,f,null,h,null,null,v,C,a,null,d);ta(g);let y,S,D=null;try{let m=this.componentDef,w,I=null;m.findHostDirectiveDefs?(w=[],I=new Map,m.findHostDirectiveDefs(m,w,I),w.push(m)):w=[m];let R=Ev(g,l);D=Iv(R,l,m,w,g,v,C),S=Au(f,lt),l&&xv(C,m,l,r),n!==void 0&&Av(S,this.ngContentSelectors,n),y=Tv(D,m,w,I,g,[Rv]),Ia(f,g,null)}catch(m){throw D!==null&&Mo(D),Mo(g),m}finally{na()}return new Bo(this.componentType,y,ha(S,g),g,S)}finally{ce(i)}}},Bo=class extends Lo{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(t,n,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new bn(s,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,s;if(r!==null&&(s=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;Gd(i[re],i,s,t,n),this.previousInputValues.set(t,n);let o=Tn(this._tNode.index,i);Ma(o,1)}}get injector(){return new Ht(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ev(e,t){let n=e[re],r=lt;return e[r]=t,Qi(n,r,2,"#host",null)}function Iv(e,t,n,r,s,i,o){let a=s[re];Mv(r,e,t,o);let c=null;t!==null&&(c=ma(t,s[Sn]));let u=i.rendererFactory.createRenderer(t,n),p=Yi(s,jd(n),null,Vd(n),s[e.index],e,i,u,null,null,c);return a.firstCreatePass&&Ao(a,e,r.length-1),Xi(s,p),s[e.index]=p}function Mv(e,t,n,r){for(let s of e)t.mergedAttrs=aa(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(Fo(t,t.mergedAttrs,!0),n!==null&&Ad(r,n,t))}function Tv(e,t,n,r,s,i){let o=ft(),a=s[re],c=ht(o,s);Ud(a,s,o,n,null,r);for(let p=0;p<n.length;p++){let v=o.directiveStart+p,C=ar(s,a,v,o);Wt(C,s)}$d(a,s,o),c&&Wt(c,s);let u=ar(s,a,o.directiveStart+o.componentOffset,o);if(e[Ge]=s[Ge]=u,i!==null)for(let p of i)p(u,t);return Pd(a,o,s),u}function xv(e,t,n,r){if(r)yo(e,n,["ng-version","19.0.5"]);else{let{attrs:s,classes:i}=Nm(t.selectors[0]);s&&yo(e,n,s),i&&i.length>0&&xd(e,n,i.join(" "))}}function Av(e,t,n){let r=e.projection=[];for(let s=0;s<t.length;s++){let i=n[s];r.push(i!=null&&i.length?Array.from(i):null)}}function Rv(){let e=ft();oa(Ie()[re],e)}var Ji=(()=>{class e{static __NG_ELEMENT_ID__=kv}return e})();function kv(){let e=ft();return Nv(e,Ie())}var Ov=Ji,nh=class extends Ov{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ha(this._hostTNode,this._hostLView)}get injector(){return new Ht(this._hostTNode,this._hostLView)}get parentInjector(){let t=ca(this._hostTNode,this._hostLView);if(Ku(t)){let n=xi(t,this._hostLView),r=Ti(t),s=n[re].data[r+8];return new Ht(s,n)}else return new Ht(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Kl(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-je}createEmbeddedView(t,n,r){let s,i;typeof r=="number"?s=r:r!=null&&(s=r.index,i=r.injector);let o=No(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,o);return this.insertImpl(a,s,ko(this._hostTNode,o)),a}createComponent(t,n,r,s,i){let o=t&&!Yp(t),a;if(o)a=n;else{let l=n||{};a=l.index,r=l.injector,s=l.projectableNodes,i=l.environmentInjector||l.ngModuleRef}let c=o?t:new lr(Ut(t)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let h=(o?u:this.parentInjector).get(qe,null);h&&(i=h)}let p=Ut(c.componentType??{}),v=No(this._lContainer,p?.id??null),C=v?.firstChild??null,_=c.create(u,s,C,i);return this.insertImpl(_.hostView,a,ko(this._hostTNode,v)),_}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let s=t._lView;if(rg(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=s[Ae],u=new nh(c,c[nt],c[Ae]);u.detach(u.indexOf(t))}}let i=this._adjustIndex(n),o=this._lContainer;return Kd(o,s,i,r),t.attachToViewContainerRef(),fu(oo(o),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Kl(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ki(this._lContainer,n);r&&(yi(oo(this._lContainer),n),ya(r[re],r))}detach(t){let n=this._adjustIndex(t,-1),r=ki(this._lContainer,n);return r&&yi(oo(this._lContainer),n)!=null?new bn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Kl(e){return e[bi]}function oo(e){return e[bi]||(e[bi]=[])}function Nv(e,t){let n,r=t[e.index];return yt(r)?n=r:(n=zd(r,t,null,e),t[e.index]=n,Xi(t,n)),Pv(n,t,e,r),new nh(n,e,t)}function Lv(e,t){let n=e[He],r=n.createComment(""),s=ht(t,e),i=Md(n,s);return Oi(n,i,r,mm(n,s),!1),r}var Pv=jv,Fv=()=>!1;function Bv(e,t,n){return Fv(e,t,n)}function jv(e,t,n,r){if(e[$t])return;let s;n.type&8?s=ut(r):s=Lv(t,n),e[$t]=s}var Ot=class{},ur=class{};var jo=class extends Ot{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pi(this);constructor(t,n,r,s=!0){super(),this.ngModuleType=t,this._parent=n;let i=mu(t);this._bootstrapComponents=wd(i.bootstrap),this._r3Injector=id(t,n,[{provide:Ot,useValue:this},{provide:En,useValue:this.componentFactoryResolver},...r],Fe(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ho=class extends ur{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new jo(this.moduleType,t,[])}};var Fi=class extends Ot{injector;componentFactoryResolver=new Pi(this);instance=null;constructor(t){super();let n=new ir([...t.providers,{provide:Ot,useValue:this},{provide:En,useValue:this.componentFactoryResolver}],t.parent||Zo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ta(e,t,n=null){return new Fi({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Hv=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Cu(!1,n.type),s=r.length>0?Ta([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(se(qe))})}return e})();function kn(e){return Wo(()=>{let t=rh(e),n=pe(z({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?s=>s.get(Hv).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||dt.Emulated,styles:e.styles||yn,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Ki("NgStandalone"),ih(n);let r=e.dependencies;return n.directiveDefs=Yl(r,!1),n.pipeDefs=Yl(r,!0),n.id=Vv(n),n})}function Uv(e){return Ut(e)||vu(e)}function $v(e){return e!==null}function Zl(e,t){if(e==null)return rr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r],i,o,a=kt.None;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i):(i=s,o=s),t?(n[i]=a!==kt.None?[r,a]:r,t[i]=o):n[i]=r}return n}function xa(e){return Wo(()=>{let t=rh(e);return ih(t),t})}function rh(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||rr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||yn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zl(e.inputs,t),outputs:Zl(e.outputs),debugInfo:null}}function ih(e){e.features?.forEach(t=>t(e))}function Yl(e,t){if(!e)return null;let n=t?_u:Uv;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter($v)}function Vv(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function sh(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function zv(e){return(e.flags&32)===32}function Wv(e,t,n,r,s,i,o,a,c){let u=t.consts,p=Qi(t,e,4,o||null,a||null);Hd(t,n,p,Mi(u,c)),oa(t,p);let v=p.tView=Ea(2,p,r,s,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,p),v.queries=t.queries.embeddedTView(p)),p}function qv(e,t,n,r,s,i,o,a,c,u){let p=n+lt,v=t.firstCreatePass?Wv(p,t,e,r,s,i,o,a,c):t.data[p];hr(v,!1);let C=Gv(t,e,v,n);ia()&&Ca(t,e,C,v),Wt(C,e);let _=zd(C,e,C,v);return e[p]=_,Xi(e,_),Bv(_,v,e),Qo(v)&&Fd(t,e,v),c!=null&&Bd(e,v,u),v}function Aa(e,t,n,r,s,i,o,a){let c=Ie(),u=xn(),p=Mi(u.consts,i);return qv(c,u,e,t,n,r,s,p,o,a),Aa}var Gv=Kv;function Kv(e,t,n,r){return sa(!0),t[He].createComment("")}var es=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var oh=new Y("");function pr(e){return!!e&&typeof e.then=="function"}function ah(e){return!!e&&typeof e.subscribe=="function"}var ch=new Y("");var lh=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=$(ch,{optional:!0})??[];injector=$(At);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let s of this.appInits){let i=tt(this.injector,s);if(pr(i))n.push(i);else if(ah(i)){let o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zv=(()=>{class e{static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new Uo})}return e})(),Uo=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},Ra=new Y("");function Yv(){zc(()=>{throw new G(600,!1)})}function Qv(e){return e.isBoundToModule}var Xv=10;function Jv(e,t,n){try{let r=n();return pr(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Nt=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(qg);afterRenderManager=$(rm);zonelessEnabled=$(qi);rootEffectScheduler=$(Zv);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Te;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=$(An).hasPendingTasks.pipe(ie(n=>!n));constructor(){$(Sd,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=$(qe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){let s=n instanceof Li;if(!this._injector.get(lh).done){let C=!s&&yu(n),_=!1;throw new G(405,_)}let o;s?o=n:o=this._injector.get(En).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=Qv(o)?void 0:this._injector.get(Ot),c=r||o.selector,u=o.create(At.NULL,[],c,a),p=u.location.nativeElement,v=u.injector.get(oh,null);return v?.registerApplication(p),u.onDestroy(()=>{this.detachView(u.hostView),gi(this.components,u),v?.unregisterApplication(p)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Cd.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new G(101,!1);let n=ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ce(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(In,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<Xv;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:s}of this.allViews)e_(r,s,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>zi(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;gi(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Ra,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>gi(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gi(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function e_(e,t,n,r){if(!n&&!zi(e))return;Xd(e,t,n&&!r?0:1)}function t_(e,t,n,r){return sh(e,ju(),n)?t+uu(n)+r:fr}function Ql(e,t,n,r,s){let i=t.inputs,o=s?"class":"style";Gd(e,n,i[o],o,r)}function uh(e,t){Ki("NgControlFlow");let n=Ie(),r=ju(),s=n[r]!==fr?n[r]:-1,i=s!==-1?Xl(n,lt+s):void 0,o=0;if(sh(n,r,e)){let a=ce(null);try{if(i!==void 0&&lv(i,o),e!==-1){let c=lt+e,u=Xl(n,c),p=n_(n[re],c),v=No(u,p.tView.ssrId),C=av(n,p,t,{dehydratedView:v});Kd(u,C,o,ko(p,v))}}finally{ce(a)}}else if(i!==void 0){let a=cv(i,o);a!==void 0&&(a[Ge]=t)}}function Xl(e,t){return e[t]}function n_(e,t){return Au(e,t)}function r_(e,t,n,r,s,i){let o=t.consts,a=Mi(o,s),c=Qi(t,e,2,r,a);return Hd(t,n,c,Mi(o,i)),c.attrs!==null&&Fo(c,c.attrs,!1),c.mergedAttrs!==null&&Fo(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Ne(e,t,n,r){let s=Ie(),i=xn(),o=lt+e,a=s[He],c=i.firstCreatePass?r_(o,i,s,t,n,r):i.data[o],u=i_(i,s,c,a,t,e);s[o]=u;let p=Qo(c);return hr(c,!0),Ad(a,u,c),!zv(c)&&ia()&&Ca(i,s,u,c),og()===0&&Wt(u,s),ag(),p&&(Fd(i,s,c),Pd(i,c,s)),r!==null&&Bd(s,c),Ne}function Re(){let e=ft();Fu()?fg():(e=e.parent,hr(e,!1));let t=e;ug(t)&&dg(),cg();let n=xn();return n.firstCreatePass&&(oa(n,e),Eu(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&bg(t)&&Ql(n,t,Ie(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Eg(t)&&Ql(n,t,Ie(),t.stylesWithoutHost,!1),Re}function rt(e,t,n,r){return Ne(e,t,n,r),Re(),rt}var i_=(e,t,n,r,s,i)=>(sa(!0),Dd(r,s,Cg()));function dh(){return Ie()}var Bi="en-US";var s_=Bi;function o_(e){typeof e=="string"&&(s_=e.toLowerCase().replace(/_/g,"-"))}var a_=(e,t,n)=>{};function gr(e,t,n,r){let s=Ie(),i=xn(),o=ft();return l_(i,s,s[He],o,e,t,r),gr}function c_(e,t,n,r){let s=e.cleanup;if(s!=null)for(let i=0;i<s.length-1;i+=2){let o=s[i];if(o===n&&s[i+1]===r){let a=t[wi],c=s[i+2];return a.length>c?a[c]:null}typeof o=="string"&&(i+=2)}return null}function l_(e,t,n,r,s,i,o){let a=Qo(r),u=e.firstCreatePass&&nv(e),p=t[Ge],v=tv(t),C=!0;if(r.type&3||o){let h=ht(r,t),d=o?o(h):h,f=v.length,g=o?S=>o(ut(S[r.index])):r.index,y=null;if(!o&&a&&(y=c_(e,t,s,r.index)),y!==null){let S=y.__ngLastListenerFn__||y;S.__ngNextListenerFn__=i,y.__ngLastListenerFn__=i,C=!1}else{i=eu(r,t,p,i),a_(h,s,i);let S=n.listen(d,s,i);v.push(i,S),u&&u.push(s,g,f,f+1)}}else i=eu(r,t,p,i);let _=r.outputs,l;if(C&&_!==null&&(l=_[s])){let h=l.length;if(h)for(let d=0;d<h;d+=2){let f=l[d],g=l[d+1],D=t[f][g].subscribe(i),m=v.length;v.push(i,D),u&&u.push(s,r.index,m,-(m+1))}}}function Jl(e,t,n,r){let s=ce(null);try{return ot(6,t,n),n(r)!==!1}catch(i){return qd(e,i),!1}finally{ot(7,t,n),ce(s)}}function eu(e,t,n,r){return function s(i){if(i===Function)return r;let o=e.componentOffset>-1?Tn(e.index,t):t;Ma(o,5);let a=Jl(t,n,r,i),c=s.__ngNextListenerFn__;for(;c;)a=Jl(t,n,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function hh(e=1){return yg(e)}function Gt(e,t=""){let n=Ie(),r=xn(),s=e+lt,i=r.firstCreatePass?Qi(r,s,1,t,null):r.data[s],o=u_(r,n,i,t,e);n[s]=o,ia()&&Ca(r,n,o,i),hr(i,!1)}var u_=(e,t,n,r,s)=>(sa(!0),om(t[He],r));function ka(e){return fh("",e,""),ka}function fh(e,t,n){let r=Ie(),s=t_(r,e,t,n);return s!==fr&&rv(r,ra(),s),fh}var $o=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Oa=(()=>{class e{compileModuleSync(n){return new Ho(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),s=mu(n),i=wd(s.declarations).reduce((o,a)=>{let c=Ut(a);return c&&o.push(new lr(c)),o},[]);return new $o(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var d_=(()=>{class e{zone=$(Se);changeDetectionScheduler=$(cr);applicationRef=$(Nt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),h_=new Y("",{factory:()=>!1});function ph({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Se(pe(z({},mh()),{scheduleInRootZone:n})),[{provide:Se,useFactory:e},{provide:Cn,multi:!0,useFactory:()=>{let r=$(d_,{optional:!0});return()=>r.initialize()}},{provide:Cn,multi:!0,useFactory:()=>{let r=$(f_);return()=>{r.initialize()}}},t===!0?{provide:ad,useValue:!0}:[],{provide:cd,useValue:n??sd}]}function gh(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=ph({ngZoneFactory:()=>{let s=mh(e);return s.scheduleInRootZone=n,s.shouldCoalesceEventChangeDetection&&Ki("NgZone_CoalesceEvent"),new Se(s)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Ui([{provide:h_,useValue:!0},{provide:qi,useValue:!1},r])}function mh(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var f_=(()=>{class e{subscription=new ve;initialized=!1;zone=$(Se);pendingTasks=$(An);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var p_=(()=>{class e{appRef=$(Nt);taskService=$(An);ngZone=$(Se);zonelessEnabled=$(qi);tracing=$(Sd,{optional:!0});disableScheduling=$(ad,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ri):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(cd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Io||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let s=this.useMicrotaskScheduler?Pl:ld;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>s(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ri+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function g_(){return typeof $localize<"u"&&$localize.locale||Bi}var Na=new Y("",{providedIn:"root",factory:()=>$(Na,te.Optional|te.SkipSelf)||g_()});var Vo=new Y(""),m_=new Y("");function Xn(e){return!e.moduleRef}function v_(e){let t=Xn(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Se);return n.run(()=>{Xn(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Rt,null),s;if(n.runOutsideAngular(()=>{s=n.onError.subscribe({next:i=>{r.handleError(i)}})}),Xn(e)){let i=()=>t.destroy(),o=e.platformInjector.get(Vo);o.add(i),t.onDestroy(()=>{s.unsubscribe(),o.delete(i)})}else{let i=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Vo);o.add(i),e.moduleRef.onDestroy(()=>{gi(e.allPlatformModules,e.moduleRef),s.unsubscribe(),o.delete(i)})}return Jv(r,n,()=>{let i=t.get(lh);return i.runInitializers(),i.donePromise.then(()=>{let o=t.get(Na,Bi);if(o_(o||Bi),!t.get(m_,!0))return Xn(e)?t.get(Nt):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Xn(e)){let c=t.get(Nt);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return __(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function __(e,t){let n=e.injector.get(Nt);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new G(-403,!1);t.push(e)}var mi=null;function y_(e=[],t){return At.create({name:t,providers:[{provide:$i,useValue:"platform"},{provide:Vo,useValue:new Set([()=>mi=null])},...e]})}function C_(e=[]){if(mi)return mi;let t=y_(e);return mi=t,Yv(),S_(t),t}function S_(e){let t=e.get(pa,null);tt(e,()=>{t?.forEach(n=>n())})}var mr=(()=>{class e{static __NG_ELEMENT_ID__=w_}return e})();function w_(e){return D_(ft(),Ie(),(e&16)===16)}function D_(e,t,n){if(Yo(e)&&!n){let r=Tn(e.index,t);return new bn(r,r)}else if(e.type&175){let r=t[ct];return new bn(r,t)}return null}function vh(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,s=C_(r),i=[ph({}),{provide:cr,useExisting:p_},...n||[]],o=new Fi({providers:i,parent:s,debugName:"",runEnvironmentInitializers:!1});return v_({r3Injector:o.injector,platformInjector:s,rootComponent:t})}catch(t){return Promise.reject(t)}}var tu=class{[en];constructor(t){this[en]=t}destroy(){this[en].destroy()}};var bh=null;function On(){return bh}function Eh(e){bh??=e}var ts=class{};var Ke=new Y(""),Ih=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(T_),providedIn:"platform"})}return e})();var T_=(()=>{class e extends Ih{_location;_history;_doc=$(Ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return On().getBaseHref(this._doc)}onPopState(n){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,s){this._history.pushState(n,r,s)}replaceState(n,r,s){this._history.replaceState(n,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Mh(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function _h(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Kt(e){return e&&e[0]!=="?"?"?"+e:e}var rs=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(Th),providedIn:"root"})}return e})(),x_=new Y(""),Th=(()=>{class e extends rs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Mh(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Kt(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${r}${s}`:r}pushState(n,r,s,i){let o=this.prepareExternalUrl(s+Kt(i));this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){let o=this.prepareExternalUrl(s+Kt(i));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(se(Ih),se(x_,8))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var _r=(()=>{class e{_subject=new Te;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=k_(_h(yh(r))),this._locationStrategy.onPopState(s=>{this._subject.next({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Kt(r))}normalize(n){return e.stripTrailingSlash(R_(this._basePath,yh(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",s=null){this._locationStrategy.pushState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kt(r)),s)}replaceState(n,r="",s=null){this._locationStrategy.replaceState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kt(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(s=>s(n,r))}subscribe(n,r,s){return this._subject.subscribe({next:n,error:r??void 0,complete:s??void 0})}static normalizeQueryParams=Kt;static joinWithSlash=Mh;static stripTrailingSlash=_h;static \u0275fac=function(r){return new(r||e)(se(rs))};static \u0275prov=Q({token:e,factory:()=>A_(),providedIn:"root"})}return e})();function A_(){return new _r(se(rs))}function R_(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function yh(e){return e.replace(/\/index.html$/,"")}function k_(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function xh(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[s,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===t)return decodeURIComponent(i)}return null}var Ah="browser",O_="server";function La(e){return e===O_}var ns=class{};var Fa=class extends ts{supportsDOMEvents=!0},Ba=class e extends Fa{static makeCurrent(){Eh(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=L_();return n==null?null:P_(n)}resetBaseElement(){yr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return xh(document.cookie,t)}},yr=null;function L_(){return yr=yr||document.querySelector("base"),yr?yr.getAttribute("href"):null}function P_(e){return new URL(e,document.baseURI).pathname}var F_=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),ja=new Y(""),Ph=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(se(ja),se(Se))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),ss=class{_doc;constructor(t){this._doc=t}manager},is="ng-app-id";function Rh(e){for(let t of e)t.remove()}function kh(e,t){let n=t.createElement("style");return n.textContent=e,n}function B_(e,t,n,r){let s=e.head?.querySelectorAll(`style[${is}="${t}"],link[${is}="${t}"]`);if(s)for(let i of s)i.removeAttribute(is),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Ha(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Fh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,s,i={}){this.doc=n,this.appId=r,this.nonce=s,this.isServer=La(i),B_(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let s of n)this.addUsage(s,this.inline,kh);r?.forEach(s=>this.addUsage(s,this.external,Ha))}removeStyles(n,r){for(let s of n)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(n,r,s){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(n,this.doc)))})}removeUsage(n,r){let s=r.get(n);s&&(s.usage--,s.usage<=0&&(Rh(s.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Rh(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(n,kh(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(n,Ha(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(is,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(se(Ke),se(fa),se(ga,8),se(Rn))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$a=/%COMP%/g,Bh="%COMP%",j_=`_nghost-${Bh}`,H_=`_ngcontent-${Bh}`,U_=!0,$_=new Y("",{providedIn:"root",factory:()=>U_});function V_(e){return H_.replace($a,e)}function z_(e){return j_.replace($a,e)}function jh(e,t){return t.map(n=>n.replace($a,e))}var Oh=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,s,i,o,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.platformIsServer=La(a),this.defaultRenderer=new Cr(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===dt.ShadowDom&&(r=pe(z({},r),{encapsulation:dt.Emulated}));let s=this.getOrCreateRenderer(n,r);return s instanceof os?s.applyToHost(n):s instanceof Sr&&s.applyStyles(),s}getOrCreateRenderer(n,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case dt.Emulated:i=new os(c,u,r,this.appId,p,o,a,v);break;case dt.ShadowDom:return new Ua(c,u,n,r,o,a,this.nonce,v);default:i=new Sr(c,u,r,p,o,a,v);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||e)(se(Ph),se(Fh),se(fa),se($_),se(Ke),se(Rn),se(Se),se(ga))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Cr=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,s){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=s}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Pa[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Nh(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Nh(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,s){if(s){n=s+":"+n;let i=Pa[s];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let s=Pa[r];s?t.removeAttributeNS(s,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,s){s&(qt.DashCase|qt.Important)?t.style.setProperty(n,r,s&qt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&qt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=On().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Nh(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ua=class extends Cr{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,s,i,o,a,c){super(t,i,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=jh(s.id,s.styles);for(let v of u){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=v,this.shadowRoot.appendChild(C)}let p=s.getExternalStyles?.();if(p)for(let v of p){let C=Ha(v,i);a&&C.setAttribute("nonce",a),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sr=class extends Cr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,s,i,o,a,c){super(t,i,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=c?jh(c,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},os=class extends Sr{contentAttr;hostAttr;constructor(t,n,r,s,i,o,a,c){let u=s+"-"+r.id;super(t,n,r,i,o,a,c,u),this.contentAttr=V_(u),this.hostAttr=z_(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},W_=(()=>{class e extends ss{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}static \u0275fac=function(r){return new(r||e)(se(Ke))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Lh=["alt","control","meta","shift"],q_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G_={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},K_=(()=>{class e extends ss{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,s){let i=e.parseEventName(r),o=e.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>On().onAndCancel(n,i.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=e._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Lh.forEach(u=>{let p=r.indexOf(u);p>-1&&(r.splice(p,1),o+=u+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let s=q_[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(s=n.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Lh.forEach(o=>{if(o!==s){let a=G_[o];a(n)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(n,r,s){return i=>{e.matchEventFullKeyCode(i,n)&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(se(Ke))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();function Hh(e,t){return vh(z({rootComponent:e},Z_(t)))}function Z_(e){return{appProviders:[...ey,...e?.providers??[]],platformProviders:J_}}function Y_(){Ba.makeCurrent()}function Q_(){return new Rt}function X_(){return _d(document),document}var J_=[{provide:Rn,useValue:Ah},{provide:pa,useValue:Y_,multi:!0},{provide:Ke,useFactory:X_,deps:[]}];var ey=[{provide:$i,useValue:"root"},{provide:Rt,useFactory:Q_,deps:[]},{provide:ja,useClass:W_,multi:!0,deps:[Ke,Se,Rn]},{provide:ja,useClass:K_,multi:!0,deps:[Ke]},Oh,Fh,Ph,{provide:In,useExisting:Oh},{provide:ns,useClass:F_,deps:[]},[]];var Uh=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(se(Ke))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ee="primary",Br=Symbol("RouteTitle"),Ga=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function jn(e){return new Ga(e)}function ny(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=e[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function ry(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!pt(e[n],t[n]))return!1;return!0}function pt(e,t){let n=e?Ka(e):void 0,r=t?Ka(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!Zh(e[s],t[s]))return!1;return!0}function Ka(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Zh(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((s,i)=>r[i]===s)}else return e===t}function Yh(e){return e.length>0?e[e.length-1]:null}function Lt(e){return Gs(e)?e:pr(e)?ye(Promise.resolve(e)):X(e)}var iy={exact:Xh,subset:Jh},Qh={exact:sy,subset:oy,ignored:()=>!0};function $h(e,t,n){return iy[n.paths](e.root,t.root,n.matrixParams)&&Qh[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function sy(e,t){return pt(e,t)}function Xh(e,t,n){if(!Yt(e.segments,t.segments)||!ls(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Xh(e.children[r],t.children[r],n))return!1;return!0}function oy(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Zh(e[n],t[n]))}function Jh(e,t,n){return ef(e,t,t.segments,n)}function ef(e,t,n,r){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!Yt(s,n)||t.hasChildren()||!ls(s,n,r))}else if(e.segments.length===n.length){if(!Yt(e.segments,n)||!ls(e.segments,n,r))return!1;for(let s in t.children)if(!e.children[s]||!Jh(e.children[s],t.children[s],r))return!1;return!0}else{let s=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!Yt(e.segments,s)||!ls(e.segments,s,r)||!e.children[ee]?!1:ef(e.children[ee],t,i,r)}}function ls(e,t,n){return t.every((r,s)=>Qh[n](e[s].parameters,r.parameters))}var St=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ue([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=jn(this.queryParams),this._queryParamMap}toString(){return ly.serialize(this)}},ue=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return us(this)}},Zt=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=jn(this.parameters),this._parameterMap}toString(){return nf(this)}};function ay(e,t){return Yt(e,t)&&e.every((n,r)=>pt(n.parameters,t[r].parameters))}function Yt(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function cy(e,t){let n=[];return Object.entries(e.children).forEach(([r,s])=>{r===ee&&(n=n.concat(t(s,r)))}),Object.entries(e.children).forEach(([r,s])=>{r!==ee&&(n=n.concat(t(s,r)))}),n}var Cc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>new Tr,providedIn:"root"})}return e})(),Tr=class{parse(t){let n=new Ya(t);return new St(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${wr(t.root,!0)}`,r=hy(t.queryParams),s=typeof t.fragment=="string"?`#${uy(t.fragment)}`:"";return`${n}${r}${s}`}},ly=new Tr;function us(e){return e.segments.map(t=>nf(t)).join("/")}function wr(e,t){if(!e.hasChildren())return us(e);if(t){let n=e.children[ee]?wr(e.children[ee],!1):"",r=[];return Object.entries(e.children).forEach(([s,i])=>{s!==ee&&r.push(`${s}:${wr(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cy(e,(r,s)=>s===ee?[wr(e.children[ee],!1)]:[`${s}:${wr(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ee]!=null?`${us(e)}/${n[0]}`:`${us(e)}/(${n.join("//")})`}}function tf(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function as(e){return tf(e).replace(/%3B/gi,";")}function uy(e){return encodeURI(e)}function Za(e){return tf(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ds(e){return decodeURIComponent(e)}function Vh(e){return ds(e.replace(/\+/g,"%20"))}function nf(e){return`${Za(e.path)}${dy(e.parameters)}`}function dy(e){return Object.entries(e).map(([t,n])=>`;${Za(t)}=${Za(n)}`).join("")}function hy(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(s=>`${as(n)}=${as(s)}`).join("&"):`${as(n)}=${as(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var fy=/^[^\/()?;#]+/;function Va(e){let t=e.match(fy);return t?t[0]:""}var py=/^[^\/()?;=#]+/;function gy(e){let t=e.match(py);return t?t[0]:""}var my=/^[^=?&#]+/;function vy(e){let t=e.match(my);return t?t[0]:""}var _y=/^[^&#]+/;function yy(e){let t=e.match(_y);return t?t[0]:""}var Ya=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ee]=new ue(t,n)),r}parseSegment(){let t=Va(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(t),new Zt(ds(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=gy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Va(this.remaining);s&&(r=s,this.capture(r))}t[ds(n)]=ds(r)}parseQueryParam(t){let n=vy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=yy(this.remaining);o&&(r=o,this.capture(r))}let s=Vh(n),i=Vh(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Va(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new G(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ee);let o=this.parseChildren();n[i]=Object.keys(o).length===1?o[ee]:new ue([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new G(4011,!1)}};function rf(e){return e.segments.length>0?new ue([],{[ee]:e}):e}function sf(e){let t={};for(let[r,s]of Object.entries(e.children)){let i=sf(s);if(r===ee&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new ue(e.segments,t);return Cy(n)}function Cy(e){if(e.numberOfChildren===1&&e.children[ee]){let t=e.children[ee];return new ue(e.segments.concat(t.segments),t.children)}return e}function xr(e){return e instanceof St}function Sy(e,t,n=null,r=null){let s=of(e);return af(s,t,n,r)}function of(e){let t;function n(i){let o={};for(let c of i.children){let u=n(c);o[c.outlet]=u}let a=new ue(i.url,o);return i===e&&(t=a),a}let r=n(e.root),s=rf(r);return t??s}function af(e,t,n,r){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return za(s,s,s,n,r);let i=wy(t);if(i.toRoot())return za(s,s,new ue([],{}),n,r);let o=Dy(i,s,e),a=o.processChildren?Er(o.segmentGroup,o.index,i.commands):lf(o.segmentGroup,o.index,i.commands);return za(s,o.segmentGroup,a,n,r)}function hs(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ar(e){return typeof e=="object"&&e!=null&&e.outlets}function za(e,t,n,r,s){let i={};r&&Object.entries(r).forEach(([c,u])=>{i[c]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`});let o;e===t?o=n:o=cf(e,t,n);let a=rf(sf(o));return new St(a,i,s)}function cf(e,t,n){let r={};return Object.entries(e.children).forEach(([s,i])=>{i===t?r[s]=n:r[s]=cf(i,t,n)}),new ue(e.segments,r)}var fs=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&hs(r[0]))throw new G(4003,!1);let s=r.find(Ar);if(s&&s!==Yh(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wy(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new fs(!0,0,e);let t=0,n=!1,r=e.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new fs(n,t,r)}var Pn=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Dy(e,t,n){if(e.isAbsolute)return new Pn(t,!0,0);if(!n)return new Pn(t,!1,NaN);if(n.parent===null)return new Pn(n,!0,0);let r=hs(e.commands[0])?0:1,s=n.segments.length-1+r;return by(n,s,e.numberOfDoubleDots)}function by(e,t,n){let r=e,s=t,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new G(4005,!1);s=r.segments.length}return new Pn(r,!1,s-i)}function Ey(e){return Ar(e[0])?e[0].outlets:{[ee]:e}}function lf(e,t,n){if(e??=new ue([],{}),e.segments.length===0&&e.hasChildren())return Er(e,t,n);let r=Iy(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new ue(e.segments.slice(0,r.pathIndex),{});return i.children[ee]=new ue(e.segments.slice(r.pathIndex),e.children),Er(i,0,s)}else return r.match&&s.length===0?new ue(e.segments,{}):r.match&&!e.hasChildren()?Qa(e,t,n):r.match?Er(e,0,s):Qa(e,t,n)}function Er(e,t,n){if(n.length===0)return new ue(e.segments,{});{let r=Ey(n),s={};if(Object.keys(r).some(i=>i!==ee)&&e.children[ee]&&e.numberOfChildren===1&&e.children[ee].segments.length===0){let i=Er(e.children[ee],t,n);return new ue(e.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=lf(e.children[i],t,o))}),Object.entries(e.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new ue(e.segments,s)}}function Iy(e,t,n){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return i;let o=e.segments[s],a=n[r];if(Ar(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(s>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Wh(c,u,o))return i;r+=2}else{if(!Wh(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function Qa(e,t,n){let r=e.segments.slice(0,t),s=0;for(;s<n.length;){let i=n[s];if(Ar(i)){let c=My(i.outlets);return new ue(r,c)}if(s===0&&hs(n[0])){let c=e.segments[t];r.push(new Zt(c.path,zh(n[0]))),s++;continue}let o=Ar(i)?i.outlets[ee]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&hs(a)?(r.push(new Zt(o,zh(a))),s+=2):(r.push(new Zt(o,{})),s++)}return new ue(r,{})}function My(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Qa(new ue([],{}),0,r))}),t}function zh(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Wh(e,t,n){return e==n.path&&pt(t,n.parameters)}var Ir="imperative",Me=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Me||{}),Ze=class{id;url;constructor(t,n){this.id=t,this.url=n}},Rr=class extends Ze{type=Me.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",s=null){super(t,n),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qt=class extends Ze{urlAfterRedirects;type=Me.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$e=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}($e||{}),Xa=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Xa||{}),Ct=class extends Ze{reason;code;type=Me.NavigationCancel;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xt=class extends Ze{reason;code;type=Me.NavigationSkipped;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}},kr=class extends Ze{error;target;type=Me.NavigationError;constructor(t,n,r,s){super(t,n),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ps=class extends Ze{urlAfterRedirects;state;type=Me.RoutesRecognized;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ja=class extends Ze{urlAfterRedirects;state;type=Me.GuardsCheckStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ec=class extends Ze{urlAfterRedirects;state;shouldActivate;type=Me.GuardsCheckEnd;constructor(t,n,r,s,i){super(t,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tc=class extends Ze{urlAfterRedirects;state;type=Me.ResolveStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nc=class extends Ze{urlAfterRedirects;state;type=Me.ResolveEnd;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rc=class{route;type=Me.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ic=class{route;type=Me.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sc=class{snapshot;type=Me.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oc=class{snapshot;type=Me.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ac=class{snapshot;type=Me.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cc=class{snapshot;type=Me.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Or=class{},Hn=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Ty(e,t){return e.providers&&!e._injector&&(e._injector=Ta(e.providers,t,`Route: ${e.path}`)),e._injector??t}function it(e){return e.outlet||ee}function xy(e,t){let n=e.filter(r=>it(r)===t);return n.push(...e.filter(r=>it(r)!==t)),n}function jr(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var lc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return jr(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ss(this.rootInjector)}},Ss=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new lc(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(se(qe))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gs=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=uc(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=uc(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=dc(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return dc(t,this._root).map(n=>n.value)}};function uc(e,t){if(e===t.value)return t;for(let n of t.children){let r=uc(e,n);if(r)return r}return null}function dc(e,t){if(e===t.value)return[t];for(let n of t.children){let r=dc(e,n);if(r.length)return r.unshift(t),r}return[]}var Ue=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ln(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ms=class extends gs{snapshot;constructor(t,n){super(t),this.snapshot=n,Sc(this,t)}toString(){return this.snapshot.toString()}};function uf(e){let t=Ay(e),n=new be([new Zt("",{})]),r=new be({}),s=new be({}),i=new be({}),o=new be(""),a=new Un(n,r,i,o,s,ee,e,t.root);return a.snapshot=t.root,new ms(new Ue(a,[]),t)}function Ay(e){let t={},n={},r={},s="",i=new Fn([],t,r,s,n,ee,e,null,{});return new _s("",new Ue(i,[]))}var Un=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(u=>u[Br]))??X(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(t=>jn(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(t=>jn(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vs(e,t,n="emptyOnly"){let r,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:z(z({},t.params),e.params),data:z(z({},t.data),e.data),resolve:z(z(z(z({},e.data),t.data),s?.data),e._resolvedData)}:r={params:z({},e.params),data:z({},e.data),resolve:z(z({},e.data),e._resolvedData??{})},s&&hf(s)&&(r.resolve[Br]=s.title),r}var Fn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Br]}constructor(t,n,r,s,i,o,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jn(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},_s=class extends gs{url;constructor(t,n){super(n),this.url=t,Sc(this,n)}toString(){return df(this._root)}};function Sc(e,t){t.value._routerState=e,t.children.forEach(n=>Sc(e,n))}function df(e){let t=e.children.length>0?` { ${e.children.map(df).join(", ")} } `:"";return`${e.value}${t}`}function Wa(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,pt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),pt(t.params,n.params)||e.paramsSubject.next(n.params),ry(t.url,n.url)||e.urlSubject.next(n.url),pt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function hc(e,t){let n=pt(e.params,t.params)&&ay(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||hc(e.parent,t.parent))}function hf(e){return typeof e.title=="string"||e.title===null}var Ry=new Y(""),ky=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new xe;deactivateEvents=new xe;attachEvents=new xe;detachEvents=new xe;routerOutletData=dd(void 0);parentContexts=$(Ss);location=$(Ji);changeDetector=$(mr);inputBinder=$(wc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let s=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new fc(n,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=xa({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xo]})}return e})(),fc=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,r,s){this.route=t,this.childContexts=n,this.parent=r,this.outletData=s}get(t,n){return t===Un?this.route:t===Ss?this.childContexts:t===Ry?this.outletData:this.parent.get(t,n)}},wc=new Y("");function Oy(e,t,n){let r=Nr(e,t._root,n?n._root:void 0);return new ms(r,t)}function Nr(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let s=Ny(e,t,n);return new Ue(r,s)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Nr(e,a)),o}}let r=Ly(t.value),s=t.children.map(i=>Nr(e,i));return new Ue(r,s)}}function Ny(e,t,n){return t.children.map(r=>{for(let s of n.children)if(e.shouldReuseRoute(r.value,s.value.snapshot))return Nr(e,r,s);return Nr(e,r)})}function Ly(e){return new Un(new be(e.url),new be(e.params),new be(e.queryParams),new be(e.fragment),new be(e.data),e.outlet,e.component,e)}var Lr=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},ff="ngNavigationCancelingError";function ys(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=xr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=pf(!1,$e.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function pf(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ff]=!0,n.cancellationCode=t,n}function Py(e){return gf(e)&&xr(e.url)}function gf(e){return!!e&&e[ff]}var Fy=(e,t,n,r)=>ie(s=>(new pc(t,s.targetRouterState,s.currentRouterState,n,r).activate(e),s)),pc=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,s,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Wa(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let s=Ln(n);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=Ln(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=Ln(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let s=Ln(n);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new cc(i.value.snapshot))}),t.children.length&&this.forwardEvent(new oc(t.value.snapshot))}activateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(Wa(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Wa(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Cs=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Bn=class{component;route;constructor(t,n){this.component=t,this.route=n}};function By(e,t,n){let r=e._root,s=t?t._root:null;return Dr(r,s,n,[r.value])}function jy(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Vn(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!ou(e)?e:t.get(e):r}function Dr(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ln(t);return e.children.forEach(o=>{Hy(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>Mr(a,n.getContext(o),s)),s}function Hy(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=Uy(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new Cs(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Dr(e,t,a?a.children:null,r,s):Dr(e,t,n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Bn(a.outlet.component,o))}else o&&Mr(t,a,s),s.canActivateChecks.push(new Cs(r)),i.component?Dr(e,null,a?a.children:null,r,s):Dr(e,null,n,r,s);return s}function Uy(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Yt(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Yt(e.url,t.url)||!pt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hc(e,t)||!pt(e.queryParams,t.queryParams);case"paramsChange":default:return!hc(e,t)}}function Mr(e,t,n){let r=Ln(e),s=e.value;Object.entries(r).forEach(([i,o])=>{s.component?t?Mr(o,t.children.getContext(i),n):Mr(o,null,n):Mr(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Bn(t.outlet.component,s)):n.canDeactivateChecks.push(new Bn(null,s)):n.canDeactivateChecks.push(new Bn(null,s))}function Hr(e){return typeof e=="function"}function $y(e){return typeof e=="boolean"}function Vy(e){return e&&Hr(e.canLoad)}function zy(e){return e&&Hr(e.canActivate)}function Wy(e){return e&&Hr(e.canActivateChild)}function qy(e){return e&&Hr(e.canDeactivate)}function Gy(e){return e&&Hr(e.canMatch)}function mf(e){return e instanceof gt||e?.name==="EmptyError"}var cs=Symbol("INITIAL_VALUE");function $n(){return Xe(e=>li(e.map(t=>t.pipe(mt(1),Xs(cs)))).pipe(ie(t=>{for(let n of t)if(n!==!0){if(n===cs)return cs;if(n===!1||Ky(n))return n}return!0}),Qe(t=>t!==cs),mt(1)))}function Ky(e){return xr(e)||e instanceof Lr}function Zy(e,t){return Ce(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return o.length===0&&i.length===0?X(pe(z({},n),{guardsResult:!0})):Yy(o,r,s,e).pipe(Ce(a=>a&&$y(a)?Qy(r,i,e,t):X(a)),ie(a=>pe(z({},n),{guardsResult:a})))})}function Yy(e,t,n,r){return ye(e).pipe(Ce(s=>n0(s.component,s.route,n,t,r)),vt(s=>s!==!0,!0))}function Qy(e,t,n,r){return ye(t).pipe(dn(s=>un(Jy(s.route.parent,r),Xy(s.route,r),t0(e,s.path,n),e0(e,s.route,n))),vt(s=>s!==!0,!0))}function Xy(e,t){return e!==null&&t&&t(new ac(e)),X(!0)}function Jy(e,t){return e!==null&&t&&t(new sc(e)),X(!0)}function e0(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let s=r.map(i=>ui(()=>{let o=jr(t)??n,a=Vn(i,o),c=zy(a)?a.canActivate(t,e):tt(o,()=>a(t,e));return Lt(c).pipe(vt())}));return X(s).pipe($n())}function t0(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>jy(o)).filter(o=>o!==null).map(o=>ui(()=>{let a=o.guards.map(c=>{let u=jr(o.node)??n,p=Vn(c,u),v=Wy(p)?p.canActivateChild(r,e):tt(u,()=>p(r,e));return Lt(v).pipe(vt())});return X(a).pipe($n())}));return X(i).pipe($n())}function n0(e,t,n,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return X(!0);let o=i.map(a=>{let c=jr(t)??s,u=Vn(a,c),p=qy(u)?u.canDeactivate(e,t,n,r):tt(c,()=>u(e,t,n,r));return Lt(p).pipe(vt())});return X(o).pipe($n())}function r0(e,t,n,r){let s=t.canLoad;if(s===void 0||s.length===0)return X(!0);let i=s.map(o=>{let a=Vn(o,e),c=Vy(a)?a.canLoad(t,n):tt(e,()=>a(t,n));return Lt(c)});return X(i).pipe($n(),vf(r))}function vf(e){return Vs(Ee(t=>{if(typeof t!="boolean")throw ys(e,t)}),ie(t=>t===!0))}function i0(e,t,n,r){let s=t.canMatch;if(!s||s.length===0)return X(!0);let i=s.map(o=>{let a=Vn(o,e),c=Gy(a)?a.canMatch(t,n):tt(e,()=>a(t,n));return Lt(c)});return X(i).pipe($n(),vf(r))}var Pr=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Fr=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Nn(e){return ln(new Pr(e))}function s0(e){return ln(new G(4e3,!1))}function o0(e){return ln(pf(!1,$e.GuardRejected))}var gc=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return X(r);if(s.numberOfChildren>1||!s.children[ee])return s0(`${t.redirectTo}`);s=s.children[ee]}}applyRedirectCommands(t,n,r,s,i){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:p,url:v,outlet:C,params:_,data:l,title:h}=s,d=tt(i,()=>a({params:_,data:l,queryParams:c,fragment:u,routeConfig:p,url:v,outlet:C,title:h}));if(d instanceof St)throw new Fr(d);n=d}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Fr(o);return o}applyRedirectCreateUrlTree(t,n,r,s){let i=this.createSegmentGroup(t,n.root,r,s);return new St(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(t,n,r,s){let i=this.createSegments(t,n.segments,r,s),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new ue(i,o)}createSegments(t,n,r,s){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,n,r){let s=r[n.path.substring(1)];if(!s)throw new G(4001,!1);return s}findOrReturn(t,n){let r=0;for(let s of n){if(s.path===t.path)return n.splice(r),s;r++}return t}},mc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function a0(e,t,n,r,s){let i=_f(e,t,n);return i.matched?(r=Ty(t,r),i0(r,t,n,s).pipe(ie(o=>o===!0?i:z({},mc)))):X(i)}function _f(e,t,n){if(t.path==="**")return c0(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?z({},mc):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||ny)(n,e,t);if(!s)return z({},mc);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?z(z({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function c0(e){return{matched:!0,parameters:e.length>0?Yh(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function qh(e,t,n,r){return n.length>0&&d0(e,n,r)?{segmentGroup:new ue(t,u0(r,new ue(n,e.children))),slicedSegments:[]}:n.length===0&&h0(e,n,r)?{segmentGroup:new ue(e.segments,l0(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ue(e.segments,e.children),slicedSegments:n}}function l0(e,t,n,r){let s={};for(let i of n)if(ws(e,t,i)&&!r[it(i)]){let o=new ue([],{});s[it(i)]=o}return z(z({},r),s)}function u0(e,t){let n={};n[ee]=t;for(let r of e)if(r.path===""&&it(r)!==ee){let s=new ue([],{});n[it(r)]=s}return n}function d0(e,t,n){return n.some(r=>ws(e,t,r)&&it(r)!==ee)}function h0(e,t,n){return n.some(r=>ws(e,t,r))}function ws(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function f0(e,t,n){return t.length===0&&!e.children[n]}var vc=class{};function p0(e,t,n,r,s,i,o="emptyOnly"){return new _c(e,t,n,r,s,o,i).recognize()}var g0=31,_c=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,s,i,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new gc(this.urlSerializer,this.urlTree)}noMatchError(t){return new G(4002,`'${t.segmentGroup}'`)}recognize(){let t=qh(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ie(({children:n,rootSnapshot:r})=>{let s=new Ue(r,n),i=new _s("",s),o=Sy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let n=new Fn([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ee,n).pipe(ie(r=>({children:r,rootSnapshot:n})),Et(r=>{if(r instanceof Fr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pr?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,s,!0,i).pipe(ie(o=>o instanceof Ue?[o]:[]))}processChildren(t,n,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ye(i).pipe(dn(o=>{let a=r.children[o],c=xy(n,o);return this.processSegmentGroup(t,c,a,o,s)}),Qs((o,a)=>(o.push(...a),o)),It(null),Ys(),Ce(o=>{if(o===null)return Nn(r);let a=yf(o);return m0(a),X(a)}))}processSegment(t,n,r,s,i,o,a){return ye(n).pipe(dn(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,s,i,o,a).pipe(Et(u=>{if(u instanceof Pr)return X(null);throw u}))),vt(c=>!!c),Et(c=>{if(mf(c))return f0(r,s,i)?X(new vc):Nn(r);throw c}))}processSegmentAgainstRoute(t,n,r,s,i,o,a,c){return it(r)!==o&&(o===ee||!ws(s,i,r))?Nn(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,r,i,o,c):Nn(s)}expandSegmentAgainstRouteUsingRedirect(t,n,r,s,i,o,a){let{matched:c,parameters:u,consumedSegments:p,positionalParamSegments:v,remainingSegments:C}=_f(n,s,i);if(!c)return Nn(n);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>g0&&(this.allowRedirects=!1));let _=new Fn(i,u,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Gh(s),it(s),s.component??s._loadedComponent??null,s,Kh(s)),l=vs(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(l.params),_.data=Object.freeze(l.data);let h=this.applyRedirects.applyRedirectCommands(p,s.redirectTo,v,_,t);return this.applyRedirects.lineralizeSegments(s,h).pipe(Ce(d=>this.processSegment(t,r,n,d.concat(C),o,!1,a)))}matchSegmentAgainstRoute(t,n,r,s,i,o){let a=a0(n,r,s,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Xe(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(Xe(({routes:u})=>{let p=r._loadedInjector??t,{parameters:v,consumedSegments:C,remainingSegments:_}=c,l=new Fn(C,v,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Gh(r),it(r),r.component??r._loadedComponent??null,r,Kh(r)),h=vs(l,o,this.paramsInheritanceStrategy);l.params=Object.freeze(h.params),l.data=Object.freeze(h.data);let{segmentGroup:d,slicedSegments:f}=qh(n,C,_,u);if(f.length===0&&d.hasChildren())return this.processChildren(p,u,d,l).pipe(ie(y=>new Ue(l,y)));if(u.length===0&&f.length===0)return X(new Ue(l,[]));let g=it(r)===i;return this.processSegment(p,u,d,f,g?ee:i,!0,l).pipe(ie(y=>new Ue(l,y instanceof Ue?[y]:[])))}))):Nn(n)))}getChildConfig(t,n,r){return n.children?X({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):r0(t,n,r,this.urlSerializer).pipe(Ce(s=>s?this.configLoader.loadChildren(t,n).pipe(Ee(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):o0(n))):X({routes:[],injector:t})}};function m0(e){e.sort((t,n)=>t.value.outlet===ee?-1:n.value.outlet===ee?1:t.value.outlet.localeCompare(n.value.outlet))}function v0(e){let t=e.value.routeConfig;return t&&t.path===""}function yf(e){let t=[],n=new Set;for(let r of e){if(!v0(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):t.push(r)}for(let r of n){let s=yf(r.children);t.push(new Ue(r.value,s))}return t.filter(r=>!n.has(r))}function Gh(e){return e.data||{}}function Kh(e){return e.resolve||{}}function _0(e,t,n,r,s,i){return Ce(o=>p0(e,t,n,r,o.extractedUrl,s,i).pipe(ie(({state:a,tree:c})=>pe(z({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function y0(e,t){return Ce(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return X(n);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let u of Cf(c))o.add(u);let a=0;return ye(o).pipe(dn(c=>i.has(c)?C0(c,r,e,t):(c.data=vs(c,c.parent,e).resolve,X(void 0))),Ee(()=>a++),hn(1),Ce(c=>a===o.size?X(n):Pe))})}function Cf(e){let t=e.children.map(n=>Cf(n)).flat();return[e,...t]}function C0(e,t,n,r){let s=e.routeConfig,i=e._resolve;return s?.title!==void 0&&!hf(s)&&(i[Br]=s.title),S0(i,e,t,r).pipe(ie(o=>(e._resolvedData=o,e.data=vs(e,e.parent,n).resolve,null)))}function S0(e,t,n,r){let s=Ka(e);if(s.length===0)return X({});let i={};return ye(s).pipe(Ce(o=>w0(e[o],t,n,r).pipe(vt(),Ee(a=>{if(a instanceof Lr)throw ys(new Tr,a);i[o]=a}))),hn(1),Zs(i),Et(o=>mf(o)?Pe:ln(o)))}function w0(e,t,n,r){let s=jr(t)??r,i=Vn(e,s),o=i.resolve?i.resolve(t,n):tt(s,()=>i(t,n));return Lt(o)}function qa(e){return Xe(t=>{let n=e(t);return n?ye(n).pipe(ie(()=>t)):X(t)})}var Sf=(()=>{class e{buildTitle(n){let r,s=n.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Br]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(D0),providedIn:"root"})}return e})(),D0=(()=>{class e extends Sf{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(se(Uh))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Dc=new Y("",{providedIn:"root",factory:()=>({})}),b0=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=kn({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){r&1&&rt(0,"router-outlet")},dependencies:[ky],encapsulation:2})}return e})();function bc(e){let t=e.children&&e.children.map(bc),n=t?pe(z({},e),{children:t}):z({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=b0),n}var Ec=new Y(""),E0=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(Oa);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return X(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Lt(n.loadComponent()).pipe(ie(wf),Ee(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Qn(()=>{this.componentLoaders.delete(n)})),s=new cn(r,()=>new Te).pipe(an());return this.componentLoaders.set(n,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=I0(r,this.compiler,n,this.onLoadEndListener).pipe(Qn(()=>{this.childrenLoaders.delete(r)})),o=new cn(i,()=>new Te).pipe(an());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function I0(e,t,n,r){return Lt(e.loadChildren()).pipe(ie(wf),Ce(s=>s instanceof ur||Array.isArray(s)?X(s):ye(t.compileModuleAsync(s))),ie(s=>{r&&r(e);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(n).injector,o=i.get(Ec,[],{optional:!0,self:!0}).flat()),{routes:o.map(bc),injector:i}}))}function M0(e){return e&&typeof e=="object"&&"default"in e}function wf(e){return M0(e)?e.default:e}var Ic=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(T0),providedIn:"root"})}return e})(),T0=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),x0=new Y("");var A0=new Y(""),R0=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Te;transitionAbortSubject=new Te;configLoader=$(E0);environmentInjector=$(qe);urlSerializer=$(Cc);rootContexts=$(Ss);location=$(_r);inputBindingEnabled=$(wc,{optional:!0})!==null;titleStrategy=$(Sf);options=$(Dc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Ic);createViewTransition=$(x0,{optional:!0});navigationErrorHandler=$(A0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>X(void 0);rootComponentType=null;constructor(){let n=s=>this.events.next(new rc(s)),r=s=>this.events.next(new ic(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(pe(z(z({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,s){return this.transitions=new be({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ir,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qe(i=>i.id!==0),ie(i=>pe(z({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Xe(i=>{let o=!1,a=!1;return X(i).pipe(Xe(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",$e.SupersededByNewNavigation),Pe;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&p!=="reload"){let v="";return this.events.next(new Xt(c.id,this.urlSerializer.serialize(c.rawUrl),v,Xa.IgnoredSameUrlNavigation)),c.resolve(!1),Pe}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(Xe(v=>{let C=this.transitions?.getValue();return this.events.next(new Rr(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),C!==this.transitions?.getValue()?Pe:Promise.resolve(v)}),_0(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ee(v=>{i.targetSnapshot=v.targetSnapshot,i.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=pe(z({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let C=new ps(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:v,extractedUrl:C,source:_,restoredState:l,extras:h}=c,d=new Rr(v,this.urlSerializer.serialize(C),_,l);this.events.next(d);let f=uf(this.rootComponentType).snapshot;return this.currentTransition=i=pe(z({},c),{targetSnapshot:f,urlAfterRedirects:C,extras:pe(z({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,X(i)}else{let v="";return this.events.next(new Xt(c.id,this.urlSerializer.serialize(c.extractedUrl),v,Xa.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Pe}}),Ee(c=>{let u=new Ja(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ie(c=>(this.currentTransition=i=pe(z({},c),{guards:By(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),Zy(this.environmentInjector,c=>this.events.next(c)),Ee(c=>{if(i.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ys(this.urlSerializer,c.guardsResult);let u=new ec(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Qe(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$e.GuardRejected),!1)),qa(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(Ee(u=>{let p=new tc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),Xe(u=>{let p=!1;return X(u).pipe(y0(this.paramsInheritanceStrategy,this.environmentInjector),Ee({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(u,"",$e.NoDataFromResolver)}}))}),Ee(u=>{let p=new nc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}))}),qa(c=>{let u=p=>{let v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ee(C=>{p.component=C}),ie(()=>{})));for(let C of p.children)v.push(...u(C));return v};return li(u(c.targetSnapshot.root)).pipe(It(null),mt(1))}),qa(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:c,targetSnapshot:u}=i,p=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return p?ye(p).pipe(ie(()=>i)):X(i)}),ie(c=>{let u=Oy(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=pe(z({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,i}),Ee(()=>{this.events.next(new Or)}),Fy(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),mt(1),Ee({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Js(this.transitionAbortSubject.pipe(Ee(c=>{throw c}))),Qn(()=>{!o&&!a&&this.cancelNavigationTransition(i,"",$e.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Et(c=>{if(a=!0,gf(c))this.events.next(new Ct(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),Py(c)?this.events.next(new Hn(c.url,c.navigationBehaviorOptions)):i.resolve(!1);else{let u=new kr(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);try{let p=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(p instanceof Lr){let{message:v,cancellationCode:C}=ys(this.urlSerializer,p);this.events.next(new Ct(i.id,this.urlSerializer.serialize(i.extractedUrl),v,C)),this.events.next(new Hn(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(p){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(p)}}return Pe}))}))}cancelNavigationTransition(n,r,s){let i=new Ct(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function k0(e){return e!==Ir}var O0=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(N0),providedIn:"root"})}return e})(),yc=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},N0=(()=>{class e extends yc{static \u0275fac=(()=>{let n;return function(s){return(n||(n=la(e)))(s||e)}})();static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Df=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>$(L0),providedIn:"root"})}return e})(),L0=(()=>{class e extends Df{location=$(_r);urlSerializer=$(Cc);options=$(Dc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=$(Ic);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new St;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=uf(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Rr)this.stateMemento=this.createStateMemento();else if(n instanceof Xt)this.rawUrlTree=r.initialUrl;else if(n instanceof ps){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else n instanceof Or?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Ct&&(n.code===$e.GuardRejected||n.code===$e.NoDataFromResolver)?this.restoreHistory(r):n instanceof kr?this.restoreHistory(r,!0):n instanceof Qt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let s=n instanceof St?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let i=this.browserPageId,o=z(z({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(s,"",o)}else{let i=z(z({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",i)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.currentUrlTree===n.finalUrl&&i===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=la(e)))(s||e)}})();static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),br=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(br||{});function P0(e,t){e.events.pipe(Qe(n=>n instanceof Qt||n instanceof Ct||n instanceof kr||n instanceof Xt),ie(n=>n instanceof Qt||n instanceof Xt?br.COMPLETE:(n instanceof Ct?n.code===$e.Redirect||n.code===$e.SupersededByNewNavigation:!1)?br.REDIRECTING:br.FAILED),Qe(n=>n!==br.REDIRECTING),mt(1)).subscribe(()=>{t()})}var F0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bf=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(es);stateManager=$(Df);options=$(Dc,{optional:!0})||{};pendingTasks=$(An);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(R0);urlSerializer=$(Cc);location=$(_r);urlHandlingStrategy=$(Ic);_events=new Te;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(O0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(Ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(wc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Ct&&r.code!==$e.Redirect&&r.code!==$e.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qt)this.navigated=!0;else if(r instanceof Hn){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=z({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||k0(s.source)},o);this.scheduleNavigation(a,Ir,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}H0(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ir,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=z({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(bc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=z(z({},this.currentUrlTree.queryParams),i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}p!==null&&(p=this.removeEmptyProps(p));let v;try{let C=s?s.snapshot:this.routerState.snapshot.root;v=of(C)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),v=this.currentUrlTree.root}return af(v,n,p,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let s=xr(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Ir,null,r)}navigate(n,r={skipLocationChange:!1}){return j0(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let s;if(r===!0?s=z({},F0):r===!1?s=z({},B0):s=r,xr(n))return $h(this.currentUrlTree,n,s);let i=this.parseUrl(n);return $h(this.currentUrlTree,i,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(n,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((v,C)=>{a=v,c=C});let p=this.pendingTasks.add();return P0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(v=>Promise.reject(v))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function j0(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new G(4008,!1)}function H0(e){return!(e instanceof Or)&&!(e instanceof Hn)}var U0=new Y("");function Ef(e,...t){return Ui([{provide:Ec,multi:!0,useValue:e},[],{provide:Un,useFactory:$0,deps:[bf]},{provide:Ra,multi:!0,useFactory:V0},t.map(n=>n.\u0275providers)])}function $0(e){return e.routerState.root}function V0(){let e=$(At);return t=>{let n=e.get(Nt);if(t!==n.components[0])return;let r=e.get(bf),s=e.get(z0);e.get(W0)===1&&r.initialNavigation(),e.get(q0,null,te.Optional)?.setUpPreloading(),e.get(U0,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var z0=new Y("",{factory:()=>new Te}),W0=new Y("",{providedIn:"root",factory:()=>1});var q0=new Y("");var If=[];var Mf={providers:[gh({eventCoalescing:!0}),Ef(If)]};function Tf(){let e=document.createElement("canvas"),t=e.getContext("2d");document.body.appendChild(e),e.width=window.innerWidth,e.height=window.innerHeight;let n=16,r=e.width/n,s=Array(Math.floor(r)).fill(1),i="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890@#$%^&*";function o(){t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#0f0",t.font=`${n}px monospace`,s.forEach((a,c)=>{let u=i.charAt(Math.floor(Math.random()*i.length)),p=c*n;t.fillText(u,p,a*n),a*n>e.height&&Math.random()>.975&&(s[c]=0),s[c]++}),requestAnimationFrame(o)}o(),window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight})}var kf=Oc(Af()),Of=Oc(Rf());var Es=class e{terminal;fitAddon;inputBuffer="";terminalClosed=new xe;constructor(){this.terminal=new kf.Terminal({cursorBlink:!0,theme:{background:"#000000",foreground:"#00ff00"}}),this.fitAddon=new Of.FitAddon}ngOnInit(){let t=document.getElementById("terminal");t&&(this.terminal.loadAddon(this.fitAddon),this.terminal.open(t),this.fitAddon.fit(),this.initializeCommands(),this.makeTerminalDraggable())}ngOnDestroy(){this.terminal.dispose()}makeTerminalDraggable(){let t=document.getElementById("terminalWrapper"),n=document.getElementById("terminalHeader");if(t&&n){let r=!1,s=0,i=0;n.addEventListener("mousedown",o=>{r=!0,s=o.clientX-t.offsetLeft,i=o.clientY-t.offsetTop,document.body.style.cursor="move"}),document.addEventListener("mousemove",o=>{if(r){let a=o.clientX-s,c=o.clientY-i;t.style.left=`${a}px`,t.style.top=`${c}px`}}),document.addEventListener("mouseup",()=>{r=!1,document.body.style.cursor="default"})}}initializeCommands(){let t={home:["projects","contact"],projects:["Project 1","Project 2","Project 3"],contact:["Oumaima Zerouali","oumaima.zerouali@gmail.com"]},n="home";this.terminal.writeln("Welcome to Oumaima's Portfolio Terminal!"),this.terminal.writeln('Type "help" for a list of commands.'),(()=>{this.terminal.write(`\r
C:\\Users\\Oumaima\\${n}> `)})(),this.terminal.onData(s=>{if(s==="\r"){let i=this.inputBuffer.trim();this.inputBuffer="",this.executeCommand(i,t,n)}else s==="\x7F"?(this.inputBuffer=this.inputBuffer.slice(0,-1),this.terminal.write("\b \b")):(this.inputBuffer+=s,this.terminal.write(s))})}executeCommand(t,n,r){switch(t){case"help":this.terminal.writeln(`\r
List of commands:`),this.terminal.writeln("help - List available commands"),this.terminal.writeln("ls - List files/directories in the current directory");break;case"ls":n[r]?this.terminal.writeln(`\r
`+n[r].join(`\r
`)):this.terminal.writeln(`\r
No files or directories found in ${r}`);break;case"clear":this.terminal.clear();break;case"exit":this.terminal.dispose(),this.terminalClosed.emit();break;default:if(t.startsWith("cd ")){let i=t.split(" ")[1];if(n[i])if(r=i,i==="contact"){let o="oumaima.zerouali@gmail.com";window.location.href=`mailto:${o}`,this.terminal.writeln(`\r
Opening email client to: ${o}`)}else if(i==="projects"){let o="https://github.com/OumaimaZerouali";window.open(o,"_blank"),this.terminal.writeln(`\r
Opening GitHub page: ${o}`)}else this.terminal.writeln(`\r
Changed directory to ${i}`);else this.terminal.writeln(`\r
Directory "${i}" not found.`)}else this.terminal.writeln(`\r
'${t}' is not recognized as an internal or external command.`);break}(()=>{this.terminal.write(`\r
C:\\Users\\Oumaima\\${r}> `)})()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=kn({type:e,selectors:[["app-terminal"]],outputs:{terminalClosed:"terminalClosed"},decls:5,vars:0,consts:[["id","terminalWrapper",1,"terminal-wrapper"],["id","terminalHeader",1,"terminal-header"],[1,"header-title"],["id","terminal",1,"terminal-body"]],template:function(n,r){n&1&&(Ne(0,"div",0)(1,"div",1)(2,"span",2),Gt(3,"Command Prompt"),Re()(),rt(4,"div",3),Re())},styles:[".terminal-wrapper[_ngcontent-%COMP%]{position:fixed;width:50%;height:40%;background:#000000e6;color:#0f0;font-family:Courier New,Courier,monospace;box-shadow:0 0 15px #0f0c;border-radius:5px;z-index:1000;cursor:move;overflow:hidden}.terminal-header[_ngcontent-%COMP%]{background:#333;color:#fff;padding:5px 10px;display:flex;justify-content:space-between;align-items:center;cursor:grab}.terminal-header[_ngcontent-%COMP%]:active{cursor:grabbing}.terminal-body[_ngcontent-%COMP%]{height:calc(100% - 30px);overflow-y:auto;padding:10px;border-top:2px solid #333}.xterm[_ngcontent-%COMP%]{height:100%;width:100%;color:#0f0!important;background-color:#000!important;padding:10px}[_nghost-%COMP%]     .xterm-char-measure-element{display:none}[_nghost-%COMP%]     .xterm-helper-textarea{position:absolute!important;top:-9999px!important;left:-9999px!important}"]})};function K0(e,t){if(e&1){let n=dh();Ne(0,"div",13)(1,"app-terminal",14),gr("terminalClosed",function(){Nu(n);let s=hh();return Lu(s.handleTerminalClosed())}),Re()()}}var Is=class e{roles=["backend developer","frontend developer"];index=0;currentText="";isDeleting=!1;typingSpeed=150;pauseDuration=2e3;isTerminalOpen=!1;ngOnInit(){Tf(),this.startTypingEffect()}ngOnDestroy(){let t=document.querySelector("canvas");t&&t.remove()}toggleTerminal(){this.isTerminalOpen=!this.isTerminalOpen}handleTerminalClosed(){this.isTerminalOpen=!1}startTypingEffect(){let t=this.roles[this.index];this.isDeleting?this.currentText=t.substring(0,this.currentText.length-1):this.currentText=t.substring(0,this.currentText.length+1);let n=this.typingSpeed;this.isDeleting&&(n/=2),!this.isDeleting&&this.currentText===t?(n=this.pauseDuration,this.isDeleting=!0):this.isDeleting&&this.currentText===""&&(this.isDeleting=!1,this.index=(this.index+1)%this.roles.length),setTimeout(()=>this.startTypingEffect(),n)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=kn({type:e,selectors:[["app-root"]],decls:21,vars:2,consts:[[1,"intro-container"],[1,"intro-text"],[1,"highlight"],[1,"cursor"],[1,"intro-image"],["src","./assets/img/profile-pic.png","alt","Profile Picture","width","500","height","500"],[1,"socials"],["href","https://github.com/OumaimaZerouali","target","_blank","aria-label","GitHub"],[1,"bx","bxl-github"],["href","https://www.linkedin.com/in/oumaima-zerouali-16b189223/","target","_blank","aria-label","LinkedIn"],[1,"bx","bxl-linkedin"],[1,"terminal-icon",3,"click"],[1,"bx","bx-terminal"],[1,"terminal-container"],[3,"terminalClosed"]],template:function(n,r){n&1&&(Ne(0,"div",0)(1,"div",1)(2,"h1"),Gt(3,"_Hello, World!_"),Re(),Ne(4,"p"),Gt(5," I\u2019m Oumaima, and I am a "),Ne(6,"span",2),Gt(7),Re(),rt(8,"span",3),Re(),Ne(9,"p"),Gt(10," A passionate and driven junior developer with a strong commitment to learning and innovation. "),Re()(),Ne(11,"div",4),rt(12,"img",5),Re()(),Ne(13,"div",6)(14,"a",7),rt(15,"i",8),Re(),Ne(16,"a",9),rt(17,"i",10),Re()(),Ne(18,"div",11),gr("click",function(){return r.toggleTerminal()}),rt(19,"i",12),Re(),Aa(20,K0,2,0,"div",13)),n&2&&(Da(7),ka(r.currentText),Da(13),uh(r.isTerminalOpen?20:-1))},dependencies:[Es],styles:[".intro-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;text-align:left;background:#000000b3;padding:30px 40px;border:1px solid #00ff00;border-radius:10px;box-shadow:0 0 20px #0f0c}.intro-text[_ngcontent-%COMP%]{flex:1;color:#0f0;font-family:Courier New,Courier,monospace}.intro-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:15px;text-shadow:0 0 10px #00ff00}.intro-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.5}.intro-image[_ngcontent-%COMP%]{margin-left:30px}.intro-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:2px solid #00ff00;box-shadow:0 0 15px #0f0c}.socials[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;top:70%;left:27%;gap:10px}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#0f0;font-size:2.5rem;transition:transform .3s ease,box-shadow .3s ease}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2);text-shadow:0 0 15px #00ff00,0 0 30px #00ff00}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{outline:2px solid #00ff00}.terminal-icon[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;font-size:2.5rem;color:#0f0;cursor:pointer;transition:transform .3s,color .3s}.terminal-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#0fa}"]})};Hh(Is,Mf).catch(e=>console.error(e));
